<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.59" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://0oWSQo0.github.io/wsq-blog/java/Spring/Spring%E8%AF%A6%E8%A7%A3%E2%80%94IOC%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E4%B9%8BBean%E5%AE%9E%E4%BE%8B%E5%8C%96.html"><meta property="og:title" content="Spring为什么不能解决prototype作用域循环依赖？"><meta property="og:description" content="本文主要研究如何从IOC容器已有的BeanDefinition信息，实例化出Bean对象；这里还会包括三块重点内容： BeanFactory中getBean的主体思路 Spring如何解决循环依赖问题 Spring中Bean的生命周期 BeanFactory中getBean的主体思路 BeanFactory定义了Bean容器的规范，其中包含根据bean..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-04-27T02:39:10.000Z"><meta property="article:modified_time" content="2025-04-27T02:39:10.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Spring为什么不能解决prototype作用域循环依赖？","image":[""],"dateModified":"2025-04-27T02:39:10.000Z","author":[{"@type":"Person","name":"WSQ","url":"https://0oWSQo0.github.com"}]}</script><title>Spring为什么不能解决prototype作用域循环依赖？</title><meta name="description" content="本文主要研究如何从IOC容器已有的BeanDefinition信息，实例化出Bean对象；这里还会包括三块重点内容： BeanFactory中getBean的主体思路 Spring如何解决循环依赖问题 Spring中Bean的生命周期 BeanFactory中getBean的主体思路 BeanFactory定义了Bean容器的规范，其中包含根据bean...">
    <link rel="preload" href="/wsq-blog/assets/style-B8iyyxn3.css" as="style"><link rel="stylesheet" href="/wsq-blog/assets/style-B8iyyxn3.css">
    <link rel="modulepreload" href="/wsq-blog/assets/app-ByvFWdWZ.js"><link rel="modulepreload" href="/wsq-blog/assets/Spring详解—IOC实现原理之Bean实例化.html-Dk2CwHZp.js"><link rel="modulepreload" href="/wsq-blog/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/wsq-blog/assets/index.html-BSfQOsmx.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/portfolio.html-aHfkZTSn.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/进制.html-DHZgwlKB.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ACL详解.html-BG-9ozo-.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ARP详解.html-CoAu515q.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/BGP详解.html-B0vP4-86.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/DHCP详解.html-CJWr4evl.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/DNS详解.html-C3uLkQW1.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/HTTPS详解.html-PwKzMMU8.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ICMP详解.html-DMGU3oKV.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/IPv6详解.html-CGCSxNQ3.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/IP详解.html-By96tj_6.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ISIS详解.html-QX-zOd5K.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/NAT详解.html-oKsWiWu7.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/OSPF-LSA.html-BcAeDk7b.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/OSPF实战.html-HEF_CxJl.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/OSPF特性.html-DqfIIFbt.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/OSPF详解.html-DBPjZX1F.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/RIP详解.html-Dp2werqk.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/RSTP、MSTP详解.html-BkdsM3dk.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/STP详解.html-CXykSBv0.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/TCP和UDP详解.html-DOjpuEes.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/VLAN详解.html-Cs5aTN0A.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/VPN详解.html-DIX5mqrQ.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Wireshark使用教程.html-D2hm1f-q.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/三层交换机.html-CSnJfryn.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/华为命令.html-Xfb3vFgI.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/应用层协议详解.html-DF9V027c.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/数据链路层基础知识.html-RJ-3LMqY.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/无线网络详解.html-DAdsiXxr.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/校验码.html-AaGZ4PbG.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/网关冗余技术.html-Bo1MWUDW.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/网络基础知识.html-DKfZSiD6.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/路由协议详解.html-BhMnSkRC.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/路由器.html-CX8AbjPj.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/路由高级特性.html-C1KK18Nb.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/链路聚合技术.html-CPeE4qmK.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/防火墙.html-PXiYXuwb.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/网站收藏.html-DfPRdxuJ.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/python元组.html-pPDcDKpA.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/python函数.html-BAyS2nq3.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/python列表.html-D0iUsYLh.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/python变量.html-Dob3TVPT.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/python基础.html-DlUfRVIf.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/python字典.html-p3EFtVd5.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/python字符串常用方法.html-DwxuRDTL.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/python异常处理机制.html-1EJpIJP6.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/python文件操作.html-BampCUzW.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/python模块和包.html-DT94KGxu.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/python流程控制.html-BQteD_Oc.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/python爬虫.html-DCJ77gGX.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/python类和对象.html-BJWQ-n2N.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/python类特殊成员.html-Bp9QlXU0.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/python运算符.html-KnBNpqs3.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/python集合.html-DxbldGD7.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-SKV1j3iL.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/disable.html-CA0sRvUs.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/encrypt.html-DmVbgUGC.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/layout.html-TNoAkjd0.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/markdown.html-DMg2DnL4.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/page.html-B_GQWWBa.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/华为数通笔记.html-Bi3N2Pns.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/网络.html-BGAcJ14_.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/SpringJdbcTemplate.html-DOL86e0C.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Spring事务.html-DLAfkzgs.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Spring的整体脉络.html-CClZmSak.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Spring详解—IOC实现原理之IOC体系结构设计.html-UJrVth3p.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Spring详解—IOC实现原理之IOC初始化流程.html-evZn4OW2.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Spring详解—Spring和Spring框架组成.html-CkuhG0Eh.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Spring详解—控制反转IOC.html-C-Bc39vk.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Spring详解—简单例子引入Spring要点.html-B84hetmE.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Spring详解—面向切面编程(AOP).html-BQgkoZqE.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Java 集合.html-0N_TzQnO.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Java修饰符和关键字.html-BvJVQVsA.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Java内置包装类.html-C-hepOv9.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Java内部类.html-C4FdaWwD.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Java反射机制.html-oeYtGez1.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Java基础—SPI机制.html-4uzh2WVf.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Java基础—反射机制.html-D-MKugyK.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Java基础—异常机制.html-DDNQwipA.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Java基础—泛型机制.html-DP1S8174.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Java基础—注解机制.html-CU-x5J0P.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Java字符串处理.html-9GnXb1Rp.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Java序列化与反序列化.html-DnBMRZ9y.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Java异常处理.html-Cp-IrG4Q.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Java数字处理.html-BvXjAFNI.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Java数组.html-BNEHH_1f.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Java数组操作.html-BwfqtLvL.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Java时间日期的处理.html-CuaVPbFo.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Java泛型和枚举.html-Bibi9yzw.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Java类和对象.html-Bm5x8XBN.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Java输入输出流.html-OlFLa09Y.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/java继承封装和多态.html-C3Yl6Cnf.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MyBatis详解—Mapper映射文件配置.html-x9qGtPpC.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MyBatis详解—sqlSession执行流程.html-CWxK879o.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MyBatis详解—一级缓存实现机制.html-D_LKUttl.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MyBatis详解—事务管理机制.html-V89vhtm8.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MyBatis详解—二级缓存实现机制.html-BCn599HL.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MyBatis详解—初始化基本流程.html-bBqkOfuB.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MyBatis详解—动态SQL使用与原理.html-DL32eTKP.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MyBatis详解—总体框架设计.html-BBU-3Gou.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MyBatis详解—插件之分页机制.html-CDFGt0SL.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MyBatis详解—插件机制.html-8S8TBoEp.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MyBatis详解—数据源与连接池.html-CEPu9Nf_.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MyBatis详解—配置清单.html--XhKRE6S.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MyBatis详解—配置解析过程.html-BFtMLJMU.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Servlet Cookie和Session.html-DR2A0Cc2.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Servlet过滤器.html-C-NQB2b5.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/servlet1.html-DRb571A2.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/servlet2.html-42PPduQR.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/servlet3.html-eov36YBN.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/springBoot—devtools.html-BXROBh-R.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/springBoot—常用注解.html-Ba8Tih1P.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/springBoot—集成Druid连接池.html-CfjBnMCc.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/springBoot—集成EasyExcel.html-DTvFJSnm.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/springBoot—集成POI.html-BiH9WmpS.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/springBoot—集成actuator监控工具.html-BVL5qe48.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/springBoot—集成admin监控工具.html-DjQrZ20J.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/springBoot集成MyBatis—XML方式.html-CFyiCOLH.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/springBoot集成Mybatis—PageHelper分页.html-BLcVZkfP.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/springBoot集成Mybatis—注解方式.html-C8dL65Sg.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/SpringMVC入门.html-C0Ng_82L.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/SpringMVC域对象共享数据.html-CKA3VxTc.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/SpringMVC实现Restful.html-DInf6ncA.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/SpringMVC获取请求参数.html-fa8W1woe.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/SpringMVC视图和视图解析器.html-B3U4PGXL.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/文字特效.html-CWW-bzoz.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6 ArrayBuffer.html-2W36NTHK.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6 Class.html-D-l69BPD.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6 Class的继承.html-BTxqf1fX.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6 Module的加载实现.html-aBa1Rgt8.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6 Module语法.html-BXcB1aqO.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6 Set和Map.html-pJ3RLOKS.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6 async函数.html-DfIxmzAm.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6 let和const.html-BP9Y3Llx.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6 proxy.html-uniH-Ytf.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6Iterator和forof循环.html-DTlAuXRp.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6Promise对象.html-X0038wAX.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6Symbol.html-vhpPuvNp.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6函数.html-Walfbb8j.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6字符串.html-DGP1y6Mt.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6对象.html-C9vMcfc3.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6数值.html-SmGBY7Dy.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6数组.html-CoksV7eK.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6结构赋值.html-BQ92au-D.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6运算符.html-Bs3f4iJZ.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/d.ts类型声明文件.html-FaTrqTNS.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ts三种特殊类型.html-BRPQpIAI.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ts函数类型.html--6E7_dgc.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ts对象类型.html-D_srTGKv.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ts数据类型.html-DdGu-2OM.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ts数组和元组.html-CpSB7IfP.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ts泛型.html-CNg_kaja.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ts的Enum类型.html-B0prNOGB.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ts的interface接口.html-Ck9jEaZi.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ts类型断言.html-D48eOsHa.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JS-CanvasAPI.html-B6FROLkX.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JS-ClipboardAPI.html-0jgZMKkU.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JS-FetchAPI.html-Cw8kemav.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JS-File_FileList_FileReader.html-y4iXaL7r.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JS-FormData.html-Ce7PdjOD.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JS-History.html-DGhVAnAu.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JS-SVG.html-BBglUUsf.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JS-URL.html-OIxMamXE.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JS-URLPatternAPI.html-C0Z9MUp-.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JS-WebSocket.html-ByF7T6KK.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JS-window.html-V5DKdGqJ.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JS实用代码片段.html-Doj17dcN.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Dockerfile定制镜像.html-BqJFqn9-.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Docker基础.html-uLBanoLh.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Docker的数据卷.html-77QNeeko.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Docker的网络.html-B5ZPYRuZ.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/docker-compose.html-BSZgYk07.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/热门镜像安装.html-DZX34XX3.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/集成Docker实现一键部署.html-1Fb2sueb.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Bash脚本—入门.html-DKt3zrnh.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Bash脚本—函数.html-DhI9gh7d.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Bash脚本—变量.html-BxAscfVJ.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Bash脚本—字符串操作.html-CblAJx4i.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Bash脚本—常用命令.html-CUG0uuSR.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Bash脚本—数组.html-B5xdV-o-.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Bash脚本—模式扩展.html-C5iBpyvX.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Bash脚本—流程控制.html-DQ0Mltck.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Bash脚本—算数运算.html-dj-lv_1k.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/LinuxSSH命令.html-ZEixwzzn.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/LinuxVim.html-BLR2nTK4.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linux入门.html-ChkQ41jS.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linux常用软件安装.html-Cnbim67c.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linux打包压缩命令.html-BoroE2eH.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linux操作历史.html-DWyTTK-y.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linux文件目录相关命令.html-CiIm7__W.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linux文件系统结构.html-CrEKZlHu.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linux文本操作命令.html-dpby_lpV.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linux权限管理.html-bnFYZPlz.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linux用户和用户组管理.html-BJBnRb6g.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linux磁盘相关命令.html-DfAEL6fl.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linux系统服务管理.html-BUdwZwBz.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linux网络相关命令.html-Cht05aA3.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linux软件安装.html-C1sIpfsj.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linux进程相关命令.html-UEE7xCyV.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linux防火墙详解.html-BmEe5q02.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linx其它常用命令.html-UiiLkvyg.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/VMware安装linux.html-QKlGqGYf.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/linux常用工具.html-ByzRfgkW.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/安装脚本实例.html-C7RRJ0lE.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ansible-playbook.html-DXfEAASm.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ansible.html-88oi0H4U.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ansible常用模块.html-CMsfTp6D.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/nginx入门.html-Qk3RJvA5.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Requests基本用法.html-B6BIASSQ.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Scrapy爬虫框架.html-BqGGmM3t.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/urllib包.html-CoRMY1yu.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL事务.html-Csl-FK9k.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL入门.html-DxbZNXsn.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL基础查询.html-DtPhx34t.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL多表查询.html-C5wfhCu-.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL字符集和校对规则.html-_isALRAV.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL存储引擎.html-hAlOhDuw.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL存储过程.html-CBmiE5Hp.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL安装.html-DSTAYqzW.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL常用函数汇总.html-D4XqfSXy.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL常见问题.html-BCBw0sYk.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL执行流程.html-Bfg1btkF.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL操作表中的数据.html-BGUDeAQw.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL数据库备份恢复.html-HumVlNWo.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL数据库的基本操作.html-B82VpT7r.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL数据类型.html-BqwApVXp.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL数据表的基本操作.html-B_20RMPW.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL日志.html-94bBpZU9.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL用户管理.html-Cb2HMAiy.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL索引.html-C35luInt.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL约束.html-09BWcaJ7.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL视图.html-Cf5fEmuE.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL触发器.html-OdMIFndx.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL试题.html-BRDkSaTE.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL运算符.html-lumHpRXZ.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL锁机制.html-BtjEv1C3.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL高级查询.html-65qBiYTk.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Redis Stream.html-Cp8IdQRY.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Redis发布订阅模式.html-DcqPz2sU.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Redis基础入门.html-NdtPa-dl.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Redis基础数据类型.html-B1v0M5Se.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Redis特殊数据类型.html-DQlbnRMh.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Redis的键.html-CNvpanbv.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Redis配置文件.html-CyhfkNKb.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/1.html-DpdH85iE.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/404.html-DzRdV6V6.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-D7tXnyZ0.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-b0AWykz7.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-BBMr7hCo.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-9fdm_HkX.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-DuegT34i.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-DklkDajr.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-XChYpJBG.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-D6p1qA0N.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-CHmVJb_t.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-CXAYNa7w.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-C-S1-DbF.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-Cnc2VbWo.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-DFvnKRgy.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-YSycvwyb.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-DpAB-Q-D.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-GGmeWdNo.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-Ck37IaW9.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-ZnTpcma4.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-XeWczNmA.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-BQW6HZIv.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-CrKsaQfz.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-B-3-hgWd.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-C2QDHVvc.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-CrONlmu0.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-BdNQ2gpr.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-Bowp21mE.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/giscus-BZxmVUME.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/flowchart-CTwbLKUk.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index-BYq9jyaM.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index-DRWmbcXV.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index-B9oRC6ej.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/mermaid.esm.min-C4kqu-t4.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/photoswipe.esm-GXRgw7eJ.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/setupDevtools-7MC2TMWH-CNm3RiJ7.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/wsq-blog/" aria-label="带我回家"><img class="vp-nav-logo" src="/wsq-blog/logo.png" alt><!----><!----></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/wsq-blog/" aria-label="主页"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="logos:google-home" width="1em" height="1em"></iconify-icon><!--]-->主页<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="前端"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:javascript" width="1em" height="1em"></iconify-icon>前端<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/js/%E5%9F%BA%E7%A1%80/" aria-label="JS基础"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:javascript" width="1em" height="1em"></iconify-icon><!--]-->JS基础<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/js/es6/" aria-label="ES6"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="logos:es6" width="1em" height="1em"></iconify-icon><!--]-->ES6<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/js/CSS/" aria-label="CSS"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:css3" width="1em" height="1em"></iconify-icon><!--]-->CSS<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Java"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:java" width="1em" height="1em"></iconify-icon>Java<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/java/java%E5%9F%BA%E7%A1%80/" aria-label="Java基础"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:java" width="1em" height="1em"></iconify-icon><!--]-->Java基础<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/java/mybatis/" aria-label="Mybatis"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:spring" width="1em" height="1em"></iconify-icon><!--]-->Mybatis<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/wsq-blog/java/Spring/" aria-label="Spring"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:spring" width="1em" height="1em"></iconify-icon><!--]-->Spring<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/java/springBoot/" aria-label="springBoot"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:spring" width="1em" height="1em"></iconify-icon><!--]-->springBoot<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="SQL"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:azuresqldatabase" width="1em" height="1em"></iconify-icon>SQL<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/sql/redis/" aria-label="Redis"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:redis" width="1em" height="1em"></iconify-icon><!--]-->Redis<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/sql/mysql/" aria-label="MySQL"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:mysql-wordmark" width="1em" height="1em"></iconify-icon><!--]-->MySQL<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="运维"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:centos" width="1em" height="1em"></iconify-icon>运维<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/linux/linux%E5%9F%BA%E7%A1%80/" aria-label="linux基础"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:linux" width="1em" height="1em"></iconify-icon><!--]-->linux基础<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/linux/docker/" aria-label="Docker"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:docker" width="1em" height="1em"></iconify-icon><!--]-->Docker<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/linux/tools/" aria-label="运维工具"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:linux" width="1em" height="1em"></iconify-icon><!--]-->运维工具<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="计算机基础"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:windows11" width="1em" height="1em"></iconify-icon>计算机基础<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/network/" aria-label="网络"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:networkx" width="1em" height="1em"></iconify-icon><!--]-->网络<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/computer/" aria-label="其他"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:haskell" width="1em" height="1em"></iconify-icon><!--]-->其他<!----></a></li></ul></button></div></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://0oWSQo0.github.com" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/wsq-blog/java/Spring/Spring%E8%AF%A6%E8%A7%A3%E2%80%94%E7%AE%80%E5%8D%95%E4%BE%8B%E5%AD%90%E5%BC%95%E5%85%A5Spring%E8%A6%81%E7%82%B9.html" aria-label="Spring详解—简单例子引入Spring要点"><!---->Spring详解—简单例子引入Spring要点<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/wsq-blog/java/Spring/SpringJdbcTemplate.html" aria-label="/java/Spring/SpringJdbcTemplate.html"><!---->/java/Spring/SpringJdbcTemplate.html<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/wsq-blog/java/Spring/Spring%E4%BA%8B%E5%8A%A1.html" aria-label="/java/Spring/Spring%E4%BA%8B%E5%8A%A1.html"><!---->/java/Spring/Spring%E4%BA%8B%E5%8A%A1.html<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/wsq-blog/java/Spring/Spring%E7%9A%84%E6%95%B4%E4%BD%93%E8%84%89%E7%BB%9C.html" aria-label="/java/Spring/Spring%E7%9A%84%E6%95%B4%E4%BD%93%E8%84%89%E7%BB%9C.html"><!---->/java/Spring/Spring%E7%9A%84%E6%95%B4%E4%BD%93%E8%84%89%E7%BB%9C.html<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/wsq-blog/java/Spring/Spring%E8%AF%A6%E8%A7%A3%E2%80%94IOC%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E4%B9%8BIOC%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1.html" aria-label="/java/Spring/Spring%E8%AF%A6%E8%A7%A3%E2%80%94IOC%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E4%B9%8BIOC%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1.html"><!---->/java/Spring/Spring%E8%AF%A6%E8%A7%A3%E2%80%94IOC%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E4%B9%8BIOC%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1.html<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/wsq-blog/java/Spring/Spring%E8%AF%A6%E8%A7%A3%E2%80%94IOC%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E4%B9%8BIOC%E5%88%9D%E5%A7%8B%E5%8C%96%E6%B5%81%E7%A8%8B.html" aria-label="/java/Spring/Spring%E8%AF%A6%E8%A7%A3%E2%80%94IOC%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E4%B9%8BIOC%E5%88%9D%E5%A7%8B%E5%8C%96%E6%B5%81%E7%A8%8B.html"><!---->/java/Spring/Spring%E8%AF%A6%E8%A7%A3%E2%80%94IOC%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E4%B9%8BIOC%E5%88%9D%E5%A7%8B%E5%8C%96%E6%B5%81%E7%A8%8B.html<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/wsq-blog/java/Spring/Spring%E8%AF%A6%E8%A7%A3%E2%80%94IOC%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E4%B9%8BBean%E5%AE%9E%E4%BE%8B%E5%8C%96.html" aria-label="Spring为什么不能解决prototype作用域循环依赖？"><!---->Spring为什么不能解决prototype作用域循环依赖？<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/wsq-blog/java/Spring/Spring%E8%AF%A6%E8%A7%A3%E2%80%94Spring%E5%92%8CSpring%E6%A1%86%E6%9E%B6%E7%BB%84%E6%88%90.html" aria-label="什么是Spring?"><!---->什么是Spring?<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/wsq-blog/java/Spring/Spring%E8%AF%A6%E8%A7%A3%E2%80%94%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%ACIOC.html" aria-label="引入"><!---->引入<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/wsq-blog/java/Spring/Spring%E8%AF%A6%E8%A7%A3%E2%80%94%E9%9D%A2%E5%90%91%E5%88%87%E9%9D%A2%E7%BC%96%E7%A8%8B(AOP).html" aria-label="引入"><!---->引入<!----></a></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Spring为什么不能解决prototype作用域循环依赖？</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://0oWSQo0.github.com" target="_blank" rel="noopener noreferrer">WSQ</a></span><span property="author" content="WSQ"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2024年11月1日</span><meta property="datePublished" content="2024-11-01T01:55:29.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 15 分钟</span><meta property="timeRequired" content="PT15M"></span><!----><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc" vp-toc><!----><div class="vp-toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#beanfactory中getbean的主体思路">BeanFactory中getBean的主体思路</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#spring中getbean的主体思路">Spring中getBean的主体思路</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#spring如何解决循环依赖问题">Spring如何解决循环依赖问题</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#spring为何不能解决非单例属性之外的循环依赖">Spring为何不能解决非单例属性之外的循环依赖？</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#那么其它循环依赖如何解决">那么其它循环依赖如何解决？</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#spring中bean的生命周期">Spring中Bean的生命周期</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#spring-容器中-bean-的生命周期流程">Spring 容器中 Bean 的生命周期流程</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#spring-bean生命周期案例">Spring Bean生命周期案例</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content" vp-content><p>本文主要研究如何从IOC容器已有的<code>BeanDefinition</code>信息，实例化出<code>Bean</code>对象；这里还会包括三块重点内容：<br> BeanFactory中getBean的主体思路<br> Spring如何解决循环依赖问题<br> Spring中Bean的生命周期</p><h2 id="beanfactory中getbean的主体思路" tabindex="-1"><a class="header-anchor" href="#beanfactory中getbean的主体思路"><span>BeanFactory中getBean的主体思路</span></a></h2><p><code>BeanFactory</code>定义了<code>Bean</code>容器的规范，其中包含根据bean的名字, <code>Class</code>类型和参数等来得到<code>bean</code>实例。</p><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;">// 根据bean的名字和Class类型等来得到bean实例    </span></span>
<span class="line"><span style="color:#F0F3F6;">Object </span><span style="color:#DBB7FF;">getBean</span><span style="color:#F0F3F6;">(String name) throws BeansException;    </span></span>
<span class="line"><span style="color:#F0F3F6;">Object </span><span style="color:#DBB7FF;">getBean</span><span style="color:#F0F3F6;">(String name, Class requiredType) throws BeansException;    </span></span>
<span class="line"><span style="color:#F0F3F6;">Object </span><span style="color:#DBB7FF;">getBean</span><span style="color:#F0F3F6;">(String name, Object... args) throws BeansException;</span></span>
<span class="line"><span style="color:#FF9492;">&lt;</span><span style="color:#F0F3F6;">T</span><span style="color:#FF9492;">&gt;</span><span style="color:#F0F3F6;"> T </span><span style="color:#DBB7FF;">getBean</span><span style="color:#F0F3F6;">(Class</span><span style="color:#FF9492;">&lt;</span><span style="color:#F0F3F6;">T</span><span style="color:#FF9492;">&gt;</span><span style="color:#F0F3F6;"> requiredType) throws BeansException;</span></span>
<span class="line"><span style="color:#FF9492;">&lt;</span><span style="color:#F0F3F6;">T</span><span style="color:#FF9492;">&gt;</span><span style="color:#F0F3F6;"> T </span><span style="color:#DBB7FF;">getBean</span><span style="color:#F0F3F6;">(Class</span><span style="color:#FF9492;">&lt;</span><span style="color:#F0F3F6;">T</span><span style="color:#FF9492;">&gt;</span><span style="color:#F0F3F6;"> requiredType, Object... args) throws BeansException;</span></span></code></pre></div><p>IoC初始化的流程，最终的将Bean的定义即<code>BeanDefinition</code>放到<code>beanDefinitionMap</code>中，本质上是一个<code>ConcurrentHashMap&lt;String, Object&gt;</code>；并且<code>BeanDefinition</code>接口中包含了这个类的<code>Class</code>信息以及是否是单例等；</p><p>这样我们初步有了实现<code>Object getBean(String name)</code>这个方法的思路：从beanDefinitionMap通过beanName获得BeanDefinition从BeanDefinition中获得beanClassName通过反射初始化beanClassName的实例instance 构造函数从BeanDefinition的<code>getConstructorArgumentValues()</code>方法获取属性值从<code>BeanDefinition的getPropertyValues()</code>方法获取返回<code>beanName</code>的实例<code>instance</code>由于<code>BeanDefinition</code>还有单例的信息，如果是无参构造函数的实例还可以放在一个缓存中，这样下次获取这个单例的实例时只需要从缓存中获取，如果获取不到再通过上述步骤获取。</p><h3 id="spring中getbean的主体思路" tabindex="-1"><a class="header-anchor" href="#spring中getbean的主体思路"><span>Spring中getBean的主体思路</span></a></h3><p><code>BeanFactory</code>实现getBean方法在AbstractBeanFactory中，这个方法重载都是调用doGetBean方法进行实现的：</p><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">public</span><span style="color:#F0F3F6;"> Object </span><span style="color:#DBB7FF;">getBean</span><span style="color:#F0F3F6;">(String name) throws BeansException {</span></span>
<span class="line"><span style="color:#FF9492;">  return</span><span style="color:#DBB7FF;"> doGetBean</span><span style="color:#F0F3F6;">(name, </span><span style="color:#91CBFF;">null</span><span style="color:#F0F3F6;">, </span><span style="color:#91CBFF;">null</span><span style="color:#F0F3F6;">, </span><span style="color:#91CBFF;">false</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span>
<span class="line"><span style="color:#FF9492;">public</span><span style="color:#FF9492;"> &lt;</span><span style="color:#F0F3F6;">T</span><span style="color:#FF9492;">&gt;</span><span style="color:#F0F3F6;"> T </span><span style="color:#DBB7FF;">getBean</span><span style="color:#F0F3F6;">(String name, Class</span><span style="color:#FF9492;">&lt;</span><span style="color:#F0F3F6;">T</span><span style="color:#FF9492;">&gt;</span><span style="color:#F0F3F6;"> requiredType) throws BeansException {</span></span>
<span class="line"><span style="color:#FF9492;">  return</span><span style="color:#DBB7FF;"> doGetBean</span><span style="color:#F0F3F6;">(name, requiredType, </span><span style="color:#91CBFF;">null</span><span style="color:#F0F3F6;">, </span><span style="color:#91CBFF;">false</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span>
<span class="line"><span style="color:#FF9492;">public</span><span style="color:#F0F3F6;"> Object </span><span style="color:#DBB7FF;">getBean</span><span style="color:#F0F3F6;">(String name, Object... args) throws BeansException {</span></span>
<span class="line"><span style="color:#FF9492;">  return</span><span style="color:#DBB7FF;"> doGetBean</span><span style="color:#F0F3F6;">(name, </span><span style="color:#91CBFF;">null</span><span style="color:#F0F3F6;">, args, </span><span style="color:#91CBFF;">false</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span>
<span class="line"><span style="color:#FF9492;">public</span><span style="color:#FF9492;"> &lt;</span><span style="color:#F0F3F6;">T</span><span style="color:#FF9492;">&gt;</span><span style="color:#F0F3F6;"> T </span><span style="color:#DBB7FF;">getBean</span><span style="color:#F0F3F6;">(String name, @</span><span style="color:#FF9492;">Nullable</span><span style="color:#F0F3F6;"> Class</span><span style="color:#FF9492;">&lt;</span><span style="color:#F0F3F6;">T</span><span style="color:#FF9492;">&gt;</span><span style="color:#F0F3F6;"> requiredType, @</span><span style="color:#FF9492;">Nullable</span><span style="color:#F0F3F6;"> Object... args)</span></span>
<span class="line"><span style="color:#F0F3F6;">    throws BeansException {</span></span>
<span class="line"><span style="color:#FF9492;">  return</span><span style="color:#DBB7FF;"> doGetBean</span><span style="color:#F0F3F6;">(name, requiredType, args, </span><span style="color:#91CBFF;">false</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span></code></pre></div><p>我们来看下doGetBean方法</p><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;">// 参数typeCheckOnly：bean实例是否包含一个类型检查</span></span>
<span class="line"><span style="color:#FF9492;">protected</span><span style="color:#FF9492;"> &lt;</span><span style="color:#F0F3F6;">T</span><span style="color:#FF9492;">&gt;</span><span style="color:#F0F3F6;"> T </span><span style="color:#DBB7FF;">doGetBean</span><span style="color:#F0F3F6;">(</span></span>
<span class="line"><span style="color:#F0F3F6;">			String name, @</span><span style="color:#FF9492;">Nullable</span><span style="color:#F0F3F6;"> Class</span><span style="color:#FF9492;">&lt;</span><span style="color:#F0F3F6;">T</span><span style="color:#FF9492;">&gt;</span><span style="color:#F0F3F6;"> requiredType, @</span><span style="color:#FF9492;">Nullable</span><span style="color:#FF9492;"> Object</span><span style="color:#F0F3F6;">[] args, </span><span style="color:#FF9492;">boolean</span><span style="color:#F0F3F6;"> typeCheckOnly)</span></span>
<span class="line"><span style="color:#F0F3F6;">			throws BeansException {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;">  // 解析bean的真正name，如果bean是工厂类，name前缀会加&amp;，需要去掉</span></span>
<span class="line"><span style="color:#F0F3F6;">  String</span><span style="color:#F0F3F6;"> beanName</span><span style="color:#FF9492;"> =</span><span style="color:#DBB7FF;"> transformedBeanName</span><span style="color:#F0F3F6;">(name);</span></span>
<span class="line"><span style="color:#F0F3F6;">  Object</span><span style="color:#F0F3F6;"> beanInstance;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;">  // Eagerly check singleton cache for manually registered singletons.</span></span>
<span class="line"><span style="color:#F0F3F6;">  Object</span><span style="color:#F0F3F6;"> sharedInstance</span><span style="color:#FF9492;"> =</span><span style="color:#DBB7FF;"> getSingleton</span><span style="color:#F0F3F6;">(beanName);</span></span>
<span class="line"><span style="color:#FF9492;">  if</span><span style="color:#F0F3F6;"> (sharedInstance </span><span style="color:#FF9492;">!=</span><span style="color:#91CBFF;"> null</span><span style="color:#FF9492;"> &amp;&amp;</span><span style="color:#F0F3F6;"> args </span><span style="color:#FF9492;">==</span><span style="color:#91CBFF;"> null</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#BDC4CC;">    // 无参单例从缓存中获取</span></span>
<span class="line"><span style="color:#F0F3F6;">    beanInstance </span><span style="color:#FF9492;">=</span><span style="color:#DBB7FF;"> getObjectForBeanInstance</span><span style="color:#F0F3F6;">(sharedInstance, name, beanName, </span><span style="color:#91CBFF;">null</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#F0F3F6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">  else</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"><span style="color:#BDC4CC;">    // 如果bean实例还在创建中，则直接抛出异常</span></span>
<span class="line"><span style="color:#FF9492;">    if</span><span style="color:#F0F3F6;"> (</span><span style="color:#DBB7FF;">isPrototypeCurrentlyInCreation</span><span style="color:#F0F3F6;">(beanName)) {</span></span>
<span class="line"><span style="color:#FF9492;">      throw</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> BeanCurrentlyInCreationException</span><span style="color:#F0F3F6;">(beanName);</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;">    // 如果 bean definition 存在于父的bean工厂中，委派给父Bean工厂获取</span></span>
<span class="line"><span style="color:#F0F3F6;">    BeanFactory</span><span style="color:#F0F3F6;"> parentBeanFactory</span><span style="color:#FF9492;"> =</span><span style="color:#DBB7FF;"> getParentBeanFactory</span><span style="color:#F0F3F6;">();</span></span>
<span class="line"><span style="color:#FF9492;">    if</span><span style="color:#F0F3F6;"> (parentBeanFactory </span><span style="color:#FF9492;">!=</span><span style="color:#91CBFF;"> null</span><span style="color:#FF9492;"> &amp;&amp;</span><span style="color:#FF9492;"> !</span><span style="color:#DBB7FF;">containsBeanDefinition</span><span style="color:#F0F3F6;">(beanName)) {</span></span>
<span class="line"><span style="color:#BDC4CC;">      // Not found -&gt; check parent.</span></span>
<span class="line"><span style="color:#F0F3F6;">      String</span><span style="color:#F0F3F6;"> nameToLookup</span><span style="color:#FF9492;"> =</span><span style="color:#DBB7FF;"> originalBeanName</span><span style="color:#F0F3F6;">(name);</span></span>
<span class="line"><span style="color:#FF9492;">      if</span><span style="color:#F0F3F6;"> (parentBeanFactory </span><span style="color:#FF9492;">instanceof</span><span style="color:#F0F3F6;"> AbstractBeanFactory) {</span></span>
<span class="line"><span style="color:#FF9492;">        return</span><span style="color:#F0F3F6;"> ((AbstractBeanFactory) parentBeanFactory).</span><span style="color:#DBB7FF;">doGetBean</span><span style="color:#F0F3F6;">(</span></span>
<span class="line"><span style="color:#F0F3F6;">            nameToLookup, requiredType, args, typeCheckOnly);</span></span>
<span class="line"><span style="color:#F0F3F6;">      }</span></span>
<span class="line"><span style="color:#FF9492;">      else</span><span style="color:#FF9492;"> if</span><span style="color:#F0F3F6;"> (args </span><span style="color:#FF9492;">!=</span><span style="color:#91CBFF;"> null</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#BDC4CC;">        // Delegation to parent with explicit args.</span></span>
<span class="line"><span style="color:#FF9492;">        return</span><span style="color:#F0F3F6;"> (T) parentBeanFactory.</span><span style="color:#DBB7FF;">getBean</span><span style="color:#F0F3F6;">(nameToLookup, args);</span></span>
<span class="line"><span style="color:#F0F3F6;">      }</span></span>
<span class="line"><span style="color:#FF9492;">      else</span><span style="color:#FF9492;"> if</span><span style="color:#F0F3F6;"> (requiredType </span><span style="color:#FF9492;">!=</span><span style="color:#91CBFF;"> null</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#BDC4CC;">        // No args -&gt; delegate to standard getBean method.</span></span>
<span class="line"><span style="color:#FF9492;">        return</span><span style="color:#F0F3F6;"> parentBeanFactory.</span><span style="color:#DBB7FF;">getBean</span><span style="color:#F0F3F6;">(nameToLookup, requiredType);</span></span>
<span class="line"><span style="color:#F0F3F6;">      }</span></span>
<span class="line"><span style="color:#FF9492;">      else</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"><span style="color:#FF9492;">        return</span><span style="color:#F0F3F6;"> (T) parentBeanFactory.</span><span style="color:#DBB7FF;">getBean</span><span style="color:#F0F3F6;">(nameToLookup);</span></span>
<span class="line"><span style="color:#F0F3F6;">      }</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">    if</span><span style="color:#F0F3F6;"> (</span><span style="color:#FF9492;">!</span><span style="color:#F0F3F6;">typeCheckOnly) {</span></span>
<span class="line"><span style="color:#BDC4CC;">      // 将当前bean实例放入alreadyCreated集合里，标识这个bean准备创建了</span></span>
<span class="line"><span style="color:#DBB7FF;">      markBeanAsCreated</span><span style="color:#F0F3F6;">(beanName);</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">    StartupStep</span><span style="color:#F0F3F6;"> beanCreation</span><span style="color:#FF9492;"> =</span><span style="color:#91CBFF;"> this</span><span style="color:#F0F3F6;">.applicationStartup.</span><span style="color:#DBB7FF;">start</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;spring.beans.instantiate&quot;</span><span style="color:#F0F3F6;">)</span></span>
<span class="line"><span style="color:#F0F3F6;">        .</span><span style="color:#DBB7FF;">tag</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;beanName&quot;</span><span style="color:#F0F3F6;">, name);</span></span>
<span class="line"><span style="color:#FF9492;">    try</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"><span style="color:#FF9492;">      if</span><span style="color:#F0F3F6;"> (requiredType </span><span style="color:#FF9492;">!=</span><span style="color:#91CBFF;"> null</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#F0F3F6;">        beanCreation.</span><span style="color:#DBB7FF;">tag</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;beanType&quot;</span><span style="color:#F0F3F6;">, requiredType</span><span style="color:#FF9492;">::</span><span style="color:#F0F3F6;">toString);</span></span>
<span class="line"><span style="color:#F0F3F6;">      }</span></span>
<span class="line"><span style="color:#F0F3F6;">      RootBeanDefinition</span><span style="color:#F0F3F6;"> mbd</span><span style="color:#FF9492;"> =</span><span style="color:#DBB7FF;"> getMergedLocalBeanDefinition</span><span style="color:#F0F3F6;">(beanName);</span></span>
<span class="line"><span style="color:#DBB7FF;">      checkMergedBeanDefinition</span><span style="color:#F0F3F6;">(mbd, beanName, args);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;">      // 确保它的依赖也被初始化了.</span></span>
<span class="line"><span style="color:#FF9492;">      String</span><span style="color:#FFB757;">[] </span><span style="color:#F0F3F6;">dependsOn</span><span style="color:#FF9492;"> =</span><span style="color:#F0F3F6;"> mbd.</span><span style="color:#DBB7FF;">getDependsOn</span><span style="color:#F0F3F6;">();</span></span>
<span class="line"><span style="color:#FF9492;">      if</span><span style="color:#F0F3F6;"> (dependsOn </span><span style="color:#FF9492;">!=</span><span style="color:#91CBFF;"> null</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#FF9492;">        for</span><span style="color:#F0F3F6;"> (String</span><span style="color:#F0F3F6;"> dep</span><span style="color:#FF9492;"> :</span><span style="color:#F0F3F6;"> dependsOn) {</span></span>
<span class="line"><span style="color:#FF9492;">          if</span><span style="color:#F0F3F6;"> (</span><span style="color:#DBB7FF;">isDependent</span><span style="color:#F0F3F6;">(beanName, dep)) {</span></span>
<span class="line"><span style="color:#FF9492;">            throw</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> BeanCreationException</span><span style="color:#F0F3F6;">(mbd.</span><span style="color:#DBB7FF;">getResourceDescription</span><span style="color:#F0F3F6;">(), beanName,</span></span>
<span class="line"><span style="color:#ADDCFF;">                &quot;Circular depends-on relationship between &#39;&quot;</span><span style="color:#FF9492;"> +</span><span style="color:#F0F3F6;"> beanName </span><span style="color:#FF9492;">+</span><span style="color:#ADDCFF;"> &quot;&#39; and &#39;&quot;</span><span style="color:#FF9492;"> +</span><span style="color:#F0F3F6;"> dep </span><span style="color:#FF9492;">+</span><span style="color:#ADDCFF;"> &quot;&#39;&quot;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#F0F3F6;">          }</span></span>
<span class="line"><span style="color:#DBB7FF;">          registerDependentBean</span><span style="color:#F0F3F6;">(dep, beanName);</span></span>
<span class="line"><span style="color:#FF9492;">          try</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"><span style="color:#DBB7FF;">            getBean</span><span style="color:#F0F3F6;">(dep); </span><span style="color:#BDC4CC;">// 初始化它依赖的Bean</span></span>
<span class="line"><span style="color:#F0F3F6;">          }</span></span>
<span class="line"><span style="color:#FF9492;">          catch</span><span style="color:#F0F3F6;"> (NoSuchBeanDefinitionException </span><span style="color:#FFB757;">ex</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#FF9492;">            throw</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> BeanCreationException</span><span style="color:#F0F3F6;">(mbd.</span><span style="color:#DBB7FF;">getResourceDescription</span><span style="color:#F0F3F6;">(), beanName,</span></span>
<span class="line"><span style="color:#ADDCFF;">                &quot;&#39;&quot;</span><span style="color:#FF9492;"> +</span><span style="color:#F0F3F6;"> beanName </span><span style="color:#FF9492;">+</span><span style="color:#ADDCFF;"> &quot;&#39; depends on missing bean &#39;&quot;</span><span style="color:#FF9492;"> +</span><span style="color:#F0F3F6;"> dep </span><span style="color:#FF9492;">+</span><span style="color:#ADDCFF;"> &quot;&#39;&quot;</span><span style="color:#F0F3F6;">, ex);</span></span>
<span class="line"><span style="color:#F0F3F6;">          }</span></span>
<span class="line"><span style="color:#F0F3F6;">        }</span></span>
<span class="line"><span style="color:#F0F3F6;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;">      // 创建Bean实例：单例</span></span>
<span class="line"><span style="color:#FF9492;">      if</span><span style="color:#F0F3F6;"> (mbd.</span><span style="color:#DBB7FF;">isSingleton</span><span style="color:#F0F3F6;">()) {</span></span>
<span class="line"><span style="color:#F0F3F6;">        sharedInstance </span><span style="color:#FF9492;">=</span><span style="color:#DBB7FF;"> getSingleton</span><span style="color:#F0F3F6;">(beanName, () </span><span style="color:#FF9492;">-&gt;</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"><span style="color:#FF9492;">          try</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"><span style="color:#BDC4CC;">            // 真正创建bean的方法</span></span>
<span class="line"><span style="color:#FF9492;">            return</span><span style="color:#DBB7FF;"> createBean</span><span style="color:#F0F3F6;">(beanName, mbd, args);</span></span>
<span class="line"><span style="color:#F0F3F6;">          }</span></span>
<span class="line"><span style="color:#FF9492;">          catch</span><span style="color:#F0F3F6;"> (BeansException </span><span style="color:#FFB757;">ex</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#BDC4CC;">            // Explicitly remove instance from singleton cache: It might have been put there</span></span>
<span class="line"><span style="color:#BDC4CC;">            // eagerly by the creation process, to allow for circular reference resolution.</span></span>
<span class="line"><span style="color:#BDC4CC;">            // Also remove any beans that received a temporary reference to the bean.</span></span>
<span class="line"><span style="color:#DBB7FF;">            destroySingleton</span><span style="color:#F0F3F6;">(beanName);</span></span>
<span class="line"><span style="color:#FF9492;">            throw</span><span style="color:#F0F3F6;"> ex;</span></span>
<span class="line"><span style="color:#F0F3F6;">          }</span></span>
<span class="line"><span style="color:#F0F3F6;">        });</span></span>
<span class="line"><span style="color:#F0F3F6;">        beanInstance </span><span style="color:#FF9492;">=</span><span style="color:#DBB7FF;"> getObjectForBeanInstance</span><span style="color:#F0F3F6;">(sharedInstance, name, beanName, mbd);</span></span>
<span class="line"><span style="color:#F0F3F6;">      }</span></span>
<span class="line"><span style="color:#BDC4CC;">      // 创建Bean实例：原型</span></span>
<span class="line"><span style="color:#FF9492;">      else</span><span style="color:#FF9492;"> if</span><span style="color:#F0F3F6;"> (mbd.</span><span style="color:#DBB7FF;">isPrototype</span><span style="color:#F0F3F6;">()) {</span></span>
<span class="line"><span style="color:#BDC4CC;">        // It&#39;s a prototype -&gt; create a new instance.</span></span>
<span class="line"><span style="color:#F0F3F6;">        Object</span><span style="color:#F0F3F6;"> prototypeInstance</span><span style="color:#FF9492;"> =</span><span style="color:#91CBFF;"> null</span><span style="color:#F0F3F6;">;</span></span>
<span class="line"><span style="color:#FF9492;">        try</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"><span style="color:#DBB7FF;">          beforePrototypeCreation</span><span style="color:#F0F3F6;">(beanName);</span></span>
<span class="line"><span style="color:#F0F3F6;">          prototypeInstance </span><span style="color:#FF9492;">=</span><span style="color:#DBB7FF;"> createBean</span><span style="color:#F0F3F6;">(beanName, mbd, args);</span></span>
<span class="line"><span style="color:#F0F3F6;">        }</span></span>
<span class="line"><span style="color:#FF9492;">        finally</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"><span style="color:#DBB7FF;">          afterPrototypeCreation</span><span style="color:#F0F3F6;">(beanName);</span></span>
<span class="line"><span style="color:#F0F3F6;">        }</span></span>
<span class="line"><span style="color:#F0F3F6;">        beanInstance </span><span style="color:#FF9492;">=</span><span style="color:#DBB7FF;"> getObjectForBeanInstance</span><span style="color:#F0F3F6;">(prototypeInstance, name, beanName, mbd);</span></span>
<span class="line"><span style="color:#F0F3F6;">      }</span></span>
<span class="line"><span style="color:#BDC4CC;">      // 创建Bean实例：根据bean的scope创建</span></span>
<span class="line"><span style="color:#FF9492;">      else</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"><span style="color:#F0F3F6;">        String</span><span style="color:#F0F3F6;"> scopeName</span><span style="color:#FF9492;"> =</span><span style="color:#F0F3F6;"> mbd.</span><span style="color:#DBB7FF;">getScope</span><span style="color:#F0F3F6;">();</span></span>
<span class="line"><span style="color:#FF9492;">        if</span><span style="color:#F0F3F6;"> (</span><span style="color:#FF9492;">!</span><span style="color:#F0F3F6;">StringUtils.</span><span style="color:#DBB7FF;">hasLength</span><span style="color:#F0F3F6;">(scopeName)) {</span></span>
<span class="line"><span style="color:#FF9492;">          throw</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> IllegalStateException</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;No scope name defined for bean ´&quot;</span><span style="color:#FF9492;"> +</span><span style="color:#F0F3F6;"> beanName </span><span style="color:#FF9492;">+</span><span style="color:#ADDCFF;"> &quot;&#39;&quot;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#F0F3F6;">        }</span></span>
<span class="line"><span style="color:#F0F3F6;">        Scope</span><span style="color:#F0F3F6;"> scope</span><span style="color:#FF9492;"> =</span><span style="color:#91CBFF;"> this</span><span style="color:#F0F3F6;">.scopes.</span><span style="color:#DBB7FF;">get</span><span style="color:#F0F3F6;">(scopeName);</span></span>
<span class="line"><span style="color:#FF9492;">        if</span><span style="color:#F0F3F6;"> (scope </span><span style="color:#FF9492;">==</span><span style="color:#91CBFF;"> null</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#FF9492;">          throw</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> IllegalStateException</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;No Scope registered for scope name &#39;&quot;</span><span style="color:#FF9492;"> +</span><span style="color:#F0F3F6;"> scopeName </span><span style="color:#FF9492;">+</span><span style="color:#ADDCFF;"> &quot;&#39;&quot;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#F0F3F6;">        }</span></span>
<span class="line"><span style="color:#FF9492;">        try</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"><span style="color:#F0F3F6;">          Object</span><span style="color:#F0F3F6;"> scopedInstance</span><span style="color:#FF9492;"> =</span><span style="color:#F0F3F6;"> scope.</span><span style="color:#DBB7FF;">get</span><span style="color:#F0F3F6;">(beanName, () </span><span style="color:#FF9492;">-&gt;</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"><span style="color:#DBB7FF;">            beforePrototypeCreation</span><span style="color:#F0F3F6;">(beanName);</span></span>
<span class="line"><span style="color:#FF9492;">            try</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"><span style="color:#FF9492;">              return</span><span style="color:#DBB7FF;"> createBean</span><span style="color:#F0F3F6;">(beanName, mbd, args);</span></span>
<span class="line"><span style="color:#F0F3F6;">            }</span></span>
<span class="line"><span style="color:#FF9492;">            finally</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"><span style="color:#DBB7FF;">              afterPrototypeCreation</span><span style="color:#F0F3F6;">(beanName);</span></span>
<span class="line"><span style="color:#F0F3F6;">            }</span></span>
<span class="line"><span style="color:#F0F3F6;">          });</span></span>
<span class="line"><span style="color:#F0F3F6;">          beanInstance </span><span style="color:#FF9492;">=</span><span style="color:#DBB7FF;"> getObjectForBeanInstance</span><span style="color:#F0F3F6;">(scopedInstance, name, beanName, mbd);</span></span>
<span class="line"><span style="color:#F0F3F6;">        }</span></span>
<span class="line"><span style="color:#FF9492;">        catch</span><span style="color:#F0F3F6;"> (IllegalStateException </span><span style="color:#FFB757;">ex</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#FF9492;">          throw</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> ScopeNotActiveException</span><span style="color:#F0F3F6;">(beanName, scopeName, ex);</span></span>
<span class="line"><span style="color:#F0F3F6;">        }</span></span>
<span class="line"><span style="color:#F0F3F6;">      }</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"><span style="color:#FF9492;">    catch</span><span style="color:#F0F3F6;"> (BeansException </span><span style="color:#FFB757;">ex</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#F0F3F6;">      beanCreation.</span><span style="color:#DBB7FF;">tag</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;exception&quot;</span><span style="color:#F0F3F6;">, ex.</span><span style="color:#DBB7FF;">getClass</span><span style="color:#F0F3F6;">().</span><span style="color:#DBB7FF;">toString</span><span style="color:#F0F3F6;">());</span></span>
<span class="line"><span style="color:#F0F3F6;">      beanCreation.</span><span style="color:#DBB7FF;">tag</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;message&quot;</span><span style="color:#F0F3F6;">, String.</span><span style="color:#DBB7FF;">valueOf</span><span style="color:#F0F3F6;">(ex.</span><span style="color:#DBB7FF;">getMessage</span><span style="color:#F0F3F6;">()));</span></span>
<span class="line"><span style="color:#DBB7FF;">      cleanupAfterBeanCreationFailure</span><span style="color:#F0F3F6;">(beanName);</span></span>
<span class="line"><span style="color:#FF9492;">      throw</span><span style="color:#F0F3F6;"> ex;</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"><span style="color:#FF9492;">    finally</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"><span style="color:#F0F3F6;">      beanCreation.</span><span style="color:#DBB7FF;">end</span><span style="color:#F0F3F6;">();</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"><span style="color:#F0F3F6;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">  return</span><span style="color:#DBB7FF;"> adaptBeanInstance</span><span style="color:#F0F3F6;">(name, beanInstance, requiredType);</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span></code></pre></div><p>解析bean的真正name，如果bean是工厂类，name前缀会加&amp;，需要去掉无参单例先从缓存中尝试获取如果bean实例还在创建中，则直接抛出异常如果bean definition 存在于父的bean工厂中，委派给父Bean工厂获取标记这个beanName的实例正在创建确保它的依赖也被初始化真正创建 单例时原型时根据bean的scope创建</p><h2 id="spring如何解决循环依赖问题" tabindex="-1"><a class="header-anchor" href="#spring如何解决循环依赖问题"><span>Spring如何解决循环依赖问题</span></a></h2><p>首先我们需要说明，Spring只是解决了单例模式下属性依赖的循环问题；Spring为了解决单例的循环依赖问题，使用了三级缓存。<br> Spring单例模式下的属性依赖先来看下这三级缓存</p><div class="language-" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span>/** Cache of singleton objects: bean name --&gt; bean instance */</span></span>
<span class="line"><span>private final Map&lt;String, Object&gt; singletonObjects = new ConcurrentHashMap&lt;String, Object&gt;(256);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/** Cache of early singleton objects: bean name --&gt; bean instance */</span></span>
<span class="line"><span>private final Map&lt;String, Object&gt; earlySingletonObjects = new HashMap&lt;String, Object&gt;(16);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/** Cache of singleton factories: bean name --&gt; ObjectFactory */</span></span>
<span class="line"><span>private final Map&lt;String, ObjectFactory&lt;?&gt;&gt; singletonFactories = new HashMap&lt;String, ObjectFactory&lt;?&gt;&gt;(16);</span></span></code></pre></div><p>第一层缓存（<code>singletonObjects</code>）：单例对象缓存池，已经实例化并且属性赋值，这里的对象是成熟对象；第二层缓存（<code>earlySingletonObjects</code>）：单例对象缓存池，已经实例化但尚未属性赋值，这里的对象是半成品对象；第三层缓存（<code>singletonFactories</code>）: 单例工厂的缓存如下是获取单例中</p><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">protected</span><span style="color:#F0F3F6;"> Object </span><span style="color:#DBB7FF;">getSingleton</span><span style="color:#F0F3F6;">(String beanName, </span><span style="color:#FF9492;">boolean</span><span style="color:#F0F3F6;"> allowEarlyReference) {</span></span>
<span class="line"><span style="color:#BDC4CC;">  // Spring首先从singletonObjects（一级缓存）中尝试获取</span></span>
<span class="line"><span style="color:#F0F3F6;">  Object</span><span style="color:#F0F3F6;"> singletonObject</span><span style="color:#FF9492;"> =</span><span style="color:#91CBFF;"> this</span><span style="color:#F0F3F6;">.singletonObjects.</span><span style="color:#DBB7FF;">get</span><span style="color:#F0F3F6;">(beanName);</span></span>
<span class="line"><span style="color:#BDC4CC;">  // 若是获取不到而且对象在建立中，则尝试从earlySingletonObjects(二级缓存)中获取</span></span>
<span class="line"><span style="color:#FF9492;">  if</span><span style="color:#F0F3F6;"> (singletonObject </span><span style="color:#FF9492;">==</span><span style="color:#91CBFF;"> null</span><span style="color:#FF9492;"> &amp;&amp;</span><span style="color:#DBB7FF;"> isSingletonCurrentlyInCreation</span><span style="color:#F0F3F6;">(beanName)) {</span></span>
<span class="line"><span style="color:#FF9492;">    synchronized</span><span style="color:#F0F3F6;"> (</span><span style="color:#91CBFF;">this</span><span style="color:#F0F3F6;">.singletonObjects) {</span></span>
<span class="line"><span style="color:#F0F3F6;">        singletonObject </span><span style="color:#FF9492;">=</span><span style="color:#91CBFF;"> this</span><span style="color:#F0F3F6;">.earlySingletonObjects.</span><span style="color:#DBB7FF;">get</span><span style="color:#F0F3F6;">(beanName);</span></span>
<span class="line"><span style="color:#FF9492;">        if</span><span style="color:#F0F3F6;"> (singletonObject </span><span style="color:#FF9492;">==</span><span style="color:#91CBFF;"> null</span><span style="color:#FF9492;"> &amp;&amp;</span><span style="color:#F0F3F6;"> allowEarlyReference) {</span></span>
<span class="line"><span style="color:#F0F3F6;">          ObjectFactory</span><span style="color:#FFB757;">&lt;</span><span style="color:#FF9492;">?</span><span style="color:#FFB757;">&gt; </span><span style="color:#F0F3F6;">singletonFactory</span><span style="color:#FF9492;"> =</span><span style="color:#91CBFF;"> this</span><span style="color:#F0F3F6;">.singletonFactories.</span><span style="color:#DBB7FF;">get</span><span style="color:#F0F3F6;">(beanName);</span></span>
<span class="line"><span style="color:#FF9492;">          if</span><span style="color:#F0F3F6;"> (singletonFactory </span><span style="color:#FF9492;">!=</span><span style="color:#91CBFF;"> null</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#BDC4CC;">            //若是仍是获取不到而且容许从singletonFactories经过getObject获取，则经过singletonFactory.getObject()(三级缓存)获取</span></span>
<span class="line"><span style="color:#F0F3F6;">              singletonObject </span><span style="color:#FF9492;">=</span><span style="color:#F0F3F6;"> singletonFactory.</span><span style="color:#DBB7FF;">getObject</span><span style="color:#F0F3F6;">();</span></span>
<span class="line"><span style="color:#BDC4CC;">              //若是获取到了则将singletonObject放入到earlySingletonObjects,也就是将三级缓存提高到二级缓存中</span></span>
<span class="line"><span style="color:#91CBFF;">              this</span><span style="color:#F0F3F6;">.earlySingletonObjects.</span><span style="color:#DBB7FF;">put</span><span style="color:#F0F3F6;">(beanName, singletonObject);</span></span>
<span class="line"><span style="color:#91CBFF;">              this</span><span style="color:#F0F3F6;">.singletonFactories.</span><span style="color:#DBB7FF;">remove</span><span style="color:#F0F3F6;">(beanName);</span></span>
<span class="line"><span style="color:#F0F3F6;">          }</span></span>
<span class="line"><span style="color:#F0F3F6;">        }</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"><span style="color:#F0F3F6;">  }</span></span>
<span class="line"><span style="color:#FF9492;">  return</span><span style="color:#F0F3F6;"> (singletonObject </span><span style="color:#FF9492;">!=</span><span style="color:#F0F3F6;"> NULL_OBJECT </span><span style="color:#FF9492;">?</span><span style="color:#F0F3F6;"> singletonObject </span><span style="color:#FF9492;">:</span><span style="color:#91CBFF;"> null</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span></code></pre></div><p>补充一些方法和参数<code>isSingletonCurrentlyInCreation()</code>：判断当前单例bean是否正在建立中，也就是没有初始化完成(好比A的构造器依赖了B对象因此得先去建立B对象， 或则在A的populateBean过程当中依赖了B对象，得先去建立B对象，这时的A就是处于建立中的状态。)allowEarlyReference ：是否容许从singletonFactories中经过getObject拿到对象分析getSingleton()的整个过程，Spring首先从一级缓存singletonObjects中获取。若是获取不到，而且对象正在建立中，就再从二级缓存earlySingletonObjects中获取。若是仍是获取不到且容许singletonFactories经过<code>getObject()</code>获取，就从三级缓存<code>singletonFactory.getObject()</code>(三级缓存)获取，若是获取到了则从三级缓存移动到了二级缓存。从上面三级缓存的分析，咱们能够知道，Spring解决循环依赖的诀窍就在于singletonFactories这个三级cache。这个cache的类型是<code>ObjectFactory</code>，定义以下：</p><div class="language-" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span>public interface ObjectFactory&lt;T&gt; {</span></span>
<span class="line"><span>T getObject() throws BeansException;</span></span>
<span class="line"><span>}</span></span></code></pre></div><p>在bean建立过程当中，有两处比较重要的匿名内部类实现了该接口。一处是Spring利用其建立bean的时候，另外一处就是:</p><div class="language-" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span>addSingletonFactory(beanName, new ObjectFactory&lt;Object&gt;() {</span></span>
<span class="line"><span>@Override   public Object getObject() throws BeansException {</span></span>
<span class="line"><span>return getEarlyBeanReference(beanName, mbd, bean);</span></span>
<span class="line"><span>}});</span></span></code></pre></div><p>此处就是解决循环依赖的关键，这段代码发生在createBeanInstance以后，也就是说单例对象此时已经被建立出来的。这个对象已经被生产出来了，虽然还不完美（尚未进行初始化的第二步和第三步），可是已经能被人认出来了（根据对象引用能定位到堆中的对象），因此Spring此时将这个对象提早曝光出来让你们认识，让你们使用。好比“A对象setter依赖B对象，B对象setter依赖A对象”，A首先完成了初始化的第一步，而且将本身提早曝光到singletonFactories中，此时进行初始化的第二步，发现本身依赖对象B，此时就尝试去get(B)，发现B尚未被create，因此走create流程，B在初始化第一步的时候发现本身依赖了对象A，因而尝试get(A)，尝试一级缓存singletonObjects(确定没有，由于A还没初始化彻底)，尝试二级缓存earlySingletonObjects（也没有），尝试三级缓存singletonFactories，因为A经过<code>ObjectFactory</code>将本身提早曝光了，因此B可以经过ObjectFactory.getObject拿到A对象(半成品)，B拿到A对象后顺利完成了初始化阶段一、二、三，彻底初始化以后将本身放入到一级缓存<code>singletonObjects</code>中。此时返回A中，A此时能拿到B的对象顺利完成本身的初始化阶段二、三，最终A也完成了初始化，进去了一级缓存singletonObjects中，并且更加幸运的是，因为B拿到了A的对象引用，因此B如今hold住的A对象完成了初始化。</p><h3 id="spring为何不能解决非单例属性之外的循环依赖" tabindex="-1"><a class="header-anchor" href="#spring为何不能解决非单例属性之外的循环依赖"><span>Spring为何不能解决非单例属性之外的循环依赖？</span></a></h3><p>Spring为什么不能解决构造器的循环依赖？构造器注入形成的循环依赖： 也就是beanB需要在beanA的构造函数中完成初始化，beanA也需要在beanB的构造函数中完成初始化，这种情况的结果就是两个bean都不能完成初始化，循环依赖难以解决。Spring解决循环依赖主要是依赖三级缓存，但是的在调用构造方法之前还未将其放入三级缓存之中，因此后续的依赖调用构造方法的时候并不能从三级缓存中获取到依赖的Bean，因此不能解决。</p><h1 id="spring为什么不能解决prototype作用域循环依赖" tabindex="-1"><a class="header-anchor" href="#spring为什么不能解决prototype作用域循环依赖"><span>Spring为什么不能解决prototype作用域循环依赖？</span></a></h1><p>这种循环依赖同样无法解决，因为spring不会缓存‘prototype’作用域的bean，而spring中循环依赖的解决正是通过缓存来实现的。</p><h1 id="spring为什么不能解决多例的循环依赖" tabindex="-1"><a class="header-anchor" href="#spring为什么不能解决多例的循环依赖"><span>Spring为什么不能解决多例的循环依赖？</span></a></h1><p>多实例Bean是每次调用一次getBean都会执行一次构造方法并且给属性赋值，根本没有三级缓存，因此不能解决循环依赖。</p><h3 id="那么其它循环依赖如何解决" tabindex="-1"><a class="header-anchor" href="#那么其它循环依赖如何解决"><span>那么其它循环依赖如何解决？</span></a></h3><p>生成代理对象产生的循环依赖这类循环依赖问题解决方法很多，主要有：使用@Lazy注解，延迟加载使用@DependsOn注解，指定加载先后关系修改文件名称，改变循环依赖类的加载顺序使用@DependsOn产生的循环依赖这类循环依赖问题要找到@DependsOn注解循环依赖的地方，迫使它不循环依赖就可以解决问题。多例循环依赖这类循环依赖问题可以通过把bean改成单例的解决。构造器循环依赖这类循环依赖问题可以通过使用@Lazy注解解决。</p><h2 id="spring中bean的生命周期" tabindex="-1"><a class="header-anchor" href="#spring中bean的生命周期"><span>Spring中Bean的生命周期</span></a></h2><p>Spring 只帮我们管理单例模式 Bean 的完整生命周期，对于 prototype 的 bean ，Spring 在创建好交给使用者之后则不会再管理后续的生命周期。Spring 容器可以管理 singleton 作用域 Bean 的生命周期，在此作用域下，Spring 能够精确地知道该 Bean 何时被创建，何时初始化完成，以及何时被销毁。而对于 prototype 作用域的 Bean，Spring 只负责创建，当容器创建了 Bean 的实例后，Bean 的实例就交给客户端代码管理，Spring 容器将不再跟踪其生命周期。每次客户端请求 prototype 作用域的 Bean 时，Spring 容器都会创建一个新的实例，并且不会管那些被配置成 prototype 作用域的 Bean 的生命周期。了解 Spring 生命周期的意义就在于，可以利用 Bean 在其存活期间的指定时刻完成一些相关操作。这种时刻可能有很多，但一般情况下，会在 Bean 被初始化后和被销毁前执行一些相关操作。</p><h3 id="spring-容器中-bean-的生命周期流程" tabindex="-1"><a class="header-anchor" href="#spring-容器中-bean-的生命周期流程"><span>Spring 容器中 Bean 的生命周期流程</span></a></h3><p>如果 BeanFactoryPostProcessor 和 Bean 关联, 则调用<code>postProcessBeanFactory</code>方法.(即首先尝试从Bean工厂中获取Bean)如果 InstantiationAwareBeanPostProcessor 和 Bean 关联，则调用postProcessBeforeInstantiation方法根据配置情况调用 Bean 构造方法实例化 Bean。利用依赖注入完成 Bean 中所有属性值的配置注入。如果 InstantiationAwareBeanPostProcessor 和 Bean 关联，则调用<code>postProcessAfterInstantiation</code>方法和<code>postProcessProperties</code>调用xxxAware接口 (上图只是给了几个例子) 第一类Aware接口如果 Bean 实现了 BeanNameAware 接口，则 Spring 调用 Bean 的 setBeanName() 方法传入当前 Bean 的 id 值。如果 Bean 实现了 BeanClassLoaderAware 接口，则 Spring 调用 setBeanClassLoader() 方法传入classLoader的引用。如果 Bean 实现了 BeanFactoryAware 接口，则 Spring 调用 <code>setBeanFactory()</code> 方法传入当前工厂实例的引用。第二类Aware接口如果 Bean 实现了 EnvironmentAware 接口，则 Spring 调用 <code>setEnvironment()</code> 方法传入当前 Environment 实例的引用。如果 Bean 实现了 EmbeddedValueResolverAware 接口，则 Spring 调用 setEmbeddedValueResolver() 方法传入当前 StringValueResolver 实例的引用。如果 Bean 实现了 ApplicationContextAware 接口，则 Spring 调用 <code>setApplicationContext()</code> 方法传入当前 ApplicationContext 实例的引用。...如果 BeanPostProcessor 和 Bean 关联，则 Spring 将调用该接口的预初始化方法 <code>postProcessBeforeInitialzation()</code> 对 Bean 进行加工操作，此处非常重要，Spring 的 AOP 就是利用它实现的。如果 Bean 实现了 InitializingBean 接口，则 Spring 将调用 afterPropertiesSet() 方法。(或者有执行<code>@PostConstruct</code>注解的方法)如果在配置文件中通过 init-method 属性指定了初始化方法，则调用该初始化方法。如果 <code>BeanPostProcessor</code> 和 Bean 关联，则 Spring 将调用该接口的初始化方法 <code>postProcessAfterInitialization()</code>。此时，Bean 已经可以被应用系统使用了。如果在 <code>&lt;bean&gt;</code> 中指定了该 Bean 的作用范围为 scope=&quot;singleton&quot;，则将该 Bean 放入 Spring IoC 的缓存池中，将触发 Spring 对该 Bean 的生命周期管理；如果在 <code>&lt;bean&gt;</code> 中指定了该 Bean 的作用范围为 <code>scope=&quot;prototype&quot;</code>，则将该 Bean 交给调用者，调用者管理该 Bean 的生命周期，Spring 不再管理该 Bean。如果 Bean 实现了 DisposableBean 接口，则 Spring 会调用 destory() 方法将 Spring 中的 Bean 销毁；(或者有执行<code>@PreDestroy</code>注解的方法)如果在配置文件中通过 <code>destory-method</code> 属性指定了 Bean 的销毁方法，则 Spring 将调用该方法对 Bean 进行销毁。Bean的完整生命周期经历了各种方法调用，这些方法可以划分为以下几类：(结合上图，需要有如下顶层思维)Bean自身的方法： 这个包括了Bean本身调用的方法和通过配置文件中<code>&lt;bean&gt;</code>的init-method和<code>destroy-method</code>指定的方法Bean级生命周期接口方法： 这个包括了<code>BeanNameAware</code>、BeanFactoryAware、ApplicationContextAware；当然也包括<code>InitializingBean</code>和<code>DiposableBean</code>这些接口的方法（可以被<code>@PostConstruct和@PreDestroy</code>注解替代)容器级生命周期接口方法： 这个包括了InstantiationAwareBeanPostProcessor 和 <code>BeanPostProcessor</code> 这两个接口实现，一般称它们的实现类为“后处理器”。工厂后处理器接口方法： 这个包括了AspectJWeavingEnabler, ConfigurationClassPostProcessor, <code>CustomAutowireConfigurer</code>等等非常有用的工厂后处理器接口的方法。工厂后处理器也是容器级的。在应用上下文装配配置文件之后立即调用。</p><h2 id="spring-bean生命周期案例" tabindex="-1"><a class="header-anchor" href="#spring-bean生命周期案例"><span>Spring Bean生命周期案例</span></a></h2><p>定义Bean（这里是User）, 并让它实现<code>BeanNameAware,BeanFactoryAware,ApplicationContextAware</code>接口和InitializingBean,DisposableBean接口：</p><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">package</span><span style="color:#F0F3F6;"> tech.pdai.springframework.entity;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> lombok.ToString;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> lombok.extern.slf4j.Slf4j;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> org.springframework.beans.BeansException;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> org.springframework.beans.factory.BeanFactory;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> org.springframework.beans.factory.BeanFactoryAware;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> org.springframework.beans.factory.BeanNameAware;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> org.springframework.beans.factory.DisposableBean;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> org.springframework.beans.factory.InitializingBean;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> org.springframework.context.ApplicationContext;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> org.springframework.context.ApplicationContextAware;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">@</span><span style="color:#FF9492;">Slf4j</span></span>
<span class="line"><span style="color:#F0F3F6;">@</span><span style="color:#FF9492;">ToString</span></span>
<span class="line"><span style="color:#FF9492;">public</span><span style="color:#FF9492;"> class</span><span style="color:#FFB757;"> User</span><span style="color:#FF9492;"> implements</span><span style="color:#91CBFF;"> BeanFactoryAware</span><span style="color:#F0F3F6;">, </span><span style="color:#91CBFF;">BeanNameAware</span><span style="color:#F0F3F6;">, </span><span style="color:#91CBFF;">ApplicationContextAware</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#91CBFF;">        InitializingBean</span><span style="color:#F0F3F6;">, </span><span style="color:#91CBFF;">DisposableBean</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"><span style="color:#BDC4CC;">    /**</span></span>
<span class="line"><span style="color:#BDC4CC;">     * user&#39;s name.</span></span>
<span class="line"><span style="color:#BDC4CC;">     */</span></span>
<span class="line"><span style="color:#FF9492;">    private</span><span style="color:#F0F3F6;"> String</span><span style="color:#F0F3F6;"> name;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;">    /**</span></span>
<span class="line"><span style="color:#BDC4CC;">     * user&#39;s age.</span></span>
<span class="line"><span style="color:#BDC4CC;">     */</span></span>
<span class="line"><span style="color:#FF9492;">    private</span><span style="color:#FF9492;"> int</span><span style="color:#F0F3F6;"> age;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;">    /**</span></span>
<span class="line"><span style="color:#BDC4CC;">     * bean factory.</span></span>
<span class="line"><span style="color:#BDC4CC;">     */</span></span>
<span class="line"><span style="color:#FF9492;">    private</span><span style="color:#F0F3F6;"> BeanFactory</span><span style="color:#F0F3F6;"> beanFactory;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;">    /**</span></span>
<span class="line"><span style="color:#BDC4CC;">     * application context.</span></span>
<span class="line"><span style="color:#BDC4CC;">     */</span></span>
<span class="line"><span style="color:#FF9492;">    private</span><span style="color:#F0F3F6;"> ApplicationContext</span><span style="color:#F0F3F6;"> applicationContext;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;">    /**</span></span>
<span class="line"><span style="color:#BDC4CC;">     * bean name.</span></span>
<span class="line"><span style="color:#BDC4CC;">     */</span></span>
<span class="line"><span style="color:#FF9492;">    private</span><span style="color:#F0F3F6;"> String</span><span style="color:#F0F3F6;"> beanName;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">    public</span><span style="color:#DBB7FF;"> User</span><span style="color:#F0F3F6;">() {</span></span>
<span class="line"><span style="color:#F0F3F6;">        log.</span><span style="color:#DBB7FF;">info</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;execute User#new User()&quot;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">    public</span><span style="color:#FF9492;"> void</span><span style="color:#DBB7FF;"> setName</span><span style="color:#F0F3F6;">(String </span><span style="color:#FFB757;">name</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#F0F3F6;">        log.</span><span style="color:#DBB7FF;">info</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;execute User#setName({})&quot;</span><span style="color:#F0F3F6;">, name);</span></span>
<span class="line"><span style="color:#91CBFF;">        this</span><span style="color:#F0F3F6;">.name </span><span style="color:#FF9492;">=</span><span style="color:#F0F3F6;"> name;</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">    public</span><span style="color:#FF9492;"> void</span><span style="color:#DBB7FF;"> setAge</span><span style="color:#F0F3F6;">(</span><span style="color:#FF9492;">int</span><span style="color:#FFB757;"> age</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#F0F3F6;">        log.</span><span style="color:#DBB7FF;">info</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;execute User#setAge({})&quot;</span><span style="color:#F0F3F6;">, age);</span></span>
<span class="line"><span style="color:#91CBFF;">        this</span><span style="color:#F0F3F6;">.age </span><span style="color:#FF9492;">=</span><span style="color:#F0F3F6;"> age;</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">    @</span><span style="color:#FF9492;">Override</span></span>
<span class="line"><span style="color:#FF9492;">    public</span><span style="color:#FF9492;"> void</span><span style="color:#DBB7FF;"> setBeanFactory</span><span style="color:#F0F3F6;">(BeanFactory </span><span style="color:#FFB757;">beanFactory</span><span style="color:#F0F3F6;">) </span><span style="color:#FF9492;">throws</span><span style="color:#F0F3F6;"> BeansException {</span></span>
<span class="line"><span style="color:#F0F3F6;">        log.</span><span style="color:#DBB7FF;">info</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;execute BeanFactoryAware#setBeanFactory&quot;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#91CBFF;">        this</span><span style="color:#F0F3F6;">.beanFactory </span><span style="color:#FF9492;">=</span><span style="color:#F0F3F6;"> beanFactory;</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">    @</span><span style="color:#FF9492;">Override</span></span>
<span class="line"><span style="color:#FF9492;">    public</span><span style="color:#FF9492;"> void</span><span style="color:#DBB7FF;"> setBeanName</span><span style="color:#F0F3F6;">(String </span><span style="color:#FFB757;">s</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#F0F3F6;">        log.</span><span style="color:#DBB7FF;">info</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;execute BeanNameAware#setBeanName&quot;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#91CBFF;">        this</span><span style="color:#F0F3F6;">.beanName </span><span style="color:#FF9492;">=</span><span style="color:#F0F3F6;"> s;</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">    @</span><span style="color:#FF9492;">Override</span></span>
<span class="line"><span style="color:#FF9492;">    public</span><span style="color:#FF9492;"> void</span><span style="color:#DBB7FF;"> setApplicationContext</span><span style="color:#F0F3F6;">(ApplicationContext </span><span style="color:#FFB757;">applicationContext</span><span style="color:#F0F3F6;">) </span><span style="color:#FF9492;">throws</span><span style="color:#F0F3F6;"> BeansException {</span></span>
<span class="line"><span style="color:#F0F3F6;">        log.</span><span style="color:#DBB7FF;">info</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;execute ApplicationContextAware#setApplicationContext&quot;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#91CBFF;">        this</span><span style="color:#F0F3F6;">.applicationContext </span><span style="color:#FF9492;">=</span><span style="color:#F0F3F6;"> applicationContext;</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">    @</span><span style="color:#FF9492;">Override</span></span>
<span class="line"><span style="color:#FF9492;">    public</span><span style="color:#FF9492;"> void</span><span style="color:#DBB7FF;"> destroy</span><span style="color:#F0F3F6;">() </span><span style="color:#FF9492;">throws</span><span style="color:#F0F3F6;"> Exception {</span></span>
<span class="line"><span style="color:#F0F3F6;">        log.</span><span style="color:#DBB7FF;">info</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;execute DisposableBean#destroy&quot;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">    @</span><span style="color:#FF9492;">Override</span></span>
<span class="line"><span style="color:#FF9492;">    public</span><span style="color:#FF9492;"> void</span><span style="color:#DBB7FF;"> afterPropertiesSet</span><span style="color:#F0F3F6;">() </span><span style="color:#FF9492;">throws</span><span style="color:#F0F3F6;"> Exception {</span></span>
<span class="line"><span style="color:#F0F3F6;">        log.</span><span style="color:#DBB7FF;">info</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;execute InitializingBean#afterPropertiesSet&quot;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">    public</span><span style="color:#FF9492;"> void</span><span style="color:#DBB7FF;"> doInit</span><span style="color:#F0F3F6;">() {</span></span>
<span class="line"><span style="color:#F0F3F6;">        log.</span><span style="color:#DBB7FF;">info</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;execute User#doInit&quot;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">    public</span><span style="color:#FF9492;"> void</span><span style="color:#DBB7FF;"> doDestroy</span><span style="color:#F0F3F6;">() {</span></span>
<span class="line"><span style="color:#F0F3F6;">        log.</span><span style="color:#DBB7FF;">info</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;execute User#doDestroy&quot;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span></code></pre></div><p>定义<code>BeanFactoryPostProcessor</code>的实现类</p><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#F0F3F6;">@</span><span style="color:#FF9492;">Slf4j</span></span>
<span class="line"><span style="color:#F0F3F6;">@</span><span style="color:#FF9492;">Component</span></span>
<span class="line"><span style="color:#FF9492;">public</span><span style="color:#FF9492;"> class</span><span style="color:#FFB757;"> MyBeanFactoryPostProcessor</span><span style="color:#FF9492;"> implements</span><span style="color:#91CBFF;"> BeanFactoryPostProcessor</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">@</span><span style="color:#FF9492;">Override</span></span>
<span class="line"><span style="color:#FF9492;">public</span><span style="color:#FF9492;"> void</span><span style="color:#DBB7FF;"> postProcessBeanFactory</span><span style="color:#F0F3F6;">(ConfigurableListableBeanFactory </span><span style="color:#FFB757;">configurableListableBeanFactory</span><span style="color:#F0F3F6;">) </span><span style="color:#FF9492;">throws</span><span style="color:#F0F3F6;"> BeansException {</span></span>
<span class="line"><span style="color:#F0F3F6;">log.</span><span style="color:#DBB7FF;">info</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;execute BeanFactoryPostProcessor#postProcessBeanFactory&quot;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span></code></pre></div><p>定义<code>InstantiationAwareBeanPostProcessor</code>的实现类</p><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#F0F3F6;">@</span><span style="color:#FF9492;">Slf4j</span></span>
<span class="line"><span style="color:#F0F3F6;">@</span><span style="color:#FF9492;">Component</span></span>
<span class="line"><span style="color:#FF9492;">public</span><span style="color:#FF9492;"> class</span><span style="color:#FFB757;"> MyInstantiationAwareBeanPostProcessor</span><span style="color:#FF9492;"> implements</span><span style="color:#91CBFF;"> InstantiationAwareBeanPostProcessor</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"><span style="color:#F0F3F6;">@</span><span style="color:#FF9492;">Override</span></span>
<span class="line"><span style="color:#FF9492;">public</span><span style="color:#F0F3F6;"> Object </span><span style="color:#DBB7FF;">postProcessBeforeInstantiation</span><span style="color:#F0F3F6;">(Class&lt;</span><span style="color:#FF9492;">?</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#FFB757;">beanClass</span><span style="color:#F0F3F6;">, String </span><span style="color:#FFB757;">beanName</span><span style="color:#F0F3F6;">) </span><span style="color:#FF9492;">throws</span><span style="color:#F0F3F6;"> BeansException {</span></span>
<span class="line"><span style="color:#F0F3F6;">log.</span><span style="color:#DBB7FF;">info</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;execute InstantiationAwareBeanPostProcessor#postProcessBeforeInstantiation for {}&quot;</span><span style="color:#F0F3F6;">, beanName);</span></span>
<span class="line"><span style="color:#FF9492;">return</span><span style="color:#F0F3F6;"> InstantiationAwareBeanPostProcessor.super.</span><span style="color:#DBB7FF;">postProcessBeforeInstantiation</span><span style="color:#F0F3F6;">(beanClass, beanName);</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">@</span><span style="color:#FF9492;">Override</span></span>
<span class="line"><span style="color:#FF9492;">public</span><span style="color:#FF9492;"> boolean</span><span style="color:#DBB7FF;"> postProcessAfterInstantiation</span><span style="color:#F0F3F6;">(Object </span><span style="color:#FFB757;">bean</span><span style="color:#F0F3F6;">, String </span><span style="color:#FFB757;">beanName</span><span style="color:#F0F3F6;">) </span><span style="color:#FF9492;">throws</span><span style="color:#F0F3F6;"> BeansException {</span></span>
<span class="line"><span style="color:#F0F3F6;">log.</span><span style="color:#DBB7FF;">info</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;execute InstantiationAwareBeanPostProcessor#postProcessAfterInstantiation for {}&quot;</span><span style="color:#F0F3F6;">, beanName);</span></span>
<span class="line"><span style="color:#FF9492;">return</span><span style="color:#F0F3F6;"> InstantiationAwareBeanPostProcessor.super.</span><span style="color:#DBB7FF;">postProcessAfterInstantiation</span><span style="color:#F0F3F6;">(bean, beanName);</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">@</span><span style="color:#FF9492;">Override</span></span>
<span class="line"><span style="color:#FF9492;">public</span><span style="color:#F0F3F6;"> PropertyValues </span><span style="color:#DBB7FF;">postProcessProperties</span><span style="color:#F0F3F6;">(PropertyValues </span><span style="color:#FFB757;">pvs</span><span style="color:#F0F3F6;">, Object </span><span style="color:#FFB757;">bean</span><span style="color:#F0F3F6;">, String </span><span style="color:#FFB757;">beanName</span><span style="color:#F0F3F6;">) </span><span style="color:#FF9492;">throws</span><span style="color:#F0F3F6;"> BeansException {</span></span>
<span class="line"><span style="color:#F0F3F6;">log.</span><span style="color:#DBB7FF;">info</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;execute InstantiationAwareBeanPostProcessor#postProcessProperties for {}&quot;</span><span style="color:#F0F3F6;">, beanName);</span></span>
<span class="line"><span style="color:#FF9492;">return</span><span style="color:#F0F3F6;"> InstantiationAwareBeanPostProcessor.super.</span><span style="color:#DBB7FF;">postProcessProperties</span><span style="color:#F0F3F6;">(pvs, bean, beanName);</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span></code></pre></div><p>定义BeanPostProcessor的实现类</p><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#F0F3F6;">@</span><span style="color:#FF9492;">Slf4j</span></span>
<span class="line"><span style="color:#F0F3F6;">@</span><span style="color:#FF9492;">Component</span></span>
<span class="line"><span style="color:#FF9492;">public</span><span style="color:#FF9492;"> class</span><span style="color:#FFB757;"> MyBeanPostProcessor</span><span style="color:#FF9492;"> implements</span><span style="color:#91CBFF;"> BeanPostProcessor</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">@</span><span style="color:#FF9492;">Override</span></span>
<span class="line"><span style="color:#FF9492;">public</span><span style="color:#F0F3F6;"> Object </span><span style="color:#DBB7FF;">postProcessBeforeInitialization</span><span style="color:#F0F3F6;">(Object </span><span style="color:#FFB757;">bean</span><span style="color:#F0F3F6;">, String </span><span style="color:#FFB757;">beanName</span><span style="color:#F0F3F6;">) </span><span style="color:#FF9492;">throws</span><span style="color:#F0F3F6;"> BeansException {</span></span>
<span class="line"><span style="color:#F0F3F6;">log.</span><span style="color:#DBB7FF;">info</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;execute BeanPostProcessor#postProcessBeforeInitialization for {}&quot;</span><span style="color:#F0F3F6;">, beanName);</span></span>
<span class="line"><span style="color:#FF9492;">return</span><span style="color:#F0F3F6;"> BeanPostProcessor.super.</span><span style="color:#DBB7FF;">postProcessBeforeInitialization</span><span style="color:#F0F3F6;">(bean, beanName);</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">@</span><span style="color:#FF9492;">Override</span></span>
<span class="line"><span style="color:#FF9492;">public</span><span style="color:#F0F3F6;"> Object </span><span style="color:#DBB7FF;">postProcessAfterInitialization</span><span style="color:#F0F3F6;">(Object </span><span style="color:#FFB757;">bean</span><span style="color:#F0F3F6;">, String </span><span style="color:#FFB757;">beanName</span><span style="color:#F0F3F6;">) </span><span style="color:#FF9492;">throws</span><span style="color:#F0F3F6;"> BeansException {</span></span>
<span class="line"><span style="color:#F0F3F6;">log.</span><span style="color:#DBB7FF;">info</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;execute BeanPostProcessor#postProcessAfterInitialization for {}&quot;</span><span style="color:#F0F3F6;">, beanName);</span></span>
<span class="line"><span style="color:#FF9492;">return</span><span style="color:#F0F3F6;"> BeanPostProcessor.super.</span><span style="color:#DBB7FF;">postProcessAfterInitialization</span><span style="color:#F0F3F6;">(bean, beanName);</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span></code></pre></div><p>通过Java配置方式初始化Bean</p><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#F0F3F6;">@</span><span style="color:#FF9492;">Configuration</span></span>
<span class="line"><span style="color:#FF9492;">public</span><span style="color:#FF9492;"> class</span><span style="color:#FFB757;"> BeansConfig</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">	@</span><span style="color:#FF9492;">Bean</span><span style="color:#F0F3F6;">(</span><span style="color:#91CBFF;">name</span><span style="color:#FF9492;"> =</span><span style="color:#ADDCFF;"> &quot;user&quot;</span><span style="color:#F0F3F6;">, </span><span style="color:#91CBFF;">initMethod</span><span style="color:#FF9492;"> =</span><span style="color:#ADDCFF;"> &quot;doInit&quot;</span><span style="color:#F0F3F6;">, </span><span style="color:#91CBFF;">destroyMethod</span><span style="color:#FF9492;"> =</span><span style="color:#ADDCFF;"> &quot;doDestroy&quot;</span><span style="color:#F0F3F6;">)</span></span>
<span class="line"><span style="color:#FF9492;">	public</span><span style="color:#F0F3F6;"> User </span><span style="color:#DBB7FF;">create</span><span style="color:#F0F3F6;">() {</span></span>
<span class="line"><span style="color:#F0F3F6;">	User</span><span style="color:#F0F3F6;"> user</span><span style="color:#FF9492;"> =</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> User</span><span style="color:#F0F3F6;">();</span></span>
<span class="line"><span style="color:#F0F3F6;">	user.</span><span style="color:#DBB7FF;">setName</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;pdai&quot;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#F0F3F6;">	user.</span><span style="color:#DBB7FF;">setAge</span><span style="color:#F0F3F6;">(</span><span style="color:#91CBFF;">18</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#FF9492;">	return</span><span style="color:#F0F3F6;"> user;</span></span>
<span class="line"><span style="color:#F0F3F6;">	}</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span></code></pre></div><p>测试的主方法</p><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#F0F3F6;">@</span><span style="color:#FF9492;">Slf4j</span></span>
<span class="line"><span style="color:#FF9492;">public</span><span style="color:#FF9492;"> class</span><span style="color:#FFB757;"> App</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"><span style="color:#FF9492;">	public</span><span style="color:#FF9492;"> static</span><span style="color:#FF9492;"> void</span><span style="color:#DBB7FF;"> main</span><span style="color:#F0F3F6;">(</span><span style="color:#FF9492;">String</span><span style="color:#F0F3F6;">[] </span><span style="color:#FFB757;">args</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#F0F3F6;">	log.</span><span style="color:#DBB7FF;">info</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;Init application context&quot;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#BDC4CC;">	// create and configure beans</span></span>
<span class="line"><span style="color:#F0F3F6;">	AnnotationConfigApplicationContext</span><span style="color:#F0F3F6;"> context</span><span style="color:#FF9492;"> =</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> AnnotationConfigApplicationContext</span><span style="color:#F0F3F6;">(</span></span>
<span class="line"><span style="color:#ADDCFF;">	&quot;tech.pdai.springframework&quot;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;">	// retrieve configured instance</span></span>
<span class="line"><span style="color:#F0F3F6;">	User</span><span style="color:#F0F3F6;"> user</span><span style="color:#FF9492;"> =</span><span style="color:#F0F3F6;"> (User) context.</span><span style="color:#DBB7FF;">getBean</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;user&quot;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;">	// print info from beans</span></span>
<span class="line"><span style="color:#F0F3F6;">	log.</span><span style="color:#DBB7FF;">info</span><span style="color:#F0F3F6;">(user.</span><span style="color:#DBB7FF;">toString</span><span style="color:#F0F3F6;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">	log.</span><span style="color:#DBB7FF;">info</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;Shutdown application context&quot;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#F0F3F6;">	context.</span><span style="color:#DBB7FF;">registerShutdownHook</span><span style="color:#F0F3F6;">();</span></span>
<span class="line"><span style="color:#F0F3F6;">	}</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span></code></pre></div><p>输出结果（剔除无关输出）：</p><div class="language-" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span>12:44:42.547 [main] INFO tech.pdai.springframework.App - Init application context</span></span>
<span class="line"><span>...</span></span>
<span class="line"><span>12:44:43.134 [main] INFO tech.pdai.springframework.processor.MyBeanFactoryPostProcessor - execute BeanFactoryPostProcessor#postProcessBeanFactory</span></span>
<span class="line"><span>...</span></span>
<span class="line"><span>12:44:43.216 [main] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Creating shared instance of singleton bean &#39;user&#39;</span></span>
<span class="line"><span>12:44:43.216 [main] INFO tech.pdai.springframework.processor.MyInstantiationAwareBeanPostProcessor - execute InstantiationAwareBeanPostProcessor#postProcessBeforeInstantiation for user</span></span>
<span class="line"><span>12:44:43.236 [main] INFO tech.pdai.springframework.entity.User - execute User#new User()</span></span>
<span class="line"><span>12:44:43.237 [main] INFO tech.pdai.springframework.entity.User - execute User#setName(pdai)</span></span>
<span class="line"><span>12:44:43.237 [main] INFO tech.pdai.springframework.entity.User - execute User#setAge(18)</span></span>
<span class="line"><span>12:44:43.237 [main] INFO tech.pdai.springframework.processor.MyInstantiationAwareBeanPostProcessor - execute InstantiationAwareBeanPostProcessor#postProcessAfterInstantiation for user</span></span>
<span class="line"><span>12:44:43.237 [main] INFO tech.pdai.springframework.processor.MyInstantiationAwareBeanPostProcessor - execute InstantiationAwareBeanPostProcessor#postProcessProperties for user</span></span>
<span class="line"><span>12:44:43.242 [main] INFO tech.pdai.springframework.entity.User - execute BeanNameAware#setBeanName</span></span>
<span class="line"><span>12:44:43.242 [main] INFO tech.pdai.springframework.entity.User - execute BeanFactoryAware#setBeanFactory</span></span>
<span class="line"><span>12:44:43.242 [main] INFO tech.pdai.springframework.entity.User - execute ApplicationContextAware#setApplicationContext</span></span>
<span class="line"><span>12:44:43.242 [main] INFO tech.pdai.springframework.processor.MyBeanPostProcessor - execute BeanPostProcessor#postProcessBeforeInitialization for user</span></span>
<span class="line"><span>12:44:43.242 [main] INFO tech.pdai.springframework.entity.User - execute InitializingBean#afterPropertiesSet</span></span>
<span class="line"><span>12:44:43.243 [main] INFO tech.pdai.springframework.entity.User - execute User#doInit</span></span>
<span class="line"><span>12:44:43.243 [main] INFO tech.pdai.springframework.processor.MyBeanPostProcessor - execute BeanPostProcessor#postProcessAfterInitialization for user</span></span>
<span class="line"><span>12:44:43.270 [main] INFO tech.pdai.springframework.App - User(name=pdai, age=18)</span></span>
<span class="line"><span>12:44:43.270 [main] INFO tech.pdai.springframework.App - Shutdown application context</span></span>
<span class="line"><span>12:44:43.276 [SpringContextShutdownHook] INFO tech.pdai.springframework.entity.User - execute DisposableBean#destroy</span></span>
<span class="line"><span>12:44:43.276 [SpringContextShutdownHook] INFO tech.pdai.springframework.entity.User - execute User#doDestroy</span></span></code></pre></div></div><!----><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">上次编辑于: </span><span class="vp-meta-info" data-allow-mismatch="text">2025/4/27 02:39:10</span></div><div class="contributors"><span class="vp-meta-label">贡献者: </span><!--[--><!--[--><span class="vp-meta-info" title="email: 592786982@qq.com">WSQ</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/wsq-blog/java/Spring/Spring%E8%AF%A6%E8%A7%A3%E2%80%94IOC%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E4%B9%8BIOC%E5%88%9D%E5%A7%8B%E5%8C%96%E6%B5%81%E7%A8%8B.html" aria-label="/java/Spring/Spring%E8%AF%A6%E8%A7%A3%E2%80%94IOC%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E4%B9%8BIOC%E5%88%9D%E5%A7%8B%E5%8C%96%E6%B5%81%E7%A8%8B.html"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><!---->/java/Spring/Spring%E8%AF%A6%E8%A7%A3%E2%80%94IOC%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E4%B9%8BIOC%E5%88%9D%E5%A7%8B%E5%8C%96%E6%B5%81%E7%A8%8B.html</div></a><a class="route-link auto-link next" href="/wsq-blog/java/Spring/Spring%E8%AF%A6%E8%A7%A3%E2%80%94Spring%E5%92%8CSpring%E6%A1%86%E6%9E%B6%E7%BB%84%E6%88%90.html" aria-label="什么是Spring?"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">什么是Spring?<!----></div></a></nav><div id="comment" class="giscus-wrapper input-top vp-comment" vp-comment style="display:none;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!----><!--]--></main><!--]--><!----></div><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/wsq-blog/assets/app-ByvFWdWZ.js" defer></script>
  </body>
</html>
