import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,d as o,o as p}from"./app-CRBxQhNH.js";const l={};function e(t,s){return p(),n("div",null,s[0]||(s[0]=[o(`<p>URL Pattern API 基于正则表达式和通配符，对<code>URL</code>进行匹配和解析。</p><p>它提供一个构造函数<code>URLPattern()</code>，用于新建一个<code>URL</code>模式实例。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">const</span><span style="color:#91CBFF;"> pattern</span><span style="color:#FF9492;"> =</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">(input);</span></span></code></pre></div><p>有了模式实例，就可以知道某个<code>URL</code>是否符合该模式。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">const</span><span style="color:#91CBFF;"> pattern</span><span style="color:#FF9492;"> =</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">({ pathname: </span><span style="color:#ADDCFF;">&quot;/books&quot;</span><span style="color:#F0F3F6;"> });</span></span>
<span class="line"><span style="color:#F0F3F6;">console.</span><span style="color:#DBB7FF;">log</span><span style="color:#F0F3F6;">(pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://example.com/books&quot;</span><span style="color:#F0F3F6;">)); </span><span style="color:#BDC4CC;">// true</span></span></code></pre></div><p>上面示例中，模式实例是 包含<code>/books</code>路径的<code>URL</code>，实例方法<code>test()</code>用来检测指定网址是否符合该模式，结果为<code>true</code>。</p><p>URL Pattern 支持多种协议，不仅是 HTTP 协议。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">const</span><span style="color:#91CBFF;"> pattern</span><span style="color:#FF9492;"> =</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;data</span><span style="color:#FF9492;">\\\\</span><span style="color:#ADDCFF;">:foo*&quot;</span><span style="color:#F0F3F6;">);</span></span></code></pre></div><p>上面示例中，URL Pattern 新建了一个<code>Data</code>协议的模式。</p><h2 id="构造函数-urlpattern" tabindex="-1"><a class="header-anchor" href="#构造函数-urlpattern"><span>构造函数 URLPattern()</span></a></h2><h3 id="基本用法" tabindex="-1"><a class="header-anchor" href="#基本用法"><span>基本用法</span></a></h3><p>构造函数<code>URLPattern()</code>用于新建一个<code>URL</code>模式实例。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">const</span><span style="color:#91CBFF;"> pattern</span><span style="color:#FF9492;"> =</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">(input)</span></span></code></pre></div><p>该构造函数的参数<code>input</code>是一个模式字符串或者模式对象。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://example.com/books/:id&quot;</span><span style="color:#F0F3F6;">)</span></span>
<span class="line"><span style="color:#BDC4CC;">// {</span></span>
<span class="line"><span style="color:#BDC4CC;">//   hasRegExpGroups: false,</span></span>
<span class="line"><span style="color:#BDC4CC;">//   hash: &quot;*&quot;,</span></span>
<span class="line"><span style="color:#BDC4CC;">//   hostname: &quot;example.com&quot;,</span></span>
<span class="line"><span style="color:#BDC4CC;">//   password: &quot;*&quot;,</span></span>
<span class="line"><span style="color:#BDC4CC;">//   pathname: &quot;/books/:id&quot;,</span></span>
<span class="line"><span style="color:#BDC4CC;">//   port: &quot;&quot;,</span></span>
<span class="line"><span style="color:#BDC4CC;">//   protocol: &quot;https&quot;,</span></span>
<span class="line"><span style="color:#BDC4CC;">//   search: &quot;*&quot;,</span></span>
<span class="line"><span style="color:#BDC4CC;">//   username: &quot;*&quot;,</span></span>
<span class="line"><span style="color:#BDC4CC;">//   ...</span></span>
<span class="line"><span style="color:#BDC4CC;">// }</span></span></code></pre></div><p>上面示例中，参数<code>https://example.com/books/:id</code>就是一个模式字符串，执行后返回一个<code>URLPattern</code>实例对象，包含模式的各个组成部分。</p><p>参数<code>input</code>也可以写成一个对象，用属性指定模式<code>URL</code>的每个部分。也就是说，模式对象可以有以下属性。</p><ul><li><code>protocol</code></li><li><code>username</code></li><li><code>password</code></li><li><code>hostname</code></li><li><code>port</code></li><li><code>pathname</code></li><li><code>search</code></li><li><code>hash</code></li><li><code>baseURL</code></li></ul><p>上面的示例，如果参数改成模式对象，就是下面这样。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">({</span></span>
<span class="line"><span style="color:#F0F3F6;">  protocol: </span><span style="color:#ADDCFF;">&#39;https&#39;</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#F0F3F6;">  hostname: </span><span style="color:#ADDCFF;">&#39;example.com&#39;</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#F0F3F6;">  pathname: </span><span style="color:#ADDCFF;">&#39;/books/:id&#39;</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#F0F3F6;">})</span></span></code></pre></div><p>模式字符串或者模式对象之中，没有定义的部分，默认为<code>*</code>，表示所有可能的字符，包括零字符的情况。</p><p><code>URLPattern()</code>正常情况下将返回一个<code>URLPattern</code>实例对象，但是遇到参数无效或语法不正确，则会报错。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">(</span><span style="color:#91CBFF;">123</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// 报错</span></span></code></pre></div><p>上面示例中，参数 123 不是一个有效的<code>URL</code>模式，就报错了。</p><p>需要注意的是，如果模式字符串为相对路径，那么<code>URLPattern()</code>还需要第二个参数，用来指定基准<code>URL</code>。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">(input, baseURL)</span></span></code></pre></div><p>上面代码中，第二个参数<code>baseURL</code>就是基准<code>URL</code>。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&#39;/books/:id&#39;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// 报错</span></span>
<span class="line"><span style="color:#FF9492;">new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&#39;/books/:id&#39;</span><span style="color:#F0F3F6;">, </span><span style="color:#ADDCFF;">&#39;https://example.com&#39;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// 正确</span></span></code></pre></div><p>上面示例中，第一个参数<code>/books/:id</code>是一个相对路径，这时就需要第二个参数<code>https://example.com</code>，用来指定基准<code>URL</code>，否则报错。</p><p>但是，如果参数为模式对象，则可以只指定<code>URL</code>模式的某个部分。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">({</span></span>
<span class="line"><span style="color:#F0F3F6;">  pathname: </span><span style="color:#ADDCFF;">&#39;/books/:id&#39;</span></span>
<span class="line"><span style="color:#F0F3F6;">}) </span><span style="color:#BDC4CC;">// 正确</span></span></code></pre></div><p>上面示例中，参数是一个模式对象，那么参数允许只指定<code>URL</code>的部分模式。</p><p>模式对象里面，也可以指定基准<code>URL</code>。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">let</span><span style="color:#F0F3F6;"> pattern4 </span><span style="color:#FF9492;">=</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">({</span></span>
<span class="line"><span style="color:#F0F3F6;">  pathname: </span><span style="color:#ADDCFF;">&quot;/books/:id&quot;</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#F0F3F6;">  baseURL: </span><span style="color:#ADDCFF;">&quot;https://example.com&quot;</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#F0F3F6;">});</span></span></code></pre></div><p>基准<code>URL</code>必须是合法的<code>URL</code>，不能包含模式。</p><p>注意，如果用了模式对象，就不能使用基准<code>URL</code>作为第二个参数，这样会报错。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">({ pathname: </span><span style="color:#ADDCFF;">&quot;/foo/bar&quot;</span><span style="color:#F0F3F6;"> }, </span><span style="color:#ADDCFF;">&quot;https://example.com&quot;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// 报错</span></span>
<span class="line"><span style="color:#FF9492;">new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">({ pathname: </span><span style="color:#ADDCFF;">&quot;/foo/bar&quot;</span><span style="color:#F0F3F6;"> }, </span><span style="color:#ADDCFF;">&quot;https://example.com/baz&quot;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// 报错</span></span></code></pre></div><p>上面示例中，同时使用了模式对象和第二个参数，结果就报错了。</p><p><code>URLpattern()</code>还可以加入配置对象参数，用于定制匹配行为。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">(input, options)</span></span>
<span class="line"><span style="color:#FF9492;">new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">(input, baseURL, options)</span></span></code></pre></div><p>上面代码中，参数<code>options</code>就是一个配置对象。</p><p>目前，这个配置对象<code>options</code>只有<code>ignoreCase</code>一个属性，如果设为<code>true</code>，将不区分大小写，默认值为<code>false</code>，表示区分大小写。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">(input, {</span></span>
<span class="line"><span style="color:#F0F3F6;">  ignoreCase: </span><span style="color:#91CBFF;">false</span><span style="color:#BDC4CC;"> // 默认值，区分大小写</span></span>
<span class="line"><span style="color:#F0F3F6;">})</span></span></code></pre></div><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">const</span><span style="color:#91CBFF;"> pattern</span><span style="color:#FF9492;"> =</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://example.com/2022/feb/*&quot;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://example.com/2022/feb/xc44rsz&quot;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// true</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://example.com/2022/Feb/xc44rsz&quot;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// false</span></span></code></pre></div><p>上面示例，默认匹配时，会区分<code>feb</code>和<code>Feb</code>。</p><p>我们可以用<code>ignoreCase</code>将其关闭。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">const</span><span style="color:#91CBFF;"> pattern</span><span style="color:#FF9492;"> =</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">(</span></span>
<span class="line"><span style="color:#ADDCFF;">  &quot;https://example.com/2022/feb/*&quot;</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#F0F3F6;">  {  ignoreCase: </span><span style="color:#91CBFF;">true</span><span style="color:#F0F3F6;">, }</span></span>
<span class="line"><span style="color:#F0F3F6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://example.com/2022/feb/xc44rsz&quot;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// true</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://example.com/2022/Feb/xc44rsz&quot;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// true</span></span></code></pre></div><h3 id="模式写法" tabindex="-1"><a class="header-anchor" href="#模式写法"><span>模式写法</span></a></h3><p>模式字符串基本上采用正则表达式的写法，但是不是所有的正则语法都支持，比如先行断言和后行断言就不支持。</p><h4 id="普通字符" tabindex="-1"><a class="header-anchor" href="#普通字符"><span>普通字符</span></a></h4><p>如果都是普通字符，就表示原样匹配。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">const</span><span style="color:#91CBFF;"> p</span><span style="color:#FF9492;"> =</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&#39;https://example.com/abc&#39;</span><span style="color:#F0F3F6;">);</span></span></code></pre></div><p>上面代码就表示确切匹配路径<code>https://example.com/abc</code>。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#F0F3F6;">p.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&#39;https://example.com&#39;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// false</span></span>
<span class="line"><span style="color:#F0F3F6;">p.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&#39;https://example.com/a&#39;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">//false</span></span>
<span class="line"><span style="color:#F0F3F6;">p.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&#39;https://example.com/abc&#39;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// true</span></span>
<span class="line"><span style="color:#F0F3F6;">p.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&#39;https://example.com/abcd&#39;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">//false</span></span>
<span class="line"><span style="color:#F0F3F6;">p.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&#39;https://example.com/abc/&#39;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">//false</span></span>
<span class="line"><span style="color:#F0F3F6;">p.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&#39;https://example.com/abc?123&#39;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">//true</span></span></code></pre></div><p>上面示例中，<code>URL</code>必须严格匹配路径<code>https://example.com/abc</code>，即使尾部多一个斜杠都不行，但是加上查询字符串是可以的。</p><h4 id="" tabindex="-1"><a class="header-anchor" href="#"><span>?</span></a></h4><p>量词字符<code>?</code>表示前面的字符串，可以出现 0 次或 1 次，即该部分可选。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">let</span><span style="color:#F0F3F6;"> pattern </span><span style="color:#FF9492;">=</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">({</span></span>
<span class="line"><span style="color:#F0F3F6;">  protocol: </span><span style="color:#ADDCFF;">&quot;http{s}?&quot;</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#F0F3F6;">});</span></span></code></pre></div><p>上面示例中，<code>{s}?</code>表示字符组<code>s</code>可以出现 0 次或 1 次。</p><p><code>?</code>不包括路径的分隔符<code>/</code>。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">const</span><span style="color:#91CBFF;"> pattern</span><span style="color:#FF9492;"> =</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;/books/:id?&quot;</span><span style="color:#F0F3F6;">, </span><span style="color:#ADDCFF;">&quot;https://example.com&quot;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://example.com/books/123&quot;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// true</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://example.com/books&quot;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// true</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://example.com/books/&quot;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// false</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://example.com/books/123/456&quot;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// false</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://example.com/books/123/456/789&quot;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// false</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://example.com/books/123/456/&quot;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// false</span></span></code></pre></div><p>上面示例中，<code>?</code>不能匹配网址结尾的斜杠。</p><p>如果一定要匹配，可以把结尾的斜杠放在<code>{}</code>里面。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">const</span><span style="color:#91CBFF;"> pattern</span><span style="color:#FF9492;"> =</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">({ pathname: </span><span style="color:#ADDCFF;">&quot;/product{/}?&quot;</span><span style="color:#F0F3F6;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">({ pathname: </span><span style="color:#ADDCFF;">&quot;/product&quot;</span><span style="color:#F0F3F6;"> }) </span><span style="color:#BDC4CC;">// true</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">({ pathname: </span><span style="color:#ADDCFF;">&quot;/product/&quot;</span><span style="color:#F0F3F6;"> }) </span><span style="color:#BDC4CC;">// true</span></span></code></pre></div><p>上面示例中，不管网址有没有结尾的斜杠，<code>{/}?</code>都会成功匹配。</p><h4 id="-1" tabindex="-1"><a class="header-anchor" href="#-1"><span>+</span></a></h4><p>量词字符<code>+</code>表示前面的字符串出现 1 次或多次。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">const</span><span style="color:#91CBFF;"> pattern</span><span style="color:#FF9492;"> =</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">({</span></span>
<span class="line"><span style="color:#F0F3F6;">  pathname: </span><span style="color:#ADDCFF;">&quot;/books/(</span><span style="color:#FF9492;">\\\\</span><span style="color:#ADDCFF;">d+)&quot;</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#F0F3F6;">})</span></span></code></pre></div><p>上面示例中，<code>\\\\d+</code>表示 1 个或多个数字，其中的<code>\\d</code>是一个内置的字符类，表示 0-9 的数字，因为放在双引号里面，所以反斜杠前面还要再加一个反斜杠进行转义。</p><p><code>+</code>可以包括<code>/</code>分隔的路径的多个部分，但不包括路径结尾的斜杠。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">const</span><span style="color:#91CBFF;"> pattern</span><span style="color:#FF9492;"> =</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;/books/:id+&quot;</span><span style="color:#F0F3F6;">, </span><span style="color:#ADDCFF;">&quot;https://example.com&quot;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://example.com/books/123&quot;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// true</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://example.com/books&quot;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// false</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://example.com/books/&quot;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// false</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://example.com/books/123/456&quot;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// true</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://example.com/books/123/456/789&quot;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// true</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://example.com/books/123/456/&quot;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// false</span></span></code></pre></div><h4 id="-2" tabindex="-1"><a class="header-anchor" href="#-2"><span>*</span></a></h4><p>量词字符<code>*</code>表示出现零次或多次。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">const</span><span style="color:#91CBFF;"> pattern</span><span style="color:#FF9492;"> =</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&#39;https://example.com/{abc}*&#39;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&#39;https://example.com&#39;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// true</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&#39;https://example.com/&#39;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// true</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&#39;https://example.com/abc&#39;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// true</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&#39;https://example.com/abc/&#39;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// false</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&#39;https://example.com/ab&#39;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// false</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&#39;https://example.com/abcabc&#39;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// true</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&#39;https://example.com/abc/abc/abc&#39;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// false</span></span></code></pre></div><p>上面示例中，<code>{abc}*</code>表示<code>abc</code>出现零次或多次，也不包括路径分隔符<code>/</code>。</p><p>如果<code>*</code>前面没有任何字符，就表示所有字符，包括零字符的情况，也包括分隔符<code>/</code>。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">let</span><span style="color:#F0F3F6;"> pattern </span><span style="color:#FF9492;">=</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">({</span></span>
<span class="line"><span style="color:#F0F3F6;">  search: </span><span style="color:#ADDCFF;">&quot;*&quot;</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#F0F3F6;">  hash: </span><span style="color:#ADDCFF;">&quot;*&quot;</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#F0F3F6;">});</span></span></code></pre></div><p>上面示例中，<code>*</code>表示匹配所有字符，包括零字符。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">const</span><span style="color:#91CBFF;"> pattern</span><span style="color:#FF9492;"> =</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;/*.png&quot;</span><span style="color:#F0F3F6;">, </span><span style="color:#ADDCFF;">&quot;https://example.com&quot;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://example.com/image.png&quot;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// true</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://example.com/image.png/123&quot;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// false</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://example.com/folder/image.png&quot;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// true</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://example.com/.png&quot;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// true</span></span></code></pre></div><p><code>*</code>匹配的部分可以从对应部分的数字属性上获取。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">const</span><span style="color:#91CBFF;"> pattern</span><span style="color:#FF9492;"> =</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">({</span></span>
<span class="line"><span style="color:#F0F3F6;">  hostname: </span><span style="color:#ADDCFF;">&quot;example.com&quot;</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#F0F3F6;">  pathname: </span><span style="color:#ADDCFF;">&quot;/foo/*&quot;</span></span>
<span class="line"><span style="color:#F0F3F6;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">const</span><span style="color:#91CBFF;"> result</span><span style="color:#FF9492;"> =</span><span style="color:#F0F3F6;"> pattern.</span><span style="color:#DBB7FF;">exec</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;/foo/bar&quot;</span><span style="color:#F0F3F6;">, </span><span style="color:#ADDCFF;">&quot;https://example.com/baz&quot;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">result.pathname.input </span><span style="color:#BDC4CC;">// &#39;/foo/bar&#39;</span></span>
<span class="line"><span style="color:#F0F3F6;">result.pathname.groups[</span><span style="color:#91CBFF;">0</span><span style="color:#F0F3F6;">] </span><span style="color:#BDC4CC;">// &#39;bar&#39;</span></span></code></pre></div><p>上面示例中，<code>*</code>的匹配结果可以从<code>pathname.groups[0]</code>获取。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">const</span><span style="color:#91CBFF;"> pattern</span><span style="color:#FF9492;"> =</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">({ hostname: </span><span style="color:#ADDCFF;">&quot;*.example.com&quot;</span><span style="color:#F0F3F6;"> });</span></span>
<span class="line"><span style="color:#FF9492;">const</span><span style="color:#91CBFF;"> result</span><span style="color:#FF9492;"> =</span><span style="color:#F0F3F6;"> pattern.</span><span style="color:#DBB7FF;">exec</span><span style="color:#F0F3F6;">({ hostname: </span><span style="color:#ADDCFF;">&quot;cdn.example.com&quot;</span><span style="color:#F0F3F6;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">result.hostname.groups[</span><span style="color:#91CBFF;">0</span><span style="color:#F0F3F6;">] </span><span style="color:#BDC4CC;">// &#39;cdn&#39;</span></span>
<span class="line"><span style="color:#F0F3F6;">result.hostname.input </span><span style="color:#BDC4CC;">// &#39;cdn.example.com&#39;</span></span></code></pre></div><p>上面示例中，<code>*</code>的匹配结果可以从<code>hostname.groups[0]</code>获取。</p><h4 id="-3" tabindex="-1"><a class="header-anchor" href="#-3"><span>{}</span></a></h4><p>特殊字符<code>{}</code>用来定义量词<code>?、+、+</code>的生效范围。</p><p>如果<code>{}</code>后面没有量词，那就跟没有使用的效果一样。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">const</span><span style="color:#91CBFF;"> pattern</span><span style="color:#FF9492;"> =</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&#39;https://example.com/{abc}&#39;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&#39;https://example.com/&#39;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// false</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&#39;https://example.com/abc&#39;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// true</span></span></code></pre></div><h4 id="-4" tabindex="-1"><a class="header-anchor" href="#-4"><span>()</span></a></h4><p>特殊字符<code>()</code>用来定义一个组匹配，匹配结果可以按照出现顺序的编号，从<code>pathname.groups</code>对象上获取。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">const</span><span style="color:#91CBFF;"> pattern</span><span style="color:#FF9492;"> =</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;/books/(</span><span style="color:#FF9492;">\\\\</span><span style="color:#ADDCFF;">d+)&quot;</span><span style="color:#F0F3F6;">, </span><span style="color:#ADDCFF;">&quot;https://example.com&quot;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">exec</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://example.com/books/123&quot;</span><span style="color:#F0F3F6;">).pathname.groups</span></span>
<span class="line"><span style="color:#BDC4CC;">// { &#39;0&#39;: &#39;123&#39; }</span></span></code></pre></div><p>上面示例中，<code>(\\\\d+)</code>是一个组匹配，因为它是第一个组匹配，所以匹配结果放在<code>pathname.groups</code>的属性 0。</p><h4 id="-5" tabindex="-1"><a class="header-anchor" href="#-5"><span>|</span></a></h4><p>特殊字符<code>|</code>表示左右两侧的字符，都可以出现，即表示逻辑<code>OR</code>。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">let</span><span style="color:#F0F3F6;"> pattern </span><span style="color:#FF9492;">=</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">({</span></span>
<span class="line"><span style="color:#F0F3F6;">  port: </span><span style="color:#ADDCFF;">&quot;(80|443)&quot;</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#F0F3F6;">});</span></span></code></pre></div><p>上面示例中，<code>(80|443)</code>表示 80 或者 443 都可以。</p><h4 id="-6" tabindex="-1"><a class="header-anchor" href="#-6"><span>:</span></a></h4><p>特殊字符<code>:</code>用来定义一个具名组匹配，后面跟着变量名。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">let</span><span style="color:#F0F3F6;"> pattern </span><span style="color:#FF9492;">=</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">({</span></span>
<span class="line"><span style="color:#F0F3F6;">  pathname: </span><span style="color:#ADDCFF;">&quot;/:path&quot;</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#F0F3F6;">});</span></span></code></pre></div><p>上面示例中，<code>/:path</code>表示斜杠后面的部分，都被捕捉放入变量<code>path</code>，可以从匹配结果的<code>pathname.groups</code>上的对应属性获取。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">const</span><span style="color:#91CBFF;"> pattern</span><span style="color:#FF9492;"> =</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">({ pathname: </span><span style="color:#ADDCFF;">&quot;/books/:id&quot;</span><span style="color:#F0F3F6;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">exec</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://example.com/books/123&quot;</span><span style="color:#F0F3F6;">).pathname.groups</span></span>
<span class="line"><span style="color:#BDC4CC;">// { id: &#39;123&#39; }</span></span></code></pre></div><p>上面示例中，<code>pathname.groups</code>返回一个对象，该对象的属性就是所有捕捉成功的组变量，上例是<code>id</code>。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">const</span><span style="color:#91CBFF;"> pattern</span><span style="color:#FF9492;"> =</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">({ pathname: </span><span style="color:#ADDCFF;">&quot;/:product/:user/:action&quot;</span><span style="color:#F0F3F6;"> });</span></span>
<span class="line"><span style="color:#FF9492;">const</span><span style="color:#91CBFF;"> result</span><span style="color:#FF9492;"> =</span><span style="color:#F0F3F6;"> pattern.</span><span style="color:#DBB7FF;">exec</span><span style="color:#F0F3F6;">({ pathname: </span><span style="color:#ADDCFF;">&quot;/store/wanderview/view&quot;</span><span style="color:#F0F3F6;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">result.pathname.groups.product </span><span style="color:#BDC4CC;">// &#39;store&#39;</span></span>
<span class="line"><span style="color:#F0F3F6;">result.pathname.groups.user </span><span style="color:#BDC4CC;">// &#39;wanderview&#39;</span></span>
<span class="line"><span style="color:#F0F3F6;">result.pathname.groups.action </span><span style="color:#BDC4CC;">// &#39;view&#39;</span></span>
<span class="line"><span style="color:#F0F3F6;">result.pathname.input </span><span style="color:#BDC4CC;">// &#39;/store/wanderview/view&#39;</span></span></code></pre></div><p>上面示例中，<code>:product、:user、:action</code>的匹配结果，都可以从<code>pathname.groups</code>的对应属性上获取。</p><p>组匹配可以放在模式的前面。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">const</span><span style="color:#91CBFF;"> pattern</span><span style="color:#FF9492;"> =</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">(</span></span>
<span class="line"><span style="color:#ADDCFF;">  &quot;/books/:id(</span><span style="color:#FF9492;">\\\\</span><span style="color:#ADDCFF;">d+)&quot;</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#ADDCFF;">  &quot;https://example.com&quot;</span></span>
<span class="line"><span style="color:#F0F3F6;">);</span></span></code></pre></div><p>上面示例中，组匹配<code>:id</code>后面跟着模型定义<code>\\\\d+</code>，模式需要放在括号里面。</p><h4 id="特殊字符转义" tabindex="-1"><a class="header-anchor" href="#特殊字符转义"><span>特殊字符转义</span></a></h4><p>如果要将特殊字符当作普通字符使用，必须在其前面加入双重反斜杠进行转义。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">let</span><span style="color:#F0F3F6;"> pattern1 </span><span style="color:#FF9492;">=</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">({</span></span>
<span class="line"><span style="color:#F0F3F6;">  pathname: </span><span style="color:#ADDCFF;">&quot;/a:b&quot;</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#F0F3F6;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">let</span><span style="color:#F0F3F6;"> pattern2 </span><span style="color:#FF9492;">=</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">({</span></span>
<span class="line"><span style="color:#F0F3F6;">  pathname: </span><span style="color:#ADDCFF;">&quot;/a</span><span style="color:#FF9492;">\\\\</span><span style="color:#ADDCFF;">:b&quot;</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#F0F3F6;">});</span></span></code></pre></div><p>上面示例中，<code>a:b</code>表示路径以字符<code>a</code>开头，后面的部分都放入变量<code>b</code>。而<code>a\\\\:b</code>表示路径本身就是<code>a:b</code>就是。</p><h2 id="实例属性" tabindex="-1"><a class="header-anchor" href="#实例属性"><span>实例属性</span></a></h2><p><code>URLPattern</code>实例的属性对应<code>URLPattern()</code>模式对象参数的各个部分。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">const</span><span style="color:#91CBFF;"> pattern</span><span style="color:#FF9492;"> =</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">({</span></span>
<span class="line"><span style="color:#F0F3F6;">  hostname: </span><span style="color:#ADDCFF;">&quot;{*.}?example.com&quot;</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#F0F3F6;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">pattern.hostname </span><span style="color:#BDC4CC;">// &#39;{*.}?example.com&#39;</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.protocol </span><span style="color:#BDC4CC;">// &#39;*&#39;</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.username </span><span style="color:#BDC4CC;">// &#39;*&#39;</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.password </span><span style="color:#BDC4CC;">// &#39;*&#39;</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.port </span><span style="color:#BDC4CC;">// &quot;&quot;</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.pathname </span><span style="color:#BDC4CC;">// &#39;*&#39;</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.search </span><span style="color:#BDC4CC;">// &#39;*&#39;</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.hash </span><span style="color:#BDC4CC;">// &#39;*&#39;</span></span></code></pre></div><p>上面示例中，<code>pattern</code>是一个实例对象，它的属性与<code>URLPattern()</code>的参数对象的属性一致。</p><p>注意，<code>search</code>不包括开头的<code>?</code>，<code>hash</code>不包括开头的<code>#</code>，但是<code>pathname</code>包括开头的<code>/</code>。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">const</span><span style="color:#91CBFF;"> pattern</span><span style="color:#FF9492;"> =</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://cdn-*.example.com/*.jpg&quot;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">pattern.protocol </span><span style="color:#BDC4CC;">// &#39;https&#39;</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.hostname </span><span style="color:#BDC4CC;">// &#39;cdn-*.example.com&#39;</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.pathname </span><span style="color:#BDC4CC;">// &#39;/*.jpg&#39;</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.username </span><span style="color:#BDC4CC;">// &#39;&#39;</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.password </span><span style="color:#BDC4CC;">// &#39;&#39;</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.search </span><span style="color:#BDC4CC;">// &#39;&#39;</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.hash </span><span style="color:#BDC4CC;">// &#39;&#39;</span></span></code></pre></div><h2 id="实例方法" tabindex="-1"><a class="header-anchor" href="#实例方法"><span>实例方法</span></a></h2><h3 id="exec" tabindex="-1"><a class="header-anchor" href="#exec"><span>exec()</span></a></h3><p>实例的<code>exec()</code>方法，把模式用于解析参数网址，返回匹配结果。</p><p><code>exec()</code>方法的参数与<code>new URLPattern()</code>是一致的。它可以是一个<code>URL</code>字符串。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">exec</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://store.example.com/books/123&quot;</span><span style="color:#F0F3F6;">);</span></span></code></pre></div><p>如果第一个参数是相对<code>URL</code>，那么需要基准<code>URL</code>，作为第二个参数。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">exec</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;/foo/bar&quot;</span><span style="color:#F0F3F6;">, </span><span style="color:#ADDCFF;">&quot;https://example.com/baz&quot;</span><span style="color:#F0F3F6;">);</span></span></code></pre></div><p><code>exec()</code>方法的参数，也可以是一个对象。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">exec</span><span style="color:#F0F3F6;">({</span></span>
<span class="line"><span style="color:#F0F3F6;">  protocol: </span><span style="color:#ADDCFF;">&quot;https&quot;</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#F0F3F6;">  hostname: </span><span style="color:#ADDCFF;">&quot;store.example.com&quot;</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#F0F3F6;">  pathname: </span><span style="color:#ADDCFF;">&quot;/books/123&quot;</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#F0F3F6;">});</span></span></code></pre></div><p>如果匹配成功，它返回一个包括匹配结果的对象。如果匹配失败，返回<code>null</code>。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">const</span><span style="color:#91CBFF;"> pattern</span><span style="color:#FF9492;"> =</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;http{s}?://*.example.com/books/:id&quot;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">exec</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://example.com/books/123&quot;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// null</span></span></code></pre></div><p>上面示例中，匹配失败返回<code>null</code>。</p><p>匹配成功返回的对象，有一个<code>inputs</code>属性，包含传入<code>pattern.exec()</code>的参数数组。其他属性的值也是一个对象，该对象的<code>input</code>属性对应传入值，<code>groups</code>属性包含各个组匹配。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">const</span><span style="color:#91CBFF;"> pattern</span><span style="color:#FF9492;"> =</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;http{s}?://*.example.com/books/:id&quot;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#FF9492;">let</span><span style="color:#F0F3F6;"> match </span><span style="color:#FF9492;">=</span><span style="color:#F0F3F6;"> pattern.</span><span style="color:#DBB7FF;">exec</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;https://store.example.com/books/123&quot;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">match.inputs </span><span style="color:#BDC4CC;">// [&#39;https://store.example.com/books/123&#39;]</span></span>
<span class="line"><span style="color:#F0F3F6;">match.protocol </span><span style="color:#BDC4CC;">// { input: &quot;https&quot;, groups: {} }</span></span>
<span class="line"><span style="color:#F0F3F6;">match.username </span><span style="color:#BDC4CC;">// { input: &quot;&quot;, groups: {} }</span></span>
<span class="line"><span style="color:#F0F3F6;">match.password </span><span style="color:#BDC4CC;">// { input: &quot;&quot;, groups: {} }</span></span>
<span class="line"><span style="color:#F0F3F6;">match.hostname </span><span style="color:#BDC4CC;">// { input: &quot;store.example.com&quot;, groups: { &quot;0&quot;: &quot;store&quot; } }</span></span>
<span class="line"><span style="color:#F0F3F6;">match.port </span><span style="color:#BDC4CC;">// { input: &quot;&quot;, groups: {} }</span></span>
<span class="line"><span style="color:#F0F3F6;">match.pathname </span><span style="color:#BDC4CC;">// { input: &quot;/books/123&quot;, groups: { &quot;id&quot;: &quot;123&quot; } }</span></span>
<span class="line"><span style="color:#F0F3F6;">match.search </span><span style="color:#BDC4CC;">// { input: &quot;&quot;, groups: {} }</span></span>
<span class="line"><span style="color:#F0F3F6;">match.hash </span><span style="color:#BDC4CC;">// { input: &quot;&quot;, groups: {} }</span></span></code></pre></div><h3 id="test" tabindex="-1"><a class="header-anchor" href="#test"><span>test()</span></a></h3><p>实例的<code>test()</code>方法，用来检测参数网址是否符合当前模式。</p><p>它的参数跟<code>URLPattern()</code>是一样的，可以是模式字符串，也可以是模式对象。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FF9492;">const</span><span style="color:#91CBFF;"> pattern</span><span style="color:#FF9492;"> =</span><span style="color:#FF9492;"> new</span><span style="color:#DBB7FF;"> URLPattern</span><span style="color:#F0F3F6;">({</span></span>
<span class="line"><span style="color:#F0F3F6;">  hostname: </span><span style="color:#ADDCFF;">&quot;example.com&quot;</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#F0F3F6;">  pathname: </span><span style="color:#ADDCFF;">&quot;/foo/*&quot;</span></span>
<span class="line"><span style="color:#F0F3F6;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">({</span></span>
<span class="line"><span style="color:#F0F3F6;">  pathname: </span><span style="color:#ADDCFF;">&quot;/foo/bar&quot;</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#F0F3F6;">  baseURL: </span><span style="color:#ADDCFF;">&quot;https://example.com/baz&quot;</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#F0F3F6;">}) </span><span style="color:#BDC4CC;">// true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;/foo/bar&quot;</span><span style="color:#F0F3F6;">, </span><span style="color:#ADDCFF;">&quot;https://example.com/baz&quot;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// true</span></span></code></pre></div><p>正常情况下，它返回一个布尔值。但是，如果语法不合法，它也会抛错。</p><div class="language-js" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#F0F3F6;">pattern.</span><span style="color:#DBB7FF;">test</span><span style="color:#F0F3F6;">({ pathname: </span><span style="color:#ADDCFF;">&quot;/foo/bar&quot;</span><span style="color:#F0F3F6;"> }, </span><span style="color:#ADDCFF;">&quot;https://example.com/baz&quot;</span><span style="color:#F0F3F6;">) </span><span style="color:#BDC4CC;">// 报错</span></span></code></pre></div>`,137)]))}const r=a(l,[["render",e],["__file","JS-URLPatternAPI.html.vue"]]),i=JSON.parse('{"path":"/js/%E5%9F%BA%E7%A1%80/JS-URLPatternAPI.html","title":"JS-URLPatternAPI","lang":"zh-CN","frontmatter":{"title":"JS-URLPatternAPI","date":"2023-04-05T00:00:00.000Z","tags":"JS基础","categories":"前端","order":8,"description":"URL Pattern API 基于正则表达式和通配符，对URL进行匹配和解析。 它提供一个构造函数URLPattern()，用于新建一个URL模式实例。 有了模式实例，就可以知道某个URL是否符合该模式。 上面示例中，模式实例是 包含/books路径的URL，实例方法test()用来检测指定网址是否符合该模式，结果为true。 URL Pattern...","head":[["meta",{"property":"og:url","content":"https://0oWSQo0.github.io/wsq-blog/js/%E5%9F%BA%E7%A1%80/JS-URLPatternAPI.html"}],["meta",{"property":"og:title","content":"JS-URLPatternAPI"}],["meta",{"property":"og:description","content":"URL Pattern API 基于正则表达式和通配符，对URL进行匹配和解析。 它提供一个构造函数URLPattern()，用于新建一个URL模式实例。 有了模式实例，就可以知道某个URL是否符合该模式。 上面示例中，模式实例是 包含/books路径的URL，实例方法test()用来检测指定网址是否符合该模式，结果为true。 URL Pattern..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-09-11T05:57:00.000Z"}],["meta",{"property":"article:published_time","content":"2023-04-05T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-09-11T05:57:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"JS-URLPatternAPI\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-04-05T00:00:00.000Z\\",\\"dateModified\\":\\"2024-09-11T05:57:00.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"WSQ\\",\\"url\\":\\"https://0oWSQo0.github.com\\"}]}"]]},"headers":[{"level":2,"title":"构造函数 URLPattern()","slug":"构造函数-urlpattern","link":"#构造函数-urlpattern","children":[{"level":3,"title":"基本用法","slug":"基本用法","link":"#基本用法","children":[]},{"level":3,"title":"模式写法","slug":"模式写法","link":"#模式写法","children":[]}]},{"level":2,"title":"实例属性","slug":"实例属性","link":"#实例属性","children":[]},{"level":2,"title":"实例方法","slug":"实例方法","link":"#实例方法","children":[{"level":3,"title":"exec()","slug":"exec","link":"#exec","children":[]},{"level":3,"title":"test()","slug":"test","link":"#test","children":[]}]}],"git":{"createdTime":1726034220000,"updatedTime":1726034220000,"contributors":[{"name":"WSQ","email":"592786982@qq.com","commits":1}]},"readingTime":{"minutes":9.13,"words":2739},"filePathRelative":"js/基础/JS-URLPatternAPI.md","localizedDate":"2023年4月5日","autoDesc":true}');export{r as comp,i as data};
