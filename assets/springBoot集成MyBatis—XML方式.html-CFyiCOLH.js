import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,d as l,o as p}from"./app-ByvFWdWZ.js";const o={};function e(F,s){return p(),a("div",null,s[0]||(s[0]=[l(`<h2 id="准备知识" tabindex="-1"><a class="header-anchor" href="#准备知识"><span>准备知识</span></a></h2><h3 id="什么是mybatis" tabindex="-1"><a class="header-anchor" href="#什么是mybatis"><span>什么是MyBatis</span></a></h3><p>MyBatis 是一个优秀的持久层框架，支持定制化 SQL、存储过程以及高级映射。它内部封装了 JDBC，使开发者只需要关注<code>sql</code>语句本身，而不需要花费精力去处理加载驱动、创建连接、创建<code>statement</code>等繁杂的过程。</p><p>MyBatis 通过<code>xml</code>或注解的方式将要执行的各种<code>statement</code>配置起来，并通过 java 对象和<code>statement</code>中<code>sql</code>的动态参数进行映射生成最终执行的<code>sql</code>语句，最后由 MyBatis 框架执行<code>sql</code>并将结果映射为 java 对象并返回。</p><p>MyBatis 的主要设计目的就是让我们对执行 SQL 语句时对输入输出的数据管理更加方便，所以方便地写出 SQL 和方便地获取 SQL 的执行结果才是 MyBatis 的核心竞争力。</p><p>Mybatis 的功能架构分为三层：</p><ul><li>API接口层：提供给外部使用的接口 API，开发人员通过这些本地 API 来操纵数据库。接口层一接收到调用请求就会调用数据处理层来完成具体的数据处理。</li><li>数据处理层：负责具体的 SQL 查找、SQL 解析、SQL 执行和执行结果映射处理等。它主要的目的是根据调用的请求完成一次数据库操作。</li><li>基础支撑层：负责最基础的功能支撑，包括连接管理、事务管理、配置加载和缓存处理，这些都是共用的东西，将他们抽取出来作为最基础的组件。为上层的数据处理层提供最基础的支撑。</li></ul><h3 id="为什么说mybatis是半自动orm" tabindex="-1"><a class="header-anchor" href="#为什么说mybatis是半自动orm"><span>为什么说MyBatis是半自动ORM？</span></a></h3><h4 id="什么是orm" tabindex="-1"><a class="header-anchor" href="#什么是orm"><span>什么是ORM</span></a></h4><p>对象关系映射（<code>Object Relational Mapping</code>，简称 ORM），简单的说，ORM 是通过使用描述对象和数据库之间映射的元数据，将 java 程序中的对象自动持久化到关系数据库中。本质上就是将数据从一种形式转换到另外一种形式。</p><p>具体映射：</p><ul><li>数据库的表（<code>table</code>） --&gt; 类（<code>class</code>）</li><li>记录（<code>record</code>，行数据）--&gt; 对象（<code>object</code>）</li><li>字段（<code>field</code>）--&gt; 对象的属性（<code>attribute</code>）</li></ul><h4 id="什么是全自动orm" tabindex="-1"><a class="header-anchor" href="#什么是全自动orm"><span>什么是全自动ORM</span></a></h4><p>ORM 框架可以根据对象关系模型直接获取，查询关联对象或者关联集合对象，简单而言使用全自动的 ORM 框架查询时可以不再写 SQL。典型的框架如 Hibernate；因为<code>Spring-data-jpa</code>很多代码也是 Hibernate 团队贡献的，所以<code>spring-data-jpa</code>也是全自动 ORM 框架。</p><h4 id="mybatis是半自动orm" tabindex="-1"><a class="header-anchor" href="#mybatis是半自动orm"><span>MyBatis是半自动ORM</span></a></h4><p>Mybatis 在查询关联对象或关联集合对象时，需要手动编写 sql 来完成，所以，称之为半自动 ORM 映射工具。</p><div class="hint-container info"><p class="hint-container-title">相关信息</p><p>正是由于 MyBatis 是半自动框架，基于 MyBatis 技术栈的框架开始考虑在兼容 MyBatis 开发框架的基础上提供自动化的能力，比如 MyBatis-plus 等框架。</p></div><h2 id="mybatis栈技术演进" tabindex="-1"><a class="header-anchor" href="#mybatis栈技术演进"><span>MyBatis栈技术演进</span></a></h2><h3 id="jdbc-自行封装jdbcutil" tabindex="-1"><a class="header-anchor" href="#jdbc-自行封装jdbcutil"><span>JDBC，自行封装JDBCUtil</span></a></h3><p>Java5 的时代，通常的开发中会自行封装 JDBC 的<code>Util</code>，比如创建<code>Connection</code>，以及确保关闭<code>Connection</code>等。</p><h3 id="ibatis" tabindex="-1"><a class="header-anchor" href="#ibatis"><span>IBatis</span></a></h3><p>MyBatis 的前身，它封装了绝大多数的 JDBC 样板代码，使得开发者只需关注 SQL 本身，而不需要花费精力去处理例如注册驱动，创建<code>Connection</code>，以及确保关闭<code>Connection</code>这样繁杂的代码。</p><h3 id="mybatis" tabindex="-1"><a class="header-anchor" href="#mybatis"><span>MyBatis</span></a></h3><p>伴随着 JDK5+ 泛型和注解特性开始流行，IBatis 在 3.0 变更为 MyBatis，对泛型和注解等特性开始全面支持，同时支持了很多新的特性，比如：</p><ul><li>mybatis 实现了接口绑定，通过<code>Dao</code>接口和<code>xml</code>映射文件的绑定，自动生成接口的具体实现</li><li>mybatis 支持 ognl 表达式，比如<code>&lt;if&gt;, &lt;else&gt;</code>使用 ognl 进行解析</li><li>mybatis 插件机制等，（<code>PageHelper</code>分页插件应用而生，解决了数据库层的分页封装问题）</li></ul><p>所以这个时期，MyBatis XML 配置方式 + <code>PageHelper</code>成为重要的开发方式。</p><h3 id="mybatis衍生-代码生成工具等" tabindex="-1"><a class="header-anchor" href="#mybatis衍生-代码生成工具等"><span>MyBatis衍生：代码生成工具等</span></a></h3><p>MyBatis 提供了开发上的便捷，但是依然需要写大量的<code>xml</code>配置，并且很多都是 CRUD 级别的（这便有了很多重复性的工作），所以为了减少重复编码，衍生出了 MyBatis 代码生成工具，如 CodeGenerator 等。IDE 也开始出现封装一些工具和插件来生成代码生成工具等。</p><p>由于后端视图解析引擎多样性（比如 freemarker,volicty,thymeleaf 等），以及前后端分离前端独立等，为了进一步减少重复代码的编写（包括视图层），自动生成的代码工具也开始演化为自动生成前端视图代码。</p><h3 id="spring-mybatis基于注解的配置集成" tabindex="-1"><a class="header-anchor" href="#spring-mybatis基于注解的配置集成"><span>Spring+MyBatis基于注解的配置集成</span></a></h3><p>与此同时，Spring2.5 开始完全支持基于注解的配置并且也支持 JSR250 注解。在 Spring 后续的版本发展倾向于通过注解和 Java 配置结合使用。基于 Spring+MyBatis 开发技术栈开始有<code>xml</code>配置方式往注解和 java 配置方式反向发展。</p><p>SpringBoot 的出现便是要解决配置过多的问题，它实际上通过约定大于配置的方式大大简化了用户的配置，对于三方组件使用<code>xx-starter</code>统一的对<code>Bean</code>进行默认初始化，用户只需要很少的配置就可以进行开发了。所以出现了<code>mybatis-spring-boot-starter</code>的封装等。</p><p>这个阶段，主要的开发技术栈是<code>Spring + mybatis-spring-boot-starter</code>自动化配置 + <code>PageHelper</code>，并且很多数据库实体<code>mapper</code>还是通过<code>xml</code>方式配置的（伴随着使用一些自动化生成工具）。</p><h3 id="mybatis-plus" tabindex="-1"><a class="header-anchor" href="#mybatis-plus"><span>MyBatis-Plus</span></a></h3><p>为了更高的效率，出现了 MyBatis-Plus 这类工具，对 MyBatis 进行增强。</p><ol><li>考虑到 MyBatis 是半自动化 ORM，MyBatis-Plus 启动即会自动注入基本 CURD，性能基本无损耗，直接面向对象操作；并且内置通用<code>Mapper</code>、通用<code>Service</code>，仅仅通过少量配置即可实现单表大部分 CRUD 操作，更有强大的条件构造器，满足各类使用需求；总体上让其支持全自动化的使用方式（本质上借鉴了 Hibernate 思路）。</li><li>考虑到 Java8 Lambda（函数式编程）开始流行，MyBatis-Plus 支持 Lambda 表达式，方便的编写各类查询条件，无需再担心字段写错</li><li>考虑到 MyBatis 还需要独立引入 PageHelper 分页插件，MyBatis-Plus 支持了内置分页插件，同 PageHelper 一样基于 MyBatis 物理分页，开发者无需关心具体操作，配置好插件之后，写分页等同于普通<code>List</code>查询</li><li>考虑到自动化代码生成方式，MyBatis-Plus 也支持了内置代码生成器，采用代码或者 Maven 插件可快速生成<code>Mapper、Model、Service、Controller</code>层代码，支持模板引擎，更有超多自定义配置等您来使用</li><li>考虑到 SQL 性能优化等问题，MyBatis-Plus 内置性能分析插件, 可输出 SQL 语句以及其执行时间，建议开发测试时启用该功能，能快速揪出慢查询</li><li>其它还有解决一些常见开发问题，比如支持主键自动生成，支持 4 种主键策略（内含分布式唯一 ID 生成器 - <code>Sequence</code>），可自由配置，完美解决主键问题；以及内置全局拦截插件，提供全表<code>delete、update</code>操作智能分析阻断，也可自定义拦截规则，预防误操作</li></ol><h2 id="简单示例" tabindex="-1"><a class="header-anchor" href="#简单示例"><span>简单示例</span></a></h2><h3 id="准备db和依赖配置" tabindex="-1"><a class="header-anchor" href="#准备db和依赖配置"><span>准备DB和依赖配置</span></a></h3><p>创建 MySQL 的<code>test_db</code>，导入SQL 文件：</p><div class="language-sql" data-highlighter="shiki" data-ext="sql" data-title="sql" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;">-- MySQL dump 10.13  Distrib 5.7.12, for Win64 (x86_64)</span></span>
<span class="line"><span style="color:#BDC4CC;">--</span></span>
<span class="line"><span style="color:#BDC4CC;">-- Host: localhost    Database: test_db</span></span>
<span class="line"><span style="color:#BDC4CC;">-- ------------------------------------------------------</span></span>
<span class="line"><span style="color:#BDC4CC;">-- Server version	5.7.17-log</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;">--</span></span>
<span class="line"><span style="color:#BDC4CC;">-- Table structure for table \`tb_role\`</span></span>
<span class="line"><span style="color:#BDC4CC;">--</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">DROP</span><span style="color:#FF9492;"> TABLE</span><span style="color:#FF9492;"> IF</span><span style="color:#FF9492;"> EXISTS</span><span style="color:#ADDCFF;"> \`tb_role\`</span><span style="color:#F0F3F6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">CREATE</span><span style="color:#FF9492;"> TABLE</span><span style="color:#F0F3F6;"> \`</span><span style="color:#DBB7FF;">tb_role</span><span style="color:#F0F3F6;">\` (</span></span>
<span class="line"><span style="color:#ADDCFF;">  \`id\`</span><span style="color:#FF9492;"> int</span><span style="color:#F0F3F6;">(</span><span style="color:#91CBFF;">11</span><span style="color:#F0F3F6;">) </span><span style="color:#FF9492;">NOT NULL</span><span style="color:#F0F3F6;"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="color:#ADDCFF;">  \`name\`</span><span style="color:#FF9492;"> varchar</span><span style="color:#F0F3F6;">(</span><span style="color:#91CBFF;">255</span><span style="color:#F0F3F6;">) </span><span style="color:#FF9492;">NOT NULL</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#ADDCFF;">  \`role_key\`</span><span style="color:#FF9492;"> varchar</span><span style="color:#F0F3F6;">(</span><span style="color:#91CBFF;">255</span><span style="color:#F0F3F6;">) </span><span style="color:#FF9492;">NOT NULL</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#ADDCFF;">  \`description\`</span><span style="color:#FF9492;"> varchar</span><span style="color:#F0F3F6;">(</span><span style="color:#91CBFF;">255</span><span style="color:#F0F3F6;">) </span><span style="color:#FF9492;">DEFAULT</span><span style="color:#FF9492;"> NULL</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#ADDCFF;">  \`create_time\`</span><span style="color:#FF9492;"> datetime</span><span style="color:#FF9492;"> DEFAULT</span><span style="color:#FF9492;"> NULL</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#ADDCFF;">  \`update_time\`</span><span style="color:#FF9492;"> datetime</span><span style="color:#FF9492;"> DEFAULT</span><span style="color:#FF9492;"> NULL</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#FF9492;">  PRIMARY KEY</span><span style="color:#F0F3F6;"> (</span><span style="color:#ADDCFF;">\`id\`</span><span style="color:#F0F3F6;">)</span></span>
<span class="line"><span style="color:#F0F3F6;">) ENGINE</span><span style="color:#FF9492;">=</span><span style="color:#F0F3F6;">InnoDB AUTO_INCREMENT</span><span style="color:#FF9492;">=</span><span style="color:#91CBFF;">2</span><span style="color:#FF9492;"> DEFAULT</span><span style="color:#F0F3F6;"> CHARSET</span><span style="color:#FF9492;">=</span><span style="color:#F0F3F6;">utf8;</span></span>
<span class="line"><span style="color:#BDC4CC;">/*!40101 SET character_set_client = @saved_cs_client */</span><span style="color:#F0F3F6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;">--</span></span>
<span class="line"><span style="color:#BDC4CC;">-- Dumping data for table \`tb_role\`</span></span>
<span class="line"><span style="color:#BDC4CC;">--</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">LOCK TABLES </span><span style="color:#ADDCFF;">\`tb_role\`</span><span style="color:#F0F3F6;"> WRITE;</span></span>
<span class="line"><span style="color:#BDC4CC;">/*!40000 ALTER TABLE \`tb_role\` DISABLE KEYS */</span><span style="color:#F0F3F6;">;</span></span>
<span class="line"><span style="color:#FF9492;">INSERT INTO</span><span style="color:#ADDCFF;"> \`tb_role\`</span><span style="color:#FF9492;"> VALUES</span><span style="color:#F0F3F6;"> (</span><span style="color:#91CBFF;">1</span><span style="color:#F0F3F6;">,</span><span style="color:#ADDCFF;">&#39;admin&#39;</span><span style="color:#F0F3F6;">,</span><span style="color:#ADDCFF;">&#39;admin&#39;</span><span style="color:#F0F3F6;">,</span><span style="color:#ADDCFF;">&#39;admin&#39;</span><span style="color:#F0F3F6;">,</span><span style="color:#ADDCFF;">&#39;2021-09-08 17:09:15&#39;</span><span style="color:#F0F3F6;">,</span><span style="color:#ADDCFF;">&#39;2021-09-08 17:09:15&#39;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#BDC4CC;">/*!40000 ALTER TABLE \`tb_role\` ENABLE KEYS */</span><span style="color:#F0F3F6;">;</span></span>
<span class="line"><span style="color:#FF9492;">UNLOCK</span><span style="color:#F0F3F6;"> TABLES;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;">--</span></span>
<span class="line"><span style="color:#BDC4CC;">-- Table structure for table \`tb_user\`</span></span>
<span class="line"><span style="color:#BDC4CC;">--</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">DROP</span><span style="color:#FF9492;"> TABLE</span><span style="color:#FF9492;"> IF</span><span style="color:#FF9492;"> EXISTS</span><span style="color:#ADDCFF;"> \`tb_user\`</span><span style="color:#F0F3F6;">;</span></span>
<span class="line"><span style="color:#BDC4CC;">/*!40101 SET @saved_cs_client     = @@character_set_client */</span><span style="color:#F0F3F6;">;</span></span>
<span class="line"><span style="color:#BDC4CC;">/*!40101 SET character_set_client = utf8 */</span><span style="color:#F0F3F6;">;</span></span>
<span class="line"><span style="color:#FF9492;">CREATE</span><span style="color:#FF9492;"> TABLE</span><span style="color:#F0F3F6;"> \`</span><span style="color:#DBB7FF;">tb_user</span><span style="color:#F0F3F6;">\` (</span></span>
<span class="line"><span style="color:#ADDCFF;">  \`id\`</span><span style="color:#FF9492;"> int</span><span style="color:#F0F3F6;">(</span><span style="color:#91CBFF;">11</span><span style="color:#F0F3F6;">) </span><span style="color:#FF9492;">NOT NULL</span><span style="color:#F0F3F6;"> AUTO_INCREMENT,</span></span>
<span class="line"><span style="color:#ADDCFF;">  \`user_name\`</span><span style="color:#FF9492;"> varchar</span><span style="color:#F0F3F6;">(</span><span style="color:#91CBFF;">45</span><span style="color:#F0F3F6;">) </span><span style="color:#FF9492;">NOT NULL</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#ADDCFF;">  \`password\`</span><span style="color:#FF9492;"> varchar</span><span style="color:#F0F3F6;">(</span><span style="color:#91CBFF;">45</span><span style="color:#F0F3F6;">) </span><span style="color:#FF9492;">NOT NULL</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#ADDCFF;">  \`email\`</span><span style="color:#FF9492;"> varchar</span><span style="color:#F0F3F6;">(</span><span style="color:#91CBFF;">45</span><span style="color:#F0F3F6;">) </span><span style="color:#FF9492;">DEFAULT</span><span style="color:#FF9492;"> NULL</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#ADDCFF;">  \`phone_number\`</span><span style="color:#FF9492;"> int</span><span style="color:#F0F3F6;">(</span><span style="color:#91CBFF;">11</span><span style="color:#F0F3F6;">) </span><span style="color:#FF9492;">DEFAULT</span><span style="color:#FF9492;"> NULL</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#ADDCFF;">  \`description\`</span><span style="color:#FF9492;"> varchar</span><span style="color:#F0F3F6;">(</span><span style="color:#91CBFF;">255</span><span style="color:#F0F3F6;">) </span><span style="color:#FF9492;">DEFAULT</span><span style="color:#FF9492;"> NULL</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#ADDCFF;">  \`create_time\`</span><span style="color:#FF9492;"> datetime</span><span style="color:#FF9492;"> DEFAULT</span><span style="color:#FF9492;"> NULL</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#ADDCFF;">  \`update_time\`</span><span style="color:#FF9492;"> datetime</span><span style="color:#FF9492;"> DEFAULT</span><span style="color:#FF9492;"> NULL</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#FF9492;">  PRIMARY KEY</span><span style="color:#F0F3F6;"> (</span><span style="color:#ADDCFF;">\`id\`</span><span style="color:#F0F3F6;">)</span></span>
<span class="line"><span style="color:#F0F3F6;">) ENGINE</span><span style="color:#FF9492;">=</span><span style="color:#F0F3F6;">InnoDB AUTO_INCREMENT</span><span style="color:#FF9492;">=</span><span style="color:#91CBFF;">2</span><span style="color:#FF9492;"> DEFAULT</span><span style="color:#F0F3F6;"> CHARSET</span><span style="color:#FF9492;">=</span><span style="color:#F0F3F6;">utf8;</span></span>
<span class="line"><span style="color:#BDC4CC;">/*!40101 SET character_set_client = @saved_cs_client */</span><span style="color:#F0F3F6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;">--</span></span>
<span class="line"><span style="color:#BDC4CC;">-- Dumping data for table \`tb_user\`</span></span>
<span class="line"><span style="color:#BDC4CC;">--</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">LOCK TABLES </span><span style="color:#ADDCFF;">\`tb_user\`</span><span style="color:#F0F3F6;"> WRITE;</span></span>
<span class="line"><span style="color:#BDC4CC;">/*!40000 ALTER TABLE \`tb_user\` DISABLE KEYS */</span><span style="color:#F0F3F6;">;</span></span>
<span class="line"><span style="color:#FF9492;">INSERT INTO</span><span style="color:#ADDCFF;"> \`tb_user\`</span><span style="color:#FF9492;"> VALUES</span><span style="color:#F0F3F6;"> (</span><span style="color:#91CBFF;">1</span><span style="color:#F0F3F6;">,</span><span style="color:#ADDCFF;">&#39;pdai&#39;</span><span style="color:#F0F3F6;">,</span><span style="color:#ADDCFF;">&#39;dfasdf&#39;</span><span style="color:#F0F3F6;">,</span><span style="color:#ADDCFF;">&#39;suzhou.daipeng@gmail.com&#39;</span><span style="color:#F0F3F6;">,</span><span style="color:#91CBFF;">1212121213</span><span style="color:#F0F3F6;">,</span><span style="color:#ADDCFF;">&#39;afsdfsaf&#39;</span><span style="color:#F0F3F6;">,</span><span style="color:#ADDCFF;">&#39;2021-09-08 17:09:15&#39;</span><span style="color:#F0F3F6;">,</span><span style="color:#ADDCFF;">&#39;2021-09-08 17:09:15&#39;</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#BDC4CC;">/*!40000 ALTER TABLE \`tb_user\` ENABLE KEYS */</span><span style="color:#F0F3F6;">;</span></span>
<span class="line"><span style="color:#FF9492;">UNLOCK</span><span style="color:#F0F3F6;"> TABLES;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;">--</span></span>
<span class="line"><span style="color:#BDC4CC;">-- Table structure for table \`tb_user_role\`</span></span>
<span class="line"><span style="color:#BDC4CC;">--</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">DROP</span><span style="color:#FF9492;"> TABLE</span><span style="color:#FF9492;"> IF</span><span style="color:#FF9492;"> EXISTS</span><span style="color:#ADDCFF;"> \`tb_user_role\`</span><span style="color:#F0F3F6;">;</span></span>
<span class="line"><span style="color:#BDC4CC;">/*!40101 SET @saved_cs_client     = @@character_set_client */</span><span style="color:#F0F3F6;">;</span></span>
<span class="line"><span style="color:#BDC4CC;">/*!40101 SET character_set_client = utf8 */</span><span style="color:#F0F3F6;">;</span></span>
<span class="line"><span style="color:#FF9492;">CREATE</span><span style="color:#FF9492;"> TABLE</span><span style="color:#F0F3F6;"> \`</span><span style="color:#DBB7FF;">tb_user_role</span><span style="color:#F0F3F6;">\` (</span></span>
<span class="line"><span style="color:#ADDCFF;">  \`user_id\`</span><span style="color:#FF9492;"> int</span><span style="color:#F0F3F6;">(</span><span style="color:#91CBFF;">11</span><span style="color:#F0F3F6;">) </span><span style="color:#FF9492;">NOT NULL</span><span style="color:#F0F3F6;">,</span></span>
<span class="line"><span style="color:#ADDCFF;">  \`role_id\`</span><span style="color:#FF9492;"> int</span><span style="color:#F0F3F6;">(</span><span style="color:#91CBFF;">11</span><span style="color:#F0F3F6;">) </span><span style="color:#FF9492;">NOT NULL</span></span>
<span class="line"><span style="color:#F0F3F6;">) ENGINE</span><span style="color:#FF9492;">=</span><span style="color:#F0F3F6;">InnoDB </span><span style="color:#FF9492;">DEFAULT</span><span style="color:#F0F3F6;"> CHARSET</span><span style="color:#FF9492;">=</span><span style="color:#F0F3F6;">utf8;</span></span>
<span class="line"><span style="color:#BDC4CC;">/*!40101 SET character_set_client = @saved_cs_client */</span><span style="color:#F0F3F6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;">--</span></span>
<span class="line"><span style="color:#BDC4CC;">-- Dumping data for table \`tb_user_role\`</span></span>
<span class="line"><span style="color:#BDC4CC;">--</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">LOCK TABLES </span><span style="color:#ADDCFF;">\`tb_user_role\`</span><span style="color:#F0F3F6;"> WRITE;</span></span>
<span class="line"><span style="color:#BDC4CC;">/*!40000 ALTER TABLE \`tb_user_role\` DISABLE KEYS */</span><span style="color:#F0F3F6;">;</span></span>
<span class="line"><span style="color:#FF9492;">INSERT INTO</span><span style="color:#ADDCFF;"> \`tb_user_role\`</span><span style="color:#FF9492;"> VALUES</span><span style="color:#F0F3F6;"> (</span><span style="color:#91CBFF;">1</span><span style="color:#F0F3F6;">,</span><span style="color:#91CBFF;">1</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#BDC4CC;">/*!40000 ALTER TABLE \`tb_user_role\` ENABLE KEYS */</span><span style="color:#F0F3F6;">;</span></span>
<span class="line"><span style="color:#FF9492;">UNLOCK</span><span style="color:#F0F3F6;"> TABLES;</span></span></code></pre></div><p>引入 maven 依赖。</p><div class="language-xml" data-highlighter="shiki" data-ext="xml" data-title="xml" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#F0F3F6;">&lt;</span><span style="color:#72F088;">dependency</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">    &lt;</span><span style="color:#72F088;">groupId</span><span style="color:#F0F3F6;">&gt;mysql&lt;/</span><span style="color:#72F088;">groupId</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">    &lt;</span><span style="color:#72F088;">artifactId</span><span style="color:#F0F3F6;">&gt;mysql-connector-java&lt;/</span><span style="color:#72F088;">artifactId</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">    &lt;</span><span style="color:#72F088;">version</span><span style="color:#F0F3F6;">&gt;5.1.47&lt;/</span><span style="color:#72F088;">version</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">&lt;/</span><span style="color:#72F088;">dependency</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">&lt;</span><span style="color:#72F088;">dependency</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">    &lt;</span><span style="color:#72F088;">groupId</span><span style="color:#F0F3F6;">&gt;org.mybatis.spring.boot&lt;/</span><span style="color:#72F088;">groupId</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">    &lt;</span><span style="color:#72F088;">artifactId</span><span style="color:#F0F3F6;">&gt;mybatis-spring-boot-starter&lt;/</span><span style="color:#72F088;">artifactId</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">    &lt;</span><span style="color:#72F088;">version</span><span style="color:#F0F3F6;">&gt;2.1.0&lt;/</span><span style="color:#72F088;">version</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">&lt;/</span><span style="color:#72F088;">dependency</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#BDC4CC;">&lt;!--pagehelper分页 --&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">&lt;</span><span style="color:#72F088;">dependency</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">    &lt;</span><span style="color:#72F088;">groupId</span><span style="color:#F0F3F6;">&gt;com.github.pagehelper&lt;/</span><span style="color:#72F088;">groupId</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">    &lt;</span><span style="color:#72F088;">artifactId</span><span style="color:#F0F3F6;">&gt;pagehelper-spring-boot-starter&lt;/</span><span style="color:#72F088;">artifactId</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">    &lt;</span><span style="color:#72F088;">version</span><span style="color:#F0F3F6;">&gt;1.2.10&lt;/</span><span style="color:#72F088;">version</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">&lt;/</span><span style="color:#72F088;">dependency</span><span style="color:#F0F3F6;">&gt;</span></span></code></pre></div><p>增加 yml 配置。</p><div class="language-yml" data-highlighter="shiki" data-ext="yml" data-title="yml" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#72F088;">spring</span><span style="color:#F0F3F6;">:</span></span>
<span class="line"><span style="color:#72F088;">  datasource</span><span style="color:#F0F3F6;">:</span></span>
<span class="line"><span style="color:#72F088;">    url</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">jdbc:mysql://localhost:3306/test_db?useSSL=false&amp;autoReconnect=true&amp;characterEncoding=utf8</span></span>
<span class="line"><span style="color:#72F088;">    driver-class-name</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">com.mysql.jdbc.Driver</span></span>
<span class="line"><span style="color:#72F088;">    username</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">root</span></span>
<span class="line"><span style="color:#72F088;">    password</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">bfXa4Pt2lUUScy8jakXf</span></span>
<span class="line"></span>
<span class="line"><span style="color:#72F088;">mybatis</span><span style="color:#F0F3F6;">:</span></span>
<span class="line"><span style="color:#BDC4CC;">  # 指定 mapper.xml 的位置</span></span>
<span class="line"><span style="color:#72F088;">  mapper-locations</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">classpath:mybatis/mapper/*.xml</span></span>
<span class="line"><span style="color:#BDC4CC;">  # 扫描实体类的位置,在此处指明扫描实体类的包，在 mapper.xml 中就可以不写实体类的全路径名</span></span>
<span class="line"><span style="color:#72F088;">  type-aliases-package</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">tech.pdai.springboot.mysql57.xml.entity</span></span>
<span class="line"><span style="color:#72F088;">  configuration</span><span style="color:#F0F3F6;">:</span></span>
<span class="line"><span style="color:#72F088;">    cache-enabled</span><span style="color:#F0F3F6;">: </span><span style="color:#91CBFF;">true</span></span>
<span class="line"><span style="color:#72F088;">    use-generated-keys</span><span style="color:#F0F3F6;">: </span><span style="color:#91CBFF;">true</span></span>
<span class="line"><span style="color:#72F088;">    default-executor-type</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">REUSE</span></span>
<span class="line"><span style="color:#72F088;">    use-actual-param-name</span><span style="color:#F0F3F6;">: </span><span style="color:#91CBFF;">true</span></span></code></pre></div><p><code>classpath:mybatis/mapper/*.xml</code>是<code>mapper</code>的位置。</p><h3 id="mapper文件" tabindex="-1"><a class="header-anchor" href="#mapper文件"><span>Mapper文件</span></a></h3><p><code>mapper</code>文件定义在配置的路径中（<code>classpath:mybatis/mapper/*.xml</code>）。</p><p><code>UserMapper.xml</code></p><div class="language-xml" data-highlighter="shiki" data-ext="xml" data-title="xml" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#F0F3F6;">&lt;?</span><span style="color:#72F088;">xml</span><span style="color:#91CBFF;"> version</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;1.0&quot;</span><span style="color:#91CBFF;"> encoding</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;UTF-8&quot;</span><span style="color:#F0F3F6;"> ?&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">&lt;!</span><span style="color:#FF9492;">DOCTYPE</span><span style="color:#91CBFF;"> mapper</span></span>
<span class="line"><span style="color:#F0F3F6;">PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span>
<span class="line"><span style="color:#F0F3F6;">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">&lt;</span><span style="color:#72F088;">mapper</span><span style="color:#91CBFF;"> namespace</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;tech.springboot.mysql57.mybatis.xml.dao.IUserDao&quot;</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">	&lt;</span><span style="color:#72F088;">resultMap</span><span style="color:#91CBFF;"> type</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;tech.springboot.mysql57.mybatis.xml.entity.User&quot;</span><span style="color:#91CBFF;"> id</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;UserResult&quot;</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;</span><span style="color:#72F088;">id</span><span style="color:#91CBFF;">     property</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;id&quot;</span><span style="color:#91CBFF;">       	column</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;id&quot;</span><span style="color:#F0F3F6;">      		/&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;</span><span style="color:#72F088;">result</span><span style="color:#91CBFF;"> property</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;userName&quot;</span><span style="color:#91CBFF;">     column</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;user_name&quot;</span><span style="color:#F0F3F6;">    	/&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;</span><span style="color:#72F088;">result</span><span style="color:#91CBFF;"> property</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;password&quot;</span><span style="color:#91CBFF;">     column</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;password&quot;</span><span style="color:#F0F3F6;">    	/&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;</span><span style="color:#72F088;">result</span><span style="color:#91CBFF;"> property</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;email&quot;</span><span style="color:#91CBFF;">        column</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;email&quot;</span><span style="color:#F0F3F6;">        	/&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;</span><span style="color:#72F088;">result</span><span style="color:#91CBFF;"> property</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;phoneNumber&quot;</span><span style="color:#91CBFF;">  column</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;phone_number&quot;</span><span style="color:#F0F3F6;">  	/&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;</span><span style="color:#72F088;">result</span><span style="color:#91CBFF;"> property</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;description&quot;</span><span style="color:#91CBFF;">  column</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;description&quot;</span><span style="color:#F0F3F6;">  	/&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;</span><span style="color:#72F088;">result</span><span style="color:#91CBFF;"> property</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;createTime&quot;</span><span style="color:#91CBFF;">   column</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;create_time&quot;</span><span style="color:#F0F3F6;">  	/&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;</span><span style="color:#72F088;">result</span><span style="color:#91CBFF;"> property</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;updateTime&quot;</span><span style="color:#91CBFF;">   column</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;update_time&quot;</span><span style="color:#F0F3F6;">  	/&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;</span><span style="color:#72F088;">collection</span><span style="color:#91CBFF;"> property</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;roles&quot;</span><span style="color:#91CBFF;"> ofType</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;tech.pdai.springboot.mysql57.mybatis.xml.entity.Role&quot;</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">			&lt;</span><span style="color:#72F088;">result</span><span style="color:#91CBFF;"> property</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;id&quot;</span><span style="color:#91CBFF;"> column</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;id&quot;</span><span style="color:#F0F3F6;">  /&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">			&lt;</span><span style="color:#72F088;">result</span><span style="color:#91CBFF;"> property</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;name&quot;</span><span style="color:#91CBFF;"> column</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;name&quot;</span><span style="color:#F0F3F6;">  /&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">			&lt;</span><span style="color:#72F088;">result</span><span style="color:#91CBFF;"> property</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;roleKey&quot;</span><span style="color:#91CBFF;"> column</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;role_key&quot;</span><span style="color:#F0F3F6;">  /&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">			&lt;</span><span style="color:#72F088;">result</span><span style="color:#91CBFF;"> property</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;description&quot;</span><span style="color:#91CBFF;"> column</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;description&quot;</span><span style="color:#F0F3F6;">  /&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">			&lt;</span><span style="color:#72F088;">result</span><span style="color:#91CBFF;"> property</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;createTime&quot;</span><span style="color:#91CBFF;">   column</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;create_time&quot;</span><span style="color:#F0F3F6;">  	/&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">			&lt;</span><span style="color:#72F088;">result</span><span style="color:#91CBFF;"> property</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;updateTime&quot;</span><span style="color:#91CBFF;">   column</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;update_time&quot;</span><span style="color:#F0F3F6;">  	/&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;/</span><span style="color:#72F088;">collection</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">	&lt;/</span><span style="color:#72F088;">resultMap</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">	</span></span>
<span class="line"><span style="color:#F0F3F6;">	&lt;</span><span style="color:#72F088;">sql</span><span style="color:#91CBFF;"> id</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;selectUserSql&quot;</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">        select u.id, u.password, u.user_name, u.email, u.phone_number, u.description, u.create_time, u.update_time, r.name, r.role_key, r.description, r.create_time, r.update_time</span></span>
<span class="line"><span style="color:#F0F3F6;">		from tb_user u</span></span>
<span class="line"><span style="color:#F0F3F6;">		left join tb_user_role ur on u.id=ur.user_id</span></span>
<span class="line"><span style="color:#F0F3F6;">		inner join tb_role r on ur.role_id=r.id</span></span>
<span class="line"><span style="color:#F0F3F6;">    &lt;/</span><span style="color:#72F088;">sql</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">	</span></span>
<span class="line"><span style="color:#F0F3F6;">	&lt;</span><span style="color:#72F088;">select</span><span style="color:#91CBFF;"> id</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;findList&quot;</span><span style="color:#91CBFF;"> parameterType</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;tech.pdai.springboot.mysql57.mybatis.xml.entity.query.UserQueryBean&quot;</span><span style="color:#91CBFF;"> resultMap</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;UserResult&quot;</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;</span><span style="color:#72F088;">include</span><span style="color:#91CBFF;"> refid</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;selectUserSql&quot;</span><span style="color:#F0F3F6;">/&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		where u.id != 0</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;</span><span style="color:#72F088;">if</span><span style="color:#91CBFF;"> test</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;userName != null and userName != &#39;&#39;&quot;</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">			AND u.user_name like concat(&#39;%&#39;, #{user_name}, &#39;%&#39;)</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;/</span><span style="color:#72F088;">if</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;</span><span style="color:#72F088;">if</span><span style="color:#91CBFF;"> test</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;description != null and description != &#39;&#39;&quot;</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">			AND u.description like concat(&#39;%&#39;, #{description}, &#39;%&#39;)</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;/</span><span style="color:#72F088;">if</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;</span><span style="color:#72F088;">if</span><span style="color:#91CBFF;"> test</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;phoneNumber != null and phoneNumber != &#39;&#39;&quot;</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">			AND u.phone_number like concat(&#39;%&#39;, #{phoneNumber}, &#39;%&#39;)</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;/</span><span style="color:#72F088;">if</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;</span><span style="color:#72F088;">if</span><span style="color:#91CBFF;"> test</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;email != null and email != &#39;&#39;&quot;</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">			AND u.email like concat(&#39;%&#39;, #{email}, &#39;%&#39;)</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;/</span><span style="color:#72F088;">if</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">	&lt;/</span><span style="color:#72F088;">select</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">	</span></span>
<span class="line"><span style="color:#F0F3F6;">	&lt;</span><span style="color:#72F088;">select</span><span style="color:#91CBFF;"> id</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;findById&quot;</span><span style="color:#91CBFF;"> parameterType</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;Long&quot;</span><span style="color:#91CBFF;"> resultMap</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;UserResult&quot;</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;</span><span style="color:#72F088;">include</span><span style="color:#91CBFF;"> refid</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;selectUserSql&quot;</span><span style="color:#F0F3F6;">/&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		where u.id = #{id}</span></span>
<span class="line"><span style="color:#F0F3F6;">	&lt;/</span><span style="color:#72F088;">select</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">	</span></span>
<span class="line"><span style="color:#F0F3F6;">	&lt;</span><span style="color:#72F088;">delete</span><span style="color:#91CBFF;"> id</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;deleteById&quot;</span><span style="color:#91CBFF;"> parameterType</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;Long&quot;</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;"> 		delete from tb_user where id = #{id}</span></span>
<span class="line"><span style="color:#F0F3F6;"> 	&lt;/</span><span style="color:#72F088;">delete</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;"> 	</span></span>
<span class="line"><span style="color:#F0F3F6;"> 	&lt;</span><span style="color:#72F088;">delete</span><span style="color:#91CBFF;"> id</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;deleteByIds&quot;</span><span style="color:#91CBFF;"> parameterType</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;Long&quot;</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		delete from tb_user where id in</span></span>
<span class="line"><span style="color:#F0F3F6;"> 		&lt;</span><span style="color:#72F088;">foreach</span><span style="color:#91CBFF;"> collection</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;array&quot;</span><span style="color:#91CBFF;"> item</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;id&quot;</span><span style="color:#91CBFF;"> open</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;(&quot;</span><span style="color:#91CBFF;"> separator</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;,&quot;</span><span style="color:#91CBFF;"> close</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;)&quot;</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;"> 			#{id}</span></span>
<span class="line"><span style="color:#F0F3F6;">        &lt;/</span><span style="color:#72F088;">foreach</span><span style="color:#F0F3F6;">&gt; </span></span>
<span class="line"><span style="color:#F0F3F6;"> 	&lt;/</span><span style="color:#72F088;">delete</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;"> 	</span></span>
<span class="line"><span style="color:#F0F3F6;"> 	&lt;</span><span style="color:#72F088;">update</span><span style="color:#91CBFF;"> id</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;update&quot;</span><span style="color:#91CBFF;"> parameterType</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;tech.pdai.springboot.mysql57.mybatis.xml.entity.User&quot;</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;"> 		update tb_user</span></span>
<span class="line"><span style="color:#F0F3F6;"> 		&lt;</span><span style="color:#72F088;">set</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;"> 			&lt;</span><span style="color:#72F088;">if</span><span style="color:#91CBFF;"> test</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;userName != null and userName != &#39;&#39;&quot;</span><span style="color:#F0F3F6;">&gt;user_name = #{userName},&lt;/</span><span style="color:#72F088;">if</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;"> 			&lt;</span><span style="color:#72F088;">if</span><span style="color:#91CBFF;"> test</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;email != null and email != &#39;&#39;&quot;</span><span style="color:#F0F3F6;">&gt;email = #{email},&lt;/</span><span style="color:#72F088;">if</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;"> 			&lt;</span><span style="color:#72F088;">if</span><span style="color:#91CBFF;"> test</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;phoneNumber != null and phoneNumber != &#39;&#39;&quot;</span><span style="color:#F0F3F6;">&gt;phone_number = #{phoneNumber},&lt;/</span><span style="color:#72F088;">if</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">			&lt;</span><span style="color:#72F088;">if</span><span style="color:#91CBFF;"> test</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;description != null and description != &#39;&#39;&quot;</span><span style="color:#F0F3F6;">&gt;description = #{description},&lt;/</span><span style="color:#72F088;">if</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;"> 			update_time = sysdate()</span></span>
<span class="line"><span style="color:#F0F3F6;"> 		&lt;/</span><span style="color:#72F088;">set</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;"> 		where id = #{id}</span></span>
<span class="line"><span style="color:#F0F3F6;">	&lt;/</span><span style="color:#72F088;">update</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">	&lt;</span><span style="color:#72F088;">update</span><span style="color:#91CBFF;"> id</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;updatePassword&quot;</span><span style="color:#91CBFF;"> parameterType</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;tech.pdai.springboot.mysql57.mybatis.xml.entity.User&quot;</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		update tb_user</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;</span><span style="color:#72F088;">set</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">			password = #{password}, update_time = sysdate()</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;/</span><span style="color:#72F088;">set</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		where id = #{id}</span></span>
<span class="line"><span style="color:#F0F3F6;">	&lt;/</span><span style="color:#72F088;">update</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;"> 	</span></span>
<span class="line"><span style="color:#F0F3F6;"> 	&lt;</span><span style="color:#72F088;">insert</span><span style="color:#91CBFF;"> id</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;save&quot;</span><span style="color:#91CBFF;"> parameterType</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;tech.pdai.springboot.mysql57.mybatis.xml.entity.User&quot;</span><span style="color:#91CBFF;"> useGeneratedKeys</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;true&quot;</span><span style="color:#91CBFF;"> keyProperty</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;id&quot;</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;"> 		insert into tb_user(</span></span>
<span class="line"><span style="color:#F0F3F6;"> 			&lt;</span><span style="color:#72F088;">if</span><span style="color:#91CBFF;"> test</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;userName != null and userName != &#39;&#39;&quot;</span><span style="color:#F0F3F6;">&gt;user_name,&lt;/</span><span style="color:#72F088;">if</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">			&lt;</span><span style="color:#72F088;">if</span><span style="color:#91CBFF;"> test</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;password != null and password != &#39;&#39;&quot;</span><span style="color:#F0F3F6;">&gt;password,&lt;/</span><span style="color:#72F088;">if</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;"> 			&lt;</span><span style="color:#72F088;">if</span><span style="color:#91CBFF;"> test</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;email != null and email != &#39;&#39;&quot;</span><span style="color:#F0F3F6;">&gt;email,&lt;/</span><span style="color:#72F088;">if</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">			&lt;</span><span style="color:#72F088;">if</span><span style="color:#91CBFF;"> test</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;phoneNumber != null and phoneNumber != &#39;&#39;&quot;</span><span style="color:#F0F3F6;">&gt;phone_number,&lt;/</span><span style="color:#72F088;">if</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;"> 			&lt;</span><span style="color:#72F088;">if</span><span style="color:#91CBFF;"> test</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;description != null and description != &#39;&#39;&quot;</span><span style="color:#F0F3F6;">&gt;description,&lt;/</span><span style="color:#72F088;">if</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;"> 			create_time,</span></span>
<span class="line"><span style="color:#F0F3F6;">			update_time</span></span>
<span class="line"><span style="color:#F0F3F6;"> 		)values(</span></span>
<span class="line"><span style="color:#F0F3F6;"> 			&lt;</span><span style="color:#72F088;">if</span><span style="color:#91CBFF;"> test</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;userName != null and userName != &#39;&#39;&quot;</span><span style="color:#F0F3F6;">&gt;#{userName},&lt;/</span><span style="color:#72F088;">if</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">			&lt;</span><span style="color:#72F088;">if</span><span style="color:#91CBFF;"> test</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;password != null and password != &#39;&#39;&quot;</span><span style="color:#F0F3F6;">&gt;#{password},&lt;/</span><span style="color:#72F088;">if</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;"> 			&lt;</span><span style="color:#72F088;">if</span><span style="color:#91CBFF;"> test</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;email != null and email != &#39;&#39;&quot;</span><span style="color:#F0F3F6;">&gt;#{email},&lt;/</span><span style="color:#72F088;">if</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;"> 			&lt;</span><span style="color:#72F088;">if</span><span style="color:#91CBFF;"> test</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;phoneNumber != null and phoneNumber != &#39;&#39;&quot;</span><span style="color:#F0F3F6;">&gt;#{phone_number},&lt;/</span><span style="color:#72F088;">if</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;"> 			&lt;</span><span style="color:#72F088;">if</span><span style="color:#91CBFF;"> test</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;description != null and description != &#39;&#39;&quot;</span><span style="color:#F0F3F6;">&gt;#{description},&lt;/</span><span style="color:#72F088;">if</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;"> 			sysdate(),</span></span>
<span class="line"><span style="color:#F0F3F6;">			sysdate()</span></span>
<span class="line"><span style="color:#F0F3F6;"> 		)</span></span>
<span class="line"><span style="color:#F0F3F6;">	&lt;/</span><span style="color:#72F088;">insert</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">	</span></span>
<span class="line"><span style="color:#F0F3F6;">&lt;/</span><span style="color:#72F088;">mapper</span><span style="color:#F0F3F6;">&gt;</span></span></code></pre></div><p><code>RoleMapper.xml</code>。</p><div class="language-xml" data-highlighter="shiki" data-ext="xml" data-title="xml" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#F0F3F6;">&lt;?</span><span style="color:#72F088;">xml</span><span style="color:#91CBFF;"> version</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;1.0&quot;</span><span style="color:#91CBFF;"> encoding</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;UTF-8&quot;</span><span style="color:#F0F3F6;"> ?&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">&lt;!</span><span style="color:#FF9492;">DOCTYPE</span><span style="color:#91CBFF;"> mapper</span></span>
<span class="line"><span style="color:#F0F3F6;">PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span>
<span class="line"><span style="color:#F0F3F6;">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">&lt;</span><span style="color:#72F088;">mapper</span><span style="color:#91CBFF;"> namespace</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;tech.springboot.mysql57.mybatis.xml.dao.IRoleDao&quot;</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">	&lt;</span><span style="color:#72F088;">resultMap</span><span style="color:#91CBFF;"> type</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;tech.springboot.mysql57.mybatis.xml.entity.Role&quot;</span><span style="color:#91CBFF;"> id</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;RoleResult&quot;</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;</span><span style="color:#72F088;">id</span><span style="color:#91CBFF;">     property</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;id&quot;</span><span style="color:#91CBFF;">       	column</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;id&quot;</span><span style="color:#F0F3F6;">      		/&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;</span><span style="color:#72F088;">result</span><span style="color:#91CBFF;"> property</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;name&quot;</span><span style="color:#91CBFF;"> 		column</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;name&quot;</span><span style="color:#F0F3F6;">  /&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;</span><span style="color:#72F088;">result</span><span style="color:#91CBFF;"> property</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;roleKey&quot;</span><span style="color:#91CBFF;"> 		column</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;role_key&quot;</span><span style="color:#F0F3F6;">  /&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;</span><span style="color:#72F088;">result</span><span style="color:#91CBFF;"> property</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;description&quot;</span><span style="color:#91CBFF;"> 	column</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;description&quot;</span><span style="color:#F0F3F6;">  /&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;</span><span style="color:#72F088;">result</span><span style="color:#91CBFF;"> property</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;createTime&quot;</span><span style="color:#91CBFF;">   column</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;create_time&quot;</span><span style="color:#F0F3F6;">  	/&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;</span><span style="color:#72F088;">result</span><span style="color:#91CBFF;"> property</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;updateTime&quot;</span><span style="color:#91CBFF;">   column</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;update_time&quot;</span><span style="color:#F0F3F6;">  	/&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">	&lt;/</span><span style="color:#72F088;">resultMap</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">	</span></span>
<span class="line"><span style="color:#F0F3F6;">	&lt;</span><span style="color:#72F088;">sql</span><span style="color:#91CBFF;"> id</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;selectRoleSql&quot;</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">        select  r.id, r.name, r.role_key, r.description, r.create_time, r.update_time</span></span>
<span class="line"><span style="color:#F0F3F6;">			from tb_role r</span></span>
<span class="line"><span style="color:#F0F3F6;">    &lt;/</span><span style="color:#72F088;">sql</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">	</span></span>
<span class="line"><span style="color:#F0F3F6;">	&lt;</span><span style="color:#72F088;">select</span><span style="color:#91CBFF;"> id</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;findList&quot;</span><span style="color:#91CBFF;"> parameterType</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;tech.pdai.springboot.mysql57.mybatis.xml.entity.query.RoleQueryBean&quot;</span><span style="color:#91CBFF;"> resultMap</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;RoleResult&quot;</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;</span><span style="color:#72F088;">include</span><span style="color:#91CBFF;"> refid</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;selectRoleSql&quot;</span><span style="color:#F0F3F6;">/&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		where r.id != 0</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;</span><span style="color:#72F088;">if</span><span style="color:#91CBFF;"> test</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;name != null and name != &#39;&#39;&quot;</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">			AND r.name like concat(&#39;%&#39;, #{name}, &#39;%&#39;)</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;/</span><span style="color:#72F088;">if</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;</span><span style="color:#72F088;">if</span><span style="color:#91CBFF;"> test</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;roleKey != null and roleKey != &#39;&#39;&quot;</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">			AND r.role_key = #{roleKey}</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;/</span><span style="color:#72F088;">if</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;</span><span style="color:#72F088;">if</span><span style="color:#91CBFF;"> test</span><span style="color:#F0F3F6;">=</span><span style="color:#ADDCFF;">&quot;description != null and description != &#39;&#39;&quot;</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">			AND r.description like concat(&#39;%&#39;, #{description}, &#39;%&#39;)</span></span>
<span class="line"><span style="color:#F0F3F6;">		&lt;/</span><span style="color:#72F088;">if</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">	&lt;/</span><span style="color:#72F088;">select</span><span style="color:#F0F3F6;">&gt;</span></span>
<span class="line"><span style="color:#F0F3F6;">	</span></span>
<span class="line"><span style="color:#F0F3F6;">&lt;/</span><span style="color:#72F088;">mapper</span><span style="color:#F0F3F6;">&gt;</span></span></code></pre></div><h3 id="定义dao" tabindex="-1"><a class="header-anchor" href="#定义dao"><span>定义dao</span></a></h3><p>与<code>Mapper</code>文件中方法对应。</p><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;">// UserDao</span></span>
<span class="line"><span style="color:#FF9492;">package</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.dao;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> java.util.List;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> org.apache.ibatis.annotations.Mapper;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.entity.User;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.entity.query.UserQueryBean;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">@</span><span style="color:#FF9492;">Mapper</span></span>
<span class="line"><span style="color:#FF9492;">public</span><span style="color:#FF9492;"> interface</span><span style="color:#FFB757;"> IUserDao</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">    List&lt;</span><span style="color:#FF9492;">User</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#DBB7FF;">findList</span><span style="color:#F0F3F6;">(UserQueryBean </span><span style="color:#FFB757;">userQueryBean</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">    User </span><span style="color:#DBB7FF;">findById</span><span style="color:#F0F3F6;">(Long </span><span style="color:#FFB757;">id</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">    int</span><span style="color:#DBB7FF;"> deleteById</span><span style="color:#F0F3F6;">(Long </span><span style="color:#FFB757;">id</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">    int</span><span style="color:#DBB7FF;"> deleteByIds</span><span style="color:#F0F3F6;">(</span><span style="color:#FF9492;">Long</span><span style="color:#F0F3F6;">[] </span><span style="color:#FFB757;">ids</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">    int</span><span style="color:#DBB7FF;"> update</span><span style="color:#F0F3F6;">(User </span><span style="color:#FFB757;">user</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">    int</span><span style="color:#DBB7FF;"> save</span><span style="color:#F0F3F6;">(User </span><span style="color:#FFB757;">user</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">    int</span><span style="color:#DBB7FF;"> updatePassword</span><span style="color:#F0F3F6;">(User </span><span style="color:#FFB757;">user</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span></code></pre></div><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;">// RoleDao</span></span>
<span class="line"><span style="color:#FF9492;">package</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.dao;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> java.util.List;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> org.apache.ibatis.annotations.Mapper;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.entity.Role;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.entity.query.RoleQueryBean;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">@</span><span style="color:#FF9492;">Mapper</span></span>
<span class="line"><span style="color:#FF9492;">public</span><span style="color:#FF9492;"> interface</span><span style="color:#FFB757;"> IRoleDao</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"><span style="color:#F0F3F6;">    List&lt;</span><span style="color:#FF9492;">Role</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#DBB7FF;">findList</span><span style="color:#F0F3F6;">(RoleQueryBean </span><span style="color:#FFB757;">roleQueryBean</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span></code></pre></div><h3 id="定义service接口和实现类" tabindex="-1"><a class="header-anchor" href="#定义service接口和实现类"><span>定义Service接口和实现类</span></a></h3><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;">// UserService接口</span></span>
<span class="line"><span style="color:#FF9492;">package</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.service;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> java.util.List;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.entity.User;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.entity.query.UserQueryBean;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">public</span><span style="color:#FF9492;"> interface</span><span style="color:#FFB757;"> IUserService</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">    List&lt;</span><span style="color:#FF9492;">User</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#DBB7FF;">findList</span><span style="color:#F0F3F6;">(UserQueryBean </span><span style="color:#FFB757;">userQueryBean</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">    User </span><span style="color:#DBB7FF;">findById</span><span style="color:#F0F3F6;">(Long </span><span style="color:#FFB757;">id</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">    int</span><span style="color:#DBB7FF;"> deleteById</span><span style="color:#F0F3F6;">(Long </span><span style="color:#FFB757;">id</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">    int</span><span style="color:#DBB7FF;"> deleteByIds</span><span style="color:#F0F3F6;">(</span><span style="color:#FF9492;">Long</span><span style="color:#F0F3F6;">[] </span><span style="color:#FFB757;">ids</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">    int</span><span style="color:#DBB7FF;"> update</span><span style="color:#F0F3F6;">(User </span><span style="color:#FFB757;">user</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">    int</span><span style="color:#DBB7FF;"> save</span><span style="color:#F0F3F6;">(User </span><span style="color:#FFB757;">user</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">    int</span><span style="color:#DBB7FF;"> updatePassword</span><span style="color:#F0F3F6;">(User </span><span style="color:#FFB757;">user</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span></code></pre></div><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;">// User Service 的实现类</span></span>
<span class="line"><span style="color:#FF9492;">package</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.service.impl;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> java.util.List;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> org.springframework.stereotype.Service;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.dao.IUserDao;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.entity.User;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.entity.query.UserQueryBean;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.service.IUserService;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">@</span><span style="color:#FF9492;">Service</span></span>
<span class="line"><span style="color:#FF9492;">public</span><span style="color:#FF9492;"> class</span><span style="color:#FFB757;"> UserDoServiceImpl</span><span style="color:#FF9492;"> implements</span><span style="color:#91CBFF;"> IUserService</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;">    /**</span></span>
<span class="line"><span style="color:#BDC4CC;">     * userDao.</span></span>
<span class="line"><span style="color:#BDC4CC;">     */</span></span>
<span class="line"><span style="color:#FF9492;">    private</span><span style="color:#FF9492;"> final</span><span style="color:#F0F3F6;"> IUserDao</span><span style="color:#F0F3F6;"> userDao;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;">    /**</span></span>
<span class="line"><span style="color:#BDC4CC;">     * init.</span></span>
<span class="line"><span style="color:#BDC4CC;">     *</span></span>
<span class="line"><span style="color:#BDC4CC;">     * </span><span style="color:#FF9492;">@param</span><span style="color:#FFB757;"> userDao2</span><span style="color:#BDC4CC;"> user dao</span></span>
<span class="line"><span style="color:#BDC4CC;">     */</span></span>
<span class="line"><span style="color:#FF9492;">    public</span><span style="color:#DBB7FF;"> UserDoServiceImpl</span><span style="color:#F0F3F6;">(</span><span style="color:#FF9492;">final</span><span style="color:#F0F3F6;"> IUserDao </span><span style="color:#FFB757;">userDao2</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#91CBFF;">        this</span><span style="color:#F0F3F6;">.userDao </span><span style="color:#FF9492;">=</span><span style="color:#F0F3F6;"> userDao2;</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">    @</span><span style="color:#FF9492;">Override</span></span>
<span class="line"><span style="color:#FF9492;">    public</span><span style="color:#F0F3F6;"> List&lt;</span><span style="color:#FF9492;">User</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#DBB7FF;">findList</span><span style="color:#F0F3F6;">(UserQueryBean </span><span style="color:#FFB757;">userQueryBean</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#FF9492;">        return</span><span style="color:#F0F3F6;"> userDao.</span><span style="color:#DBB7FF;">findList</span><span style="color:#F0F3F6;">(userQueryBean);</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">    @</span><span style="color:#FF9492;">Override</span></span>
<span class="line"><span style="color:#FF9492;">    public</span><span style="color:#F0F3F6;"> User </span><span style="color:#DBB7FF;">findById</span><span style="color:#F0F3F6;">(Long </span><span style="color:#FFB757;">id</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#FF9492;">        return</span><span style="color:#F0F3F6;"> userDao.</span><span style="color:#DBB7FF;">findById</span><span style="color:#F0F3F6;">(id);</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">    @</span><span style="color:#FF9492;">Override</span></span>
<span class="line"><span style="color:#FF9492;">    public</span><span style="color:#FF9492;"> int</span><span style="color:#DBB7FF;"> deleteById</span><span style="color:#F0F3F6;">(Long </span><span style="color:#FFB757;">id</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#FF9492;">        return</span><span style="color:#F0F3F6;"> userDao.</span><span style="color:#DBB7FF;">deleteById</span><span style="color:#F0F3F6;">(id);</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">    @</span><span style="color:#FF9492;">Override</span></span>
<span class="line"><span style="color:#FF9492;">    public</span><span style="color:#FF9492;"> int</span><span style="color:#DBB7FF;"> deleteByIds</span><span style="color:#F0F3F6;">(</span><span style="color:#FF9492;">Long</span><span style="color:#F0F3F6;">[] </span><span style="color:#FFB757;">ids</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#FF9492;">        return</span><span style="color:#F0F3F6;"> userDao.</span><span style="color:#DBB7FF;">deleteByIds</span><span style="color:#F0F3F6;">(ids);</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">    @</span><span style="color:#FF9492;">Override</span></span>
<span class="line"><span style="color:#FF9492;">    public</span><span style="color:#FF9492;"> int</span><span style="color:#DBB7FF;"> update</span><span style="color:#F0F3F6;">(User </span><span style="color:#FFB757;">user</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#FF9492;">        return</span><span style="color:#F0F3F6;"> userDao.</span><span style="color:#DBB7FF;">update</span><span style="color:#F0F3F6;">(user);</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">    @</span><span style="color:#FF9492;">Override</span></span>
<span class="line"><span style="color:#FF9492;">    public</span><span style="color:#FF9492;"> int</span><span style="color:#DBB7FF;"> save</span><span style="color:#F0F3F6;">(User </span><span style="color:#FFB757;">user</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#FF9492;">        return</span><span style="color:#F0F3F6;"> userDao.</span><span style="color:#DBB7FF;">save</span><span style="color:#F0F3F6;">(user);</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">    @</span><span style="color:#FF9492;">Override</span></span>
<span class="line"><span style="color:#FF9492;">    public</span><span style="color:#FF9492;"> int</span><span style="color:#DBB7FF;"> updatePassword</span><span style="color:#F0F3F6;">(User </span><span style="color:#FFB757;">user</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#FF9492;">        return</span><span style="color:#F0F3F6;"> userDao.</span><span style="color:#DBB7FF;">updatePassword</span><span style="color:#F0F3F6;">(user);</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span></code></pre></div><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;">// Role Service 接口</span></span>
<span class="line"><span style="color:#FF9492;">package</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.service;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> java.util.List;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.entity.Role;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.entity.query.RoleQueryBean;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">public</span><span style="color:#FF9492;"> interface</span><span style="color:#FFB757;"> IRoleService</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">    List&lt;</span><span style="color:#FF9492;">Role</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#DBB7FF;">findList</span><span style="color:#F0F3F6;">(RoleQueryBean </span><span style="color:#FFB757;">roleQueryBean</span><span style="color:#F0F3F6;">);</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span></code></pre></div><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;">// Role Service 实现类</span></span>
<span class="line"><span style="color:#FF9492;">package</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.service.impl;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> java.util.List;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> org.springframework.stereotype.Service;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.dao.IRoleDao;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.entity.Role;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.entity.query.RoleQueryBean;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.service.IRoleService;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">@</span><span style="color:#FF9492;">Service</span></span>
<span class="line"><span style="color:#FF9492;">public</span><span style="color:#FF9492;"> class</span><span style="color:#FFB757;"> RoleDoServiceImpl</span><span style="color:#FF9492;"> implements</span><span style="color:#91CBFF;"> IRoleService</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;">    /**</span></span>
<span class="line"><span style="color:#BDC4CC;">     * roleDao.</span></span>
<span class="line"><span style="color:#BDC4CC;">     */</span></span>
<span class="line"><span style="color:#FF9492;">    private</span><span style="color:#FF9492;"> final</span><span style="color:#F0F3F6;"> IRoleDao</span><span style="color:#F0F3F6;"> roleDao;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;">    /**</span></span>
<span class="line"><span style="color:#BDC4CC;">     * init.</span></span>
<span class="line"><span style="color:#BDC4CC;">     *</span></span>
<span class="line"><span style="color:#BDC4CC;">     * </span><span style="color:#FF9492;">@param</span><span style="color:#FFB757;"> roleDao2</span><span style="color:#BDC4CC;"> role dao</span></span>
<span class="line"><span style="color:#BDC4CC;">     */</span></span>
<span class="line"><span style="color:#FF9492;">    public</span><span style="color:#DBB7FF;"> RoleDoServiceImpl</span><span style="color:#F0F3F6;">(</span><span style="color:#FF9492;">final</span><span style="color:#F0F3F6;"> IRoleDao </span><span style="color:#FFB757;">roleDao2</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#91CBFF;">        this</span><span style="color:#F0F3F6;">.roleDao </span><span style="color:#FF9492;">=</span><span style="color:#F0F3F6;"> roleDao2;</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">    @</span><span style="color:#FF9492;">Override</span></span>
<span class="line"><span style="color:#FF9492;">    public</span><span style="color:#F0F3F6;"> List&lt;</span><span style="color:#FF9492;">Role</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#DBB7FF;">findList</span><span style="color:#F0F3F6;">(RoleQueryBean </span><span style="color:#FFB757;">roleQueryBean</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#FF9492;">        return</span><span style="color:#F0F3F6;"> roleDao.</span><span style="color:#DBB7FF;">findList</span><span style="color:#F0F3F6;">(roleQueryBean);</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span></code></pre></div><h3 id="controller" tabindex="-1"><a class="header-anchor" href="#controller"><span>controller</span></a></h3><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;">// User Controller</span></span>
<span class="line"><span style="color:#FF9492;">package</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.controller;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> java.time.LocalDateTime;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> java.util.List;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> io.swagger.annotations.ApiOperation;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> org.springframework.beans.factory.annotation.Autowired;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> org.springframework.web.bind.annotation.GetMapping;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> org.springframework.web.bind.annotation.PathVariable;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> org.springframework.web.bind.annotation.PostMapping;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> org.springframework.web.bind.annotation.RequestMapping;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> org.springframework.web.bind.annotation.RestController;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.entity.User;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.entity.query.UserQueryBean;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.entity.response.ResponseResult;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.service.IUserService;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">@</span><span style="color:#FF9492;">RestController</span></span>
<span class="line"><span style="color:#F0F3F6;">@</span><span style="color:#FF9492;">RequestMapping</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;/user&quot;</span><span style="color:#F0F3F6;">)</span></span>
<span class="line"><span style="color:#FF9492;">public</span><span style="color:#FF9492;"> class</span><span style="color:#FFB757;"> UserController</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">    @</span><span style="color:#FF9492;">Autowired</span></span>
<span class="line"><span style="color:#FF9492;">    private</span><span style="color:#F0F3F6;"> IUserService</span><span style="color:#F0F3F6;"> userService;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;">    /**</span></span>
<span class="line"><span style="color:#BDC4CC;">     * </span><span style="color:#FF9492;">@param</span><span style="color:#FFB757;"> user</span><span style="color:#BDC4CC;"> user param</span></span>
<span class="line"><span style="color:#BDC4CC;">     * </span><span style="color:#FF9492;">@return</span><span style="color:#BDC4CC;"> user</span></span>
<span class="line"><span style="color:#BDC4CC;">     */</span></span>
<span class="line"><span style="color:#F0F3F6;">    @</span><span style="color:#FF9492;">ApiOperation</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;Add/Edit User&quot;</span><span style="color:#F0F3F6;">)</span></span>
<span class="line"><span style="color:#F0F3F6;">    @</span><span style="color:#FF9492;">PostMapping</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;add&quot;</span><span style="color:#F0F3F6;">)</span></span>
<span class="line"><span style="color:#FF9492;">    public</span><span style="color:#F0F3F6;"> ResponseResult&lt;</span><span style="color:#FF9492;">User</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#DBB7FF;">add</span><span style="color:#F0F3F6;">(User </span><span style="color:#FFB757;">user</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#FF9492;">        if</span><span style="color:#F0F3F6;"> (user.</span><span style="color:#DBB7FF;">getId</span><span style="color:#F0F3F6;">()</span><span style="color:#FF9492;">==</span><span style="color:#91CBFF;">null</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#F0F3F6;">            user.</span><span style="color:#DBB7FF;">setCreateTime</span><span style="color:#F0F3F6;">(LocalDateTime.</span><span style="color:#DBB7FF;">now</span><span style="color:#F0F3F6;">());</span></span>
<span class="line"><span style="color:#F0F3F6;">            user.</span><span style="color:#DBB7FF;">setUpdateTime</span><span style="color:#F0F3F6;">(LocalDateTime.</span><span style="color:#DBB7FF;">now</span><span style="color:#F0F3F6;">());</span></span>
<span class="line"><span style="color:#F0F3F6;">            userService.</span><span style="color:#DBB7FF;">save</span><span style="color:#F0F3F6;">(user);</span></span>
<span class="line"><span style="color:#F0F3F6;">        } </span><span style="color:#FF9492;">else</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"><span style="color:#F0F3F6;">            user.</span><span style="color:#DBB7FF;">setUpdateTime</span><span style="color:#F0F3F6;">(LocalDateTime.</span><span style="color:#DBB7FF;">now</span><span style="color:#F0F3F6;">());</span></span>
<span class="line"><span style="color:#F0F3F6;">            userService.</span><span style="color:#DBB7FF;">update</span><span style="color:#F0F3F6;">(user);</span></span>
<span class="line"><span style="color:#F0F3F6;">        }</span></span>
<span class="line"><span style="color:#FF9492;">        return</span><span style="color:#F0F3F6;"> ResponseResult.</span><span style="color:#DBB7FF;">success</span><span style="color:#F0F3F6;">(userService.</span><span style="color:#DBB7FF;">findById</span><span style="color:#F0F3F6;">(user.</span><span style="color:#DBB7FF;">getId</span><span style="color:#F0F3F6;">()));</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;">    /**</span></span>
<span class="line"><span style="color:#BDC4CC;">     * </span><span style="color:#FF9492;">@return</span><span style="color:#BDC4CC;"> user list</span></span>
<span class="line"><span style="color:#BDC4CC;">     */</span></span>
<span class="line"><span style="color:#F0F3F6;">    @</span><span style="color:#FF9492;">ApiOperation</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;Query User One&quot;</span><span style="color:#F0F3F6;">)</span></span>
<span class="line"><span style="color:#F0F3F6;">    @</span><span style="color:#FF9492;">GetMapping</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;edit/{userId}&quot;</span><span style="color:#F0F3F6;">)</span></span>
<span class="line"><span style="color:#FF9492;">    public</span><span style="color:#F0F3F6;"> ResponseResult&lt;</span><span style="color:#FF9492;">User</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#DBB7FF;">edit</span><span style="color:#F0F3F6;">(@</span><span style="color:#FF9492;">PathVariable</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;userId&quot;</span><span style="color:#F0F3F6;">) Long </span><span style="color:#FFB757;">userId</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#FF9492;">        return</span><span style="color:#F0F3F6;"> ResponseResult.</span><span style="color:#DBB7FF;">success</span><span style="color:#F0F3F6;">(userService.</span><span style="color:#DBB7FF;">findById</span><span style="color:#F0F3F6;">(userId));</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;">    /**</span></span>
<span class="line"><span style="color:#BDC4CC;">     * </span><span style="color:#FF9492;">@return</span><span style="color:#BDC4CC;"> user list</span></span>
<span class="line"><span style="color:#BDC4CC;">     */</span></span>
<span class="line"><span style="color:#F0F3F6;">    @</span><span style="color:#FF9492;">ApiOperation</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;Query User List&quot;</span><span style="color:#F0F3F6;">)</span></span>
<span class="line"><span style="color:#F0F3F6;">    @</span><span style="color:#FF9492;">GetMapping</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;list&quot;</span><span style="color:#F0F3F6;">)</span></span>
<span class="line"><span style="color:#FF9492;">    public</span><span style="color:#F0F3F6;"> ResponseResult&lt;List&lt;</span><span style="color:#FF9492;">User</span><span style="color:#F0F3F6;">&gt;&gt; </span><span style="color:#DBB7FF;">list</span><span style="color:#F0F3F6;">(UserQueryBean </span><span style="color:#FFB757;">userQueryBean</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#FF9492;">        return</span><span style="color:#F0F3F6;"> ResponseResult.</span><span style="color:#DBB7FF;">success</span><span style="color:#F0F3F6;">(userService.</span><span style="color:#DBB7FF;">findList</span><span style="color:#F0F3F6;">(userQueryBean));</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span></code></pre></div><div class="language-java" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;">// Role Controller</span></span>
<span class="line"><span style="color:#FF9492;">package</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.controller;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> java.util.List;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> io.swagger.annotations.ApiOperation;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> org.springframework.beans.factory.annotation.Autowired;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> org.springframework.web.bind.annotation.GetMapping;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> org.springframework.web.bind.annotation.RequestMapping;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> org.springframework.web.bind.annotation.RestController;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.entity.Role;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.entity.query.RoleQueryBean;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.entity.response.ResponseResult;</span></span>
<span class="line"><span style="color:#FF9492;">import</span><span style="color:#F0F3F6;"> tech.springboot.mysql57.mybatis.xml.service.IRoleService;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">@</span><span style="color:#FF9492;">RestController</span></span>
<span class="line"><span style="color:#F0F3F6;">@</span><span style="color:#FF9492;">RequestMapping</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;/role&quot;</span><span style="color:#F0F3F6;">)</span></span>
<span class="line"><span style="color:#FF9492;">public</span><span style="color:#FF9492;"> class</span><span style="color:#FFB757;"> RoleController</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">    @</span><span style="color:#FF9492;">Autowired</span></span>
<span class="line"><span style="color:#FF9492;">    private</span><span style="color:#F0F3F6;"> IRoleService</span><span style="color:#F0F3F6;"> roleService;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;">    /**</span></span>
<span class="line"><span style="color:#BDC4CC;">     * </span><span style="color:#FF9492;">@return</span><span style="color:#BDC4CC;"> user list</span></span>
<span class="line"><span style="color:#BDC4CC;">     */</span></span>
<span class="line"><span style="color:#F0F3F6;">    @</span><span style="color:#FF9492;">ApiOperation</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;Query Role List&quot;</span><span style="color:#F0F3F6;">)</span></span>
<span class="line"><span style="color:#F0F3F6;">    @</span><span style="color:#FF9492;">GetMapping</span><span style="color:#F0F3F6;">(</span><span style="color:#ADDCFF;">&quot;list&quot;</span><span style="color:#F0F3F6;">)</span></span>
<span class="line"><span style="color:#FF9492;">    public</span><span style="color:#F0F3F6;"> ResponseResult&lt;List&lt;</span><span style="color:#FF9492;">Role</span><span style="color:#F0F3F6;">&gt;&gt; </span><span style="color:#DBB7FF;">list</span><span style="color:#F0F3F6;">(RoleQueryBean </span><span style="color:#FFB757;">roleQueryBean</span><span style="color:#F0F3F6;">) {</span></span>
<span class="line"><span style="color:#FF9492;">        return</span><span style="color:#F0F3F6;"> ResponseResult.</span><span style="color:#DBB7FF;">success</span><span style="color:#F0F3F6;">(roleService.</span><span style="color:#DBB7FF;">findList</span><span style="color:#F0F3F6;">(roleQueryBean));</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span></code></pre></div>`,63)]))}const r=n(o,[["render",e],["__file","springBoot集成MyBatis—XML方式.html.vue"]]),y=JSON.parse('{"path":"/java/springBoot/springBoot%E9%9B%86%E6%88%90MyBatis%E2%80%94XML%E6%96%B9%E5%BC%8F.html","title":"","lang":"zh-CN","frontmatter":{"description":"准备知识 什么是MyBatis MyBatis 是一个优秀的持久层框架，支持定制化 SQL、存储过程以及高级映射。它内部封装了 JDBC，使开发者只需要关注sql语句本身，而不需要花费精力去处理加载驱动、创建连接、创建statement等繁杂的过程。 MyBatis 通过xml或注解的方式将要执行的各种statement配置起来，并通过 java 对象...","head":[["meta",{"property":"og:url","content":"https://0oWSQo0.github.io/wsq-blog/java/springBoot/springBoot%E9%9B%86%E6%88%90MyBatis%E2%80%94XML%E6%96%B9%E5%BC%8F.html"}],["meta",{"property":"og:description","content":"准备知识 什么是MyBatis MyBatis 是一个优秀的持久层框架，支持定制化 SQL、存储过程以及高级映射。它内部封装了 JDBC，使开发者只需要关注sql语句本身，而不需要花费精力去处理加载驱动、创建连接、创建statement等繁杂的过程。 MyBatis 通过xml或注解的方式将要执行的各种statement配置起来，并通过 java 对象..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-11-01T01:55:29.000Z"}],["meta",{"property":"article:modified_time","content":"2024-11-01T01:55:29.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-11-01T01:55:29.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"WSQ\\",\\"url\\":\\"https://0oWSQo0.github.com\\"}]}"]]},"headers":[{"level":2,"title":"准备知识","slug":"准备知识","link":"#准备知识","children":[{"level":3,"title":"什么是MyBatis","slug":"什么是mybatis","link":"#什么是mybatis","children":[]},{"level":3,"title":"为什么说MyBatis是半自动ORM？","slug":"为什么说mybatis是半自动orm","link":"#为什么说mybatis是半自动orm","children":[]}]},{"level":2,"title":"MyBatis栈技术演进","slug":"mybatis栈技术演进","link":"#mybatis栈技术演进","children":[{"level":3,"title":"JDBC，自行封装JDBCUtil","slug":"jdbc-自行封装jdbcutil","link":"#jdbc-自行封装jdbcutil","children":[]},{"level":3,"title":"IBatis","slug":"ibatis","link":"#ibatis","children":[]},{"level":3,"title":"MyBatis","slug":"mybatis","link":"#mybatis","children":[]},{"level":3,"title":"MyBatis衍生：代码生成工具等","slug":"mybatis衍生-代码生成工具等","link":"#mybatis衍生-代码生成工具等","children":[]},{"level":3,"title":"Spring+MyBatis基于注解的配置集成","slug":"spring-mybatis基于注解的配置集成","link":"#spring-mybatis基于注解的配置集成","children":[]},{"level":3,"title":"MyBatis-Plus","slug":"mybatis-plus","link":"#mybatis-plus","children":[]}]},{"level":2,"title":"简单示例","slug":"简单示例","link":"#简单示例","children":[{"level":3,"title":"准备DB和依赖配置","slug":"准备db和依赖配置","link":"#准备db和依赖配置","children":[]},{"level":3,"title":"Mapper文件","slug":"mapper文件","link":"#mapper文件","children":[]},{"level":3,"title":"定义dao","slug":"定义dao","link":"#定义dao","children":[]},{"level":3,"title":"定义Service接口和实现类","slug":"定义service接口和实现类","link":"#定义service接口和实现类","children":[]},{"level":3,"title":"controller","slug":"controller","link":"#controller","children":[]}]}],"git":{"createdTime":1730426129000,"updatedTime":1730426129000,"contributors":[{"name":"WSQ","email":"592786982@qq.com","commits":1}]},"readingTime":{"minutes":11.6,"words":3479},"filePathRelative":"java/springBoot/springBoot集成MyBatis—XML方式.md","localizedDate":"2024年11月1日","autoDesc":true}');export{r as comp,y as data};
