import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,d as o,o as l}from"./app-Coac0FJ0.js";const p={};function e(F,s){return l(),n("div",null,s[0]||(s[0]=[o(`<p>除了 5 种基础数据类型，还有 3 种特殊的数据类型，分别是<code>HyperLogLogs</code>（基数统计），<code>Bitmaps</code> (位图) 和<code>geospatial</code>（地理位置）。</p><h2 id="hyperloglogs-基数统计" tabindex="-1"><a class="header-anchor" href="#hyperloglogs-基数统计"><span>HyperLogLogs（基数统计）</span></a></h2><p>Redis 2.8.9 版本更新了<code>Hyperloglog</code>数据结构！</p><p><strong>什么是基数？</strong><br> 举个例子，<code>A = {1, 2, 3, 4, 5}， B = {3, 5, 6, 7, 9}</code>；那么基数（不重复的元素）<code>= 1, 2, 4, 6, 7, 9</code>； （允许容错，即可以接受一定误差）</p><p><strong>HyperLogLogs 基数统计用来解决什么问题？</strong></p><p>这个结构可以非常省内存的去统计各种计数，比如注册 IP 数、每日访问 IP 数、页面实时 UV、在线用户数，共同好友数等。</p><p><strong>它的优势体现在哪？</strong></p><p>一个大型的网站，每天 IP 比如有 100 万，粗算一个 IP 消耗 15 字节，那么 100 万个 IP 就是 15M。而<code>HyperLogLog</code>在 Redis 中每个键占用的内容都是 12K，理论存储近似接近 2^64 个值，不管存储的内容是什么，它一个基于基数估算的算法，只能比较准确的估算出基数，可以使用少量固定的内存去存储并识别集合中的唯一元素。而且这个估算的基数并不一定准确，是一个带有<code>0.81%</code>标准错误的近似值（对于可以接受一定容错的业务场景，比如IP数统计，UV等，是可以忽略不计的）。</p><p><strong>相关命令使用</strong></p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">pfadd</span><span style="color:#ADDCFF;"> key1</span><span style="color:#ADDCFF;"> a</span><span style="color:#ADDCFF;"> b</span><span style="color:#ADDCFF;"> c</span><span style="color:#ADDCFF;"> d</span><span style="color:#ADDCFF;"> e</span><span style="color:#ADDCFF;"> f</span><span style="color:#ADDCFF;"> g</span><span style="color:#ADDCFF;"> h</span><span style="color:#ADDCFF;"> i</span><span style="color:#BDC4CC;">	# 创建第一组元素</span></span>
<span class="line"><span style="color:#F0F3F6;">(</span><span style="color:#FFB757;">integer</span><span style="color:#F0F3F6;">) </span><span style="color:#FFB757;">1</span></span>
<span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">pfcount</span><span style="color:#ADDCFF;"> key1</span><span style="color:#BDC4CC;">					# 统计元素的基数数量</span></span>
<span class="line"><span style="color:#F0F3F6;">(</span><span style="color:#FFB757;">integer</span><span style="color:#F0F3F6;">) </span><span style="color:#FFB757;">9</span></span>
<span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">pfadd</span><span style="color:#ADDCFF;"> key2</span><span style="color:#ADDCFF;"> c</span><span style="color:#ADDCFF;"> j</span><span style="color:#ADDCFF;"> k</span><span style="color:#ADDCFF;"> l</span><span style="color:#ADDCFF;"> m</span><span style="color:#ADDCFF;"> e</span><span style="color:#ADDCFF;"> g</span><span style="color:#ADDCFF;"> a</span><span style="color:#BDC4CC;">		# 创建第二组元素</span></span>
<span class="line"><span style="color:#F0F3F6;">(</span><span style="color:#FFB757;">integer</span><span style="color:#F0F3F6;">) </span><span style="color:#FFB757;">1</span></span>
<span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">pfcount</span><span style="color:#ADDCFF;"> key2</span></span>
<span class="line"><span style="color:#F0F3F6;">(</span><span style="color:#FFB757;">integer</span><span style="color:#F0F3F6;">) </span><span style="color:#FFB757;">8</span></span>
<span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">pfmerge</span><span style="color:#ADDCFF;"> key3</span><span style="color:#ADDCFF;"> key1</span><span style="color:#ADDCFF;"> key2</span><span style="color:#BDC4CC;">			# 合并两组：key1 key2 -&gt; key3 并集</span></span>
<span class="line"><span style="color:#FFB757;">OK</span></span>
<span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">pfcount</span><span style="color:#ADDCFF;"> key3</span></span>
<span class="line"><span style="color:#F0F3F6;">(</span><span style="color:#FFB757;">integer</span><span style="color:#F0F3F6;">) </span><span style="color:#FFB757;">13</span></span></code></pre></div><h2 id="bitmap-位存储" tabindex="-1"><a class="header-anchor" href="#bitmap-位存储"><span>Bitmap （位存储）</span></a></h2><p><code>Bitmap</code>即位图数据结构，都是操作二进制位来进行记录，只有 0 和 1 两个状态。</p><p><strong>用来解决什么问题？</strong></p><p>比如：统计用户信息，活跃，不活跃！登录，未登录！打卡，不打卡！两个状态的，都可以使用<code>Bitmaps</code>！</p><p>如果存储一年的打卡状态需要多少内存呢？ 365 天 = 365 bit 1字节 = 8bit 46 个字节左右！</p><p><strong>相关命令使用</strong></p><p>使用<code>bitmap</code>来记录周一到周日的打卡！周一：1 周二：0 周三：0 周四：1 ......</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">setbit</span><span style="color:#ADDCFF;"> sign</span><span style="color:#91CBFF;"> 0</span><span style="color:#91CBFF;"> 1</span></span>
<span class="line"><span style="color:#F0F3F6;">(</span><span style="color:#FFB757;">integer</span><span style="color:#F0F3F6;">) </span><span style="color:#FFB757;">0</span></span>
<span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">setbit</span><span style="color:#ADDCFF;"> sign</span><span style="color:#91CBFF;"> 1</span><span style="color:#91CBFF;"> 1</span></span>
<span class="line"><span style="color:#F0F3F6;">(</span><span style="color:#FFB757;">integer</span><span style="color:#F0F3F6;">) </span><span style="color:#FFB757;">0</span></span>
<span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">setbit</span><span style="color:#ADDCFF;"> sign</span><span style="color:#91CBFF;"> 2</span><span style="color:#91CBFF;"> 0</span></span>
<span class="line"><span style="color:#F0F3F6;">(</span><span style="color:#FFB757;">integer</span><span style="color:#F0F3F6;">) </span><span style="color:#FFB757;">0</span></span>
<span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">setbit</span><span style="color:#ADDCFF;"> sign</span><span style="color:#91CBFF;"> 3</span><span style="color:#91CBFF;"> 1</span></span>
<span class="line"><span style="color:#F0F3F6;">(</span><span style="color:#FFB757;">integer</span><span style="color:#F0F3F6;">) </span><span style="color:#FFB757;">0</span></span>
<span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">setbit</span><span style="color:#ADDCFF;"> sign</span><span style="color:#91CBFF;"> 4</span><span style="color:#91CBFF;"> 0</span></span>
<span class="line"><span style="color:#F0F3F6;">(</span><span style="color:#FFB757;">integer</span><span style="color:#F0F3F6;">) </span><span style="color:#FFB757;">0</span></span>
<span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">setbit</span><span style="color:#ADDCFF;"> sign</span><span style="color:#91CBFF;"> 5</span><span style="color:#91CBFF;"> 0</span></span>
<span class="line"><span style="color:#F0F3F6;">(</span><span style="color:#FFB757;">integer</span><span style="color:#F0F3F6;">) </span><span style="color:#FFB757;">0</span></span>
<span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">setbit</span><span style="color:#ADDCFF;"> sign</span><span style="color:#91CBFF;"> 6</span><span style="color:#91CBFF;"> 1</span></span>
<span class="line"><span style="color:#F0F3F6;">(</span><span style="color:#FFB757;">integer</span><span style="color:#F0F3F6;">) </span><span style="color:#FFB757;">0</span></span></code></pre></div><p>查看某一天是否有打卡！</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">getbit</span><span style="color:#ADDCFF;"> sign</span><span style="color:#91CBFF;"> 3</span></span>
<span class="line"><span style="color:#F0F3F6;">(</span><span style="color:#FFB757;">integer</span><span style="color:#F0F3F6;">) </span><span style="color:#FFB757;">1</span></span>
<span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">getbit</span><span style="color:#ADDCFF;"> sign</span><span style="color:#91CBFF;"> 5</span></span>
<span class="line"><span style="color:#F0F3F6;">(</span><span style="color:#FFB757;">integer</span><span style="color:#F0F3F6;">) </span><span style="color:#FFB757;">0</span></span></code></pre></div><p>统计操作，统计 打卡的天数！</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">bitcount</span><span style="color:#ADDCFF;"> sign</span><span style="color:#BDC4CC;"> # 统计这周的打卡记录，就可以看到是否有全勤！</span></span>
<span class="line"><span style="color:#F0F3F6;">(</span><span style="color:#FFB757;">integer</span><span style="color:#F0F3F6;">) </span><span style="color:#FFB757;">3</span></span></code></pre></div><h2 id="geospatial-地理位置" tabindex="-1"><a class="header-anchor" href="#geospatial-地理位置"><span>geospatial (地理位置)</span></a></h2><p>Redis 的<code>Geo</code>在 Redis 3.2 版本就推出了！这个功能可以推算地理位置的信息：两地之间的距离，方圆几里的人。</p><h3 id="geoadd" tabindex="-1"><a class="header-anchor" href="#geoadd"><span>geoadd</span></a></h3><p>添加地理位置</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">geoadd</span><span style="color:#ADDCFF;"> china:city</span><span style="color:#91CBFF;"> 118.76</span><span style="color:#91CBFF;"> 32.04</span><span style="color:#ADDCFF;"> manjing</span><span style="color:#91CBFF;"> 112.55</span><span style="color:#91CBFF;"> 37.86</span><span style="color:#ADDCFF;"> taiyuan</span><span style="color:#91CBFF;"> 123.43</span><span style="color:#91CBFF;"> 41.80</span><span style="color:#ADDCFF;"> shenyang</span></span>
<span class="line"><span style="color:#F0F3F6;">(</span><span style="color:#FFB757;">integer</span><span style="color:#F0F3F6;">) </span><span style="color:#FFB757;">3</span></span>
<span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">geoadd</span><span style="color:#ADDCFF;"> china:city</span><span style="color:#91CBFF;"> 144.05</span><span style="color:#91CBFF;"> 22.52</span><span style="color:#ADDCFF;"> shengzhen</span><span style="color:#91CBFF;"> 120.16</span><span style="color:#91CBFF;"> 30.24</span><span style="color:#ADDCFF;"> hangzhou</span><span style="color:#91CBFF;"> 108.96</span><span style="color:#91CBFF;"> 34.26</span><span style="color:#ADDCFF;"> xian</span></span>
<span class="line"><span style="color:#F0F3F6;">(</span><span style="color:#FFB757;">integer</span><span style="color:#F0F3F6;">) </span><span style="color:#FFB757;">3</span></span></code></pre></div><p>规则<br> 两级无法直接添加，我们一般会下载城市数据(这个网址可以查询 GEO： http://www.jsons.cn/lngcode)！</p><ul><li>有效的经度从 -180 度到 180 度。</li><li>有效的纬度从 -85.05112878 度到 85.05112878 度。</li></ul><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;"># 当坐标位置超出上述指定范围时，该命令将会返回一个错误。</span></span>
<span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">geoadd</span><span style="color:#ADDCFF;"> china:city</span><span style="color:#91CBFF;"> 39.90</span><span style="color:#91CBFF;"> 116.40</span><span style="color:#ADDCFF;"> beijin</span></span>
<span class="line"><span style="color:#F0F3F6;">(</span><span style="color:#FFB757;">error</span><span style="color:#F0F3F6;">) </span><span style="color:#FFB757;">ERR</span><span style="color:#ADDCFF;"> invalid</span><span style="color:#ADDCFF;"> longitude,latitude</span><span style="color:#ADDCFF;"> pair</span><span style="color:#ADDCFF;"> 39.900000,116.400000</span></span></code></pre></div><h3 id="geopos" tabindex="-1"><a class="header-anchor" href="#geopos"><span>geopos</span></a></h3><p>获取指定的成员的经度和纬度</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">geopos</span><span style="color:#ADDCFF;"> china:city</span><span style="color:#ADDCFF;"> taiyuan</span><span style="color:#ADDCFF;"> manjing</span></span>
<span class="line"><span style="color:#FFB757;">1</span><span style="color:#F0F3F6;">) 1) </span><span style="color:#ADDCFF;">&quot;112.54999905824661255&quot;</span></span>
<span class="line"><span style="color:#FFB757;">   1</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;37.86000073876942196&quot;</span></span>
<span class="line"><span style="color:#FFB757;">2</span><span style="color:#F0F3F6;">) 1) </span><span style="color:#ADDCFF;">&quot;118.75999957323074341&quot;</span></span>
<span class="line"><span style="color:#FFB757;">   1</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;32.03999960287850968&quot;</span></span></code></pre></div><p>获得当前定位, 一定是一个坐标值!</p><h3 id="geodist" tabindex="-1"><a class="header-anchor" href="#geodist"><span>geodist</span></a></h3><p>如果不存在, 返回空</p><p>单位如下：</p><ul><li><code>m</code></li><li><code>km</code></li><li><code>mi</code>英里</li><li><code>ft</code>英尺</li></ul><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">geodist</span><span style="color:#ADDCFF;"> china:city</span><span style="color:#ADDCFF;"> taiyuan</span><span style="color:#ADDCFF;"> shenyang</span><span style="color:#ADDCFF;"> m</span></span>
<span class="line"><span style="color:#FFB757;">&quot;1026439.1070&quot;</span></span>
<span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">geodist</span><span style="color:#ADDCFF;"> china:city</span><span style="color:#ADDCFF;"> taiyuan</span><span style="color:#ADDCFF;"> shenyang</span><span style="color:#ADDCFF;"> km</span></span>
<span class="line"><span style="color:#FFB757;">&quot;1026.4391&quot;</span></span></code></pre></div><h3 id="georadius" tabindex="-1"><a class="header-anchor" href="#georadius"><span>georadius</span></a></h3><p>附近的人 ==&gt; 获得所有附近的人的地址, 定位, 通过半径来查询</p><p>获得指定数量的人</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">georadius</span><span style="color:#ADDCFF;"> china:city</span><span style="color:#91CBFF;"> 110</span><span style="color:#91CBFF;"> 30</span><span style="color:#91CBFF;"> 1000</span><span style="color:#ADDCFF;"> km</span><span style="color:#ADDCFF;">			以</span><span style="color:#ADDCFF;"> 100,30</span><span style="color:#ADDCFF;"> 这个坐标为中心,</span><span style="color:#ADDCFF;"> 寻找半径为1000km的城市</span></span>
<span class="line"><span style="color:#FFB757;">1</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;xian&quot;</span></span>
<span class="line"><span style="color:#FFB757;">2</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;hangzhou&quot;</span></span>
<span class="line"><span style="color:#FFB757;">3</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;manjing&quot;</span></span>
<span class="line"><span style="color:#FFB757;">4</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;taiyuan&quot;</span></span>
<span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">georadius</span><span style="color:#ADDCFF;"> china:city</span><span style="color:#91CBFF;"> 110</span><span style="color:#91CBFF;"> 30</span><span style="color:#91CBFF;"> 500</span><span style="color:#ADDCFF;"> km</span></span>
<span class="line"><span style="color:#FFB757;">1</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;xian&quot;</span></span>
<span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">georadius</span><span style="color:#ADDCFF;"> china:city</span><span style="color:#91CBFF;"> 110</span><span style="color:#91CBFF;"> 30</span><span style="color:#91CBFF;"> 500</span><span style="color:#ADDCFF;"> km</span><span style="color:#ADDCFF;"> withdist</span></span>
<span class="line"><span style="color:#FFB757;">1</span><span style="color:#F0F3F6;">) 1) </span><span style="color:#ADDCFF;">&quot;xian&quot;</span></span>
<span class="line"><span style="color:#FFB757;">   2</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;483.8340&quot;</span></span>
<span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">georadius</span><span style="color:#ADDCFF;"> china:city</span><span style="color:#91CBFF;"> 110</span><span style="color:#91CBFF;"> 30</span><span style="color:#91CBFF;"> 1000</span><span style="color:#ADDCFF;"> km</span><span style="color:#ADDCFF;"> withcoord</span><span style="color:#ADDCFF;"> withdist</span><span style="color:#ADDCFF;"> count</span><span style="color:#91CBFF;"> 2</span></span>
<span class="line"><span style="color:#FFB757;">1</span><span style="color:#F0F3F6;">) 1) </span><span style="color:#ADDCFF;">&quot;xian&quot;</span></span>
<span class="line"><span style="color:#FFB757;">   2</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;483.8340&quot;</span></span>
<span class="line"><span style="color:#FFB757;">   3</span><span style="color:#F0F3F6;">) 1) </span><span style="color:#ADDCFF;">&quot;108.96000176668167114&quot;</span></span>
<span class="line"><span style="color:#FFB757;">      2</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;34.25999964418929977&quot;</span></span>
<span class="line"><span style="color:#FFB757;">2</span><span style="color:#F0F3F6;">) 1) </span><span style="color:#ADDCFF;">&quot;manjing&quot;</span></span>
<span class="line"><span style="color:#FFB757;">   2</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;864.9816&quot;</span></span>
<span class="line"><span style="color:#FFB757;">   3</span><span style="color:#F0F3F6;">) 1) </span><span style="color:#ADDCFF;">&quot;118.75999957323074341&quot;</span></span>
<span class="line"><span style="color:#FFB757;">      2</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;32.03999960287850968&quot;</span></span></code></pre></div><p>参数 key 经度 纬度 半径 单位 [显示结果的经度和纬度] [显示结果的距离] [显示的结果的数量]</p><h3 id="georadiusbymember" tabindex="-1"><a class="header-anchor" href="#georadiusbymember"><span>georadiusbymember</span></a></h3><p>显示与指定成员一定半径范围内的其他成员</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">georadiusbymember</span><span style="color:#ADDCFF;"> china:city</span><span style="color:#ADDCFF;"> taiyuan</span><span style="color:#91CBFF;"> 1000</span><span style="color:#ADDCFF;"> km</span></span>
<span class="line"><span style="color:#FFB757;">1</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;manjing&quot;</span></span>
<span class="line"><span style="color:#FFB757;">2</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;taiyuan&quot;</span></span>
<span class="line"><span style="color:#FFB757;">3</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;xian&quot;</span></span>
<span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">georadiusbymember</span><span style="color:#ADDCFF;"> china:city</span><span style="color:#ADDCFF;"> taiyuan</span><span style="color:#91CBFF;"> 1000</span><span style="color:#ADDCFF;"> km</span><span style="color:#ADDCFF;"> withcoord</span><span style="color:#ADDCFF;"> withdist</span><span style="color:#ADDCFF;"> count</span><span style="color:#91CBFF;"> 2</span></span>
<span class="line"><span style="color:#FFB757;">1</span><span style="color:#F0F3F6;">) 1) </span><span style="color:#ADDCFF;">&quot;taiyuan&quot;</span></span>
<span class="line"><span style="color:#FFB757;">   2</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;0.0000&quot;</span></span>
<span class="line"><span style="color:#FFB757;">   3</span><span style="color:#F0F3F6;">) 1) </span><span style="color:#ADDCFF;">&quot;112.54999905824661255&quot;</span></span>
<span class="line"><span style="color:#FFB757;">      2</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;37.86000073876942196&quot;</span></span>
<span class="line"><span style="color:#FFB757;">2</span><span style="color:#F0F3F6;">) 1) </span><span style="color:#ADDCFF;">&quot;xian&quot;</span></span>
<span class="line"><span style="color:#FFB757;">   2</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;514.2264&quot;</span></span>
<span class="line"><span style="color:#FFB757;">   3</span><span style="color:#F0F3F6;">) 1) </span><span style="color:#ADDCFF;">&quot;108.96000176668167114&quot;</span></span>
<span class="line"><span style="color:#FFB757;">      2</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;34.25999964418929977&quot;</span></span></code></pre></div><p>参数与<code>georadius</code>一样。</p><h3 id="geohash-较少使用" tabindex="-1"><a class="header-anchor" href="#geohash-较少使用"><span>geohash(较少使用)</span></a></h3><p>该命令返回 11 个字符的<code>hash</code>字符串</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">geohash</span><span style="color:#ADDCFF;"> china:city</span><span style="color:#ADDCFF;"> taiyuan</span><span style="color:#ADDCFF;"> shenyang</span></span>
<span class="line"><span style="color:#FFB757;">1</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;ww8p3hhqmp0&quot;</span></span>
<span class="line"><span style="color:#FFB757;">2</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;wxrvb9qyxk0&quot;</span></span></code></pre></div><p>将二维的经纬度转换为一维的字符串, 如果两个字符串越接近, 则距离越近。</p><h3 id="底层" tabindex="-1"><a class="header-anchor" href="#底层"><span>底层</span></a></h3><p><code>geo</code>底层的实现原理实际上就是<code>Zset</code>，我们可以通过<code>Zset</code>命令来操作<code>geo</code>。</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">type</span><span style="color:#ADDCFF;"> china:city</span></span>
<span class="line"><span style="color:#FFB757;">zset</span></span></code></pre></div><p>查看全部元素 删除指定的元素</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">zrange</span><span style="color:#ADDCFF;"> china:city</span><span style="color:#91CBFF;"> 0</span><span style="color:#91CBFF;"> -1</span><span style="color:#ADDCFF;"> withscores</span></span>
<span class="line"><span style="color:#FFB757;"> 1</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;xian&quot;</span></span>
<span class="line"><span style="color:#FFB757;"> 2</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;4040115445396757&quot;</span></span>
<span class="line"><span style="color:#FFB757;"> 3</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;hangzhou&quot;</span></span>
<span class="line"><span style="color:#FFB757;"> 4</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;4054133997236782&quot;</span></span>
<span class="line"><span style="color:#FFB757;"> 5</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;manjing&quot;</span></span>
<span class="line"><span style="color:#FFB757;"> 6</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;4066006694128997&quot;</span></span>
<span class="line"><span style="color:#FFB757;"> 7</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;taiyuan&quot;</span></span>
<span class="line"><span style="color:#FFB757;"> 8</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;4068216047500484&quot;</span></span>
<span class="line"><span style="color:#FFB757;"> 9</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;shenyang&quot;</span></span>
<span class="line"><span style="color:#FFB757;">1</span><span style="color:#F0F3F6;">)  </span><span style="color:#ADDCFF;">&quot;4072519231994779&quot;</span></span>
<span class="line"><span style="color:#FFB757;">2</span><span style="color:#F0F3F6;">)  </span><span style="color:#ADDCFF;">&quot;shengzhen&quot;</span></span>
<span class="line"><span style="color:#FFB757;">3</span><span style="color:#F0F3F6;">)  </span><span style="color:#ADDCFF;">&quot;4154606886655324&quot;</span></span>
<span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">zrem</span><span style="color:#ADDCFF;"> china:city</span><span style="color:#ADDCFF;"> manjing</span></span>
<span class="line"><span style="color:#F0F3F6;">(</span><span style="color:#FFB757;">integer</span><span style="color:#F0F3F6;">) </span><span style="color:#FFB757;">1</span></span>
<span class="line"><span style="color:#FFB757;">127.0.0.1:6379</span><span style="color:#F0F3F6;">&gt; </span><span style="color:#ADDCFF;">zrange</span><span style="color:#ADDCFF;"> china:city</span><span style="color:#91CBFF;"> 0</span><span style="color:#91CBFF;"> -1</span></span>
<span class="line"><span style="color:#FFB757;">1</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;xian&quot;</span></span>
<span class="line"><span style="color:#FFB757;">2</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;hangzhou&quot;</span></span>
<span class="line"><span style="color:#FFB757;">3</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;taiyuan&quot;</span></span>
<span class="line"><span style="color:#FFB757;">4</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;shenyang&quot;</span></span>
<span class="line"><span style="color:#FFB757;">5</span><span style="color:#F0F3F6;">) </span><span style="color:#ADDCFF;">&quot;shengzhen&quot;</span></span></code></pre></div>`,57)]))}const r=a(p,[["render",e],["__file","Redis特殊数据类型.html.vue"]]),y=JSON.parse('{"path":"/sql/redis/Redis%E7%89%B9%E6%AE%8A%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.html","title":"Redis特殊数据类型","lang":"zh-CN","frontmatter":{"title":"Redis特殊数据类型","date":"2024-07-15T00:00:00.000Z","tags":"redis","categories":"SQL","order":3,"description":"除了 5 种基础数据类型，还有 3 种特殊的数据类型，分别是HyperLogLogs（基数统计），Bitmaps (位图) 和geospatial（地理位置）。 HyperLogLogs（基数统计） Redis 2.8.9 版本更新了Hyperloglog数据结构！ 什么是基数？ 举个例子，A = {1, 2, 3, 4, 5}， B = {3, 5,...","head":[["meta",{"property":"og:url","content":"https://wsq01.github.io/wsq-blog/sql/redis/Redis%E7%89%B9%E6%AE%8A%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.html"}],["meta",{"property":"og:title","content":"Redis特殊数据类型"}],["meta",{"property":"og:description","content":"除了 5 种基础数据类型，还有 3 种特殊的数据类型，分别是HyperLogLogs（基数统计），Bitmaps (位图) 和geospatial（地理位置）。 HyperLogLogs（基数统计） Redis 2.8.9 版本更新了Hyperloglog数据结构！ 什么是基数？ 举个例子，A = {1, 2, 3, 4, 5}， B = {3, 5,..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-04-23T09:49:11.000Z"}],["meta",{"property":"article:published_time","content":"2024-07-15T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-04-23T09:49:11.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Redis特殊数据类型\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-07-15T00:00:00.000Z\\",\\"dateModified\\":\\"2025-04-23T09:49:11.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"WSQ\\",\\"url\\":\\"https://wsq01.github.com\\"}]}"]]},"headers":[{"level":2,"title":"HyperLogLogs（基数统计）","slug":"hyperloglogs-基数统计","link":"#hyperloglogs-基数统计","children":[]},{"level":2,"title":"Bitmap （位存储）","slug":"bitmap-位存储","link":"#bitmap-位存储","children":[]},{"level":2,"title":"geospatial (地理位置)","slug":"geospatial-地理位置","link":"#geospatial-地理位置","children":[{"level":3,"title":"geoadd","slug":"geoadd","link":"#geoadd","children":[]},{"level":3,"title":"geopos","slug":"geopos","link":"#geopos","children":[]},{"level":3,"title":"geodist","slug":"geodist","link":"#geodist","children":[]},{"level":3,"title":"georadius","slug":"georadius","link":"#georadius","children":[]},{"level":3,"title":"georadiusbymember","slug":"georadiusbymember","link":"#georadiusbymember","children":[]},{"level":3,"title":"geohash(较少使用)","slug":"geohash-较少使用","link":"#geohash-较少使用","children":[]},{"level":3,"title":"底层","slug":"底层","link":"#底层","children":[]}]}],"git":{"createdTime":1726034220000,"updatedTime":1745401751000,"contributors":[{"name":"WSQ","email":"592786982@qq.com","commits":2}]},"readingTime":{"minutes":4.66,"words":1399},"filePathRelative":"sql/redis/Redis特殊数据类型.md","localizedDate":"2024年7月15日","autoDesc":true}');export{r as comp,y as data};
