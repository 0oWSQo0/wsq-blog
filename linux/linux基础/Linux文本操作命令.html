<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.52" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://wsq01.github.io/wsq-blog/linux/linux%E5%9F%BA%E7%A1%80/Linux%E6%96%87%E6%9C%AC%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4.html"><meta property="og:title" content="Linux文本操作命令"><meta property="og:description" content="cat：连接文件并打印输出到标准输出设备 cat命令可以用来显示文本文件的内容，也可以把几个文件内容附加到另一个文件中，即连接合并文件。 这两种格式中，前者用于显示文件的内容；后者用于连接合并文件。 注意，cat命令用于查看文件内容时，不论文件内容有多少，都会一次性显示。如果文件非常大，那么文件开头的内容就看不到了。不过 Linux 可以使用PgUp+..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-08-14T07:08:17.000Z"><meta property="article:author" content="WSQ"><meta property="article:published_time" content="2024-02-15T00:00:00.000Z"><meta property="article:modified_time" content="2024-08-14T07:08:17.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Linux文本操作命令","image":[""],"datePublished":"2024-02-15T00:00:00.000Z","dateModified":"2024-08-14T07:08:17.000Z","author":[{"@type":"Person","name":"WSQ","url":"https://wsq01.github.com"}]}</script><title>Linux文本操作命令</title><meta name="description" content="cat：连接文件并打印输出到标准输出设备 cat命令可以用来显示文本文件的内容，也可以把几个文件内容附加到另一个文件中，即连接合并文件。 这两种格式中，前者用于显示文件的内容；后者用于连接合并文件。 注意，cat命令用于查看文件内容时，不论文件内容有多少，都会一次性显示。如果文件非常大，那么文件开头的内容就看不到了。不过 Linux 可以使用PgUp+...">
    <link rel="preload" href="/wsq-blog/assets/style-TGYIZuVS.css" as="style"><link rel="stylesheet" href="/wsq-blog/assets/style-TGYIZuVS.css">
    <link rel="modulepreload" href="/wsq-blog/assets/app-ChJ-FBpc.js"><link rel="modulepreload" href="/wsq-blog/assets/Linux文本操作命令.html-ECT-fanW.js"><link rel="modulepreload" href="/wsq-blog/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/wsq-blog/assets/index.html-Dgc77N9w.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/portfolio.html-K6B4Y9Gn.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-BXiJLQR_.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/disable.html-Bb0WIjxK.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/encrypt.html-C6zFti2h.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/layout.html-B7-6Sr_B.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/markdown.html-CkRUkR7P.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/page.html-CoMMtHML.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/网站收藏.html-UFCzeSRn.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Dockerfile定制镜像.html-DK8CC2nS.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Docker基础.html-Jp-Q3Rof.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Docker的数据卷.html-BH4ZDiS-.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Docker的网络.html-BZnUoRYn.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/docker-compose.html-BZ8lmdCJ.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/热门镜像安装.html-DoTVkggg.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/集成Docker实现一键部署.html-CMpFVvpQ.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linux入门.html-B483BUkl.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linux常用软件安装.html-C-5Po72I.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linux打包压缩命令.html-RcfBoz9P.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linux文件和目录操作命令.html-BfTH2P4f.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linux权限管理.html-BZ8WszJP.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linux用户和用户组管理.html-CGSJJarF.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linux网络相关命令.html-B5hF4nUv.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linux软件安装.html-B-QWPoNP.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linux防火墙详解.html-BXWVMAJj.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linx其它常用工具.html-MjTA2O3p.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL入门.html-CEniakB0.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL基础查询.html-BYxawtIz.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL多表查询.html-CBNP70xd.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL字符集和校对规则.html-DKp8bz6z.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL安装.html-BfcqkF78.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL常用函数汇总.html-yz7Kpcao.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL常见问题.html-_dTg77J1.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL执行流程.html-X5FTCBou.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL操作表中的数据.html-BCDDT37h.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL数据库的基本操作.html-DeUlRwFz.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL数据类型.html-Y11ok-aR.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL数据表的基本操作.html-F32dWBoG.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL约束.html-BOGartr8.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQL运算符.html-CjrmEHmF.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/1.html-BSKlIuRx.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/404.html-Cmw5SDNp.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-CejzS0bN.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-DEL-P9zm.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-Dm-lGEWL.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-BUbgHokN.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-B7tTk291.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-CBNO63QI.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-DYvaczkr.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-B5h7Lbby.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/giscus-D-fkNSKD.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/flowchart-Bz5pFjbH.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/photoswipe.esm-GXRgw7eJ.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/wsq-blog/"><img class="vp-nav-logo" src="/wsq-blog/logo.png" alt><!----><!----></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/wsq-blog/" aria-label="主页"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="logos:google-home" width="1em" height="1em"></iconify-icon><!--]-->主页<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/wsq-blog/js/" aria-label="前端"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:javascript" width="1em" height="1em"></iconify-icon><!--]-->前端<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Java"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:java" width="1em" height="1em"></iconify-icon>Java<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/java/mybatis.html" aria-label="Mybatis"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:spring" width="1em" height="1em"></iconify-icon><!--]-->Mybatis<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/java/spring.html" aria-label="Spring"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:spring" width="1em" height="1em"></iconify-icon><!--]-->Spring<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/java/springBoot.html" aria-label="springBoot"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:spring" width="1em" height="1em"></iconify-icon><!--]-->springBoot<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="SQL"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:azuresqldatabase" width="1em" height="1em"></iconify-icon>SQL<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/sql/redis/" aria-label="Redis"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:redis" width="1em" height="1em"></iconify-icon><!--]-->Redis<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/sql/mysql/" aria-label="MySQL"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:mysql-wordmark" width="1em" height="1em"></iconify-icon><!--]-->MySQL<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Linux"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:centos" width="1em" height="1em"></iconify-icon>Linux<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/wsq-blog/linux/linux%E5%9F%BA%E7%A1%80/" aria-label="linux基础"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:linux" width="1em" height="1em"></iconify-icon><!--]-->linux基础<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/linux/docker/" aria-label="Docker"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:docker" width="1em" height="1em"></iconify-icon><!--]-->Docker<!----></a></li></ul></button></div></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://wsq01.github.com" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/wsq-blog/linux/linux%E5%9F%BA%E7%A1%80/Linux%E5%85%A5%E9%97%A8.html" aria-label="Linux入门"><!---->Linux入门<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/wsq-blog/linux/linux%E5%9F%BA%E7%A1%80/Linux%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4.html" aria-label="Linux文件和目录操作命令"><!---->Linux文件和目录操作命令<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/wsq-blog/linux/linux%E5%9F%BA%E7%A1%80/Linux%E6%96%87%E6%9C%AC%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4.html" aria-label="Linux文本操作命令"><!---->Linux文本操作命令<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/wsq-blog/linux/linux%E5%9F%BA%E7%A1%80/Linux%E6%89%93%E5%8C%85%E5%8E%8B%E7%BC%A9%E5%91%BD%E4%BB%A4.html" aria-label="Linux打包压缩命令"><!---->Linux打包压缩命令<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/wsq-blog/linux/linux%E5%9F%BA%E7%A1%80/Linux%E7%94%A8%E6%88%B7%E5%92%8C%E7%94%A8%E6%88%B7%E7%BB%84%E7%AE%A1%E7%90%86.html" aria-label="Linux用户和用户组管理"><!---->Linux用户和用户组管理<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/wsq-blog/linux/linux%E5%9F%BA%E7%A1%80/Linux%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86.html" aria-label="Linux权限管理"><!---->Linux权限管理<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/wsq-blog/linux/linux%E5%9F%BA%E7%A1%80/Linux%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85.html" aria-label="Linux软件安装"><!---->Linux软件安装<!----></a></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Linux文本操作命令</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://wsq01.github.com" target="_blank" rel="noopener noreferrer">WSQ</a></span><span property="author" content="WSQ"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-02-15T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 34 分钟</span><meta property="timeRequired" content="PT34M"></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color8" role>linux</span><!--]--><meta property="articleSection" content="linux"></span><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color7" role>linux基础</span><!--]--><meta property="keywords" content="linux基础"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#cat-连接文件并打印输出到标准输出设备">cat：连接文件并打印输出到标准输出设备</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#more-分屏显示文件内容">more：分屏显示文件内容</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#head-显示文件开头的内容">head：显示文件开头的内容</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#less-查看文件内容">less：查看文件内容</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#tail-显示文件结尾的内容">tail：显示文件结尾的内容</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#重定向-输入输出重定向">重定向（输入输出重定向）</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#输入重定向">输入重定向</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#输出重定向">输出重定向</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#grep-查找文件内容">grep：查找文件内容</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#sed命令">sed命令</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#sed脚本命令">sed脚本命令</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#sed-脚本命令的寻址方式">sed 脚本命令的寻址方式</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#awk命令">awk命令</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#awk-使用数据字段变量">awk 使用数据字段变量</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#awk-脚本命令使用多个命令">awk 脚本命令使用多个命令</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#awk从文件中读取程序">awk从文件中读取程序</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#awk-begin关键字">awk BEGIN关键字</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#awk-end关键字">awk END关键字</a></li><!----><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><h2 id="cat-连接文件并打印输出到标准输出设备" tabindex="-1"><a class="header-anchor" href="#cat-连接文件并打印输出到标准输出设备"><span>cat：连接文件并打印输出到标准输出设备</span></a></h2><p><code>cat</code>命令可以用来显示文本文件的内容，也可以把几个文件内容附加到另一个文件中，即连接合并文件。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">cat</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> [选项] 文件名</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">或者</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">cat</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 文件1</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 文件2</span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;"> &gt;</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 文件3</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这两种格式中，前者用于显示文件的内容；后者用于连接合并文件。</p><table><thead><tr><th style="text-align:center;">选项</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:center;">-A</td><td style="text-align:left;">相当于<code>-vET</code>选项的整合，用于列出所有隐藏符号</td></tr><tr><td style="text-align:center;">-E</td><td style="text-align:left;">列出每行结尾的回车符<code>$</code></td></tr><tr><td style="text-align:center;">-n</td><td style="text-align:left;">对输出的所有行进行编号</td></tr><tr><td style="text-align:center;">-b</td><td style="text-align:left;">与<code>-n</code>不同，此选项表示只对非空行进行编号</td></tr><tr><td style="text-align:center;">-T</td><td style="text-align:left;">把 Tab 键<code>^I</code>显示出来</td></tr><tr><td style="text-align:center;">-V</td><td style="text-align:left;">列出特殊字符</td></tr><tr><td style="text-align:center;">-s</td><td style="text-align:left;">当遇到有连续 2 行以上的空白行时，就替换为 1 行的空白行</td></tr></tbody></table><blockquote><p>注意，<code>cat</code>命令用于查看文件内容时，不论文件内容有多少，都会一次性显示。如果文件非常大，那么文件开头的内容就看不到了。不过 Linux 可以使用<code>PgUp+↑</code>组合键向上翻页，但是这种翻页是有极限的，如果文件足够长，那么还是无法看全文件的内容。因此，<code>cat</code>命令适合查看不太大的文件。</p></blockquote><p>如果使用<code>-A</code>选项，则相当于使用了<code>-vET</code>选项，可以查看文本中的所有隐藏符号，包括回车符（<code>$</code>）、Tab 键（<code>^I</code>）等。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat -A anaconda-ks.cfg</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Kickstart file automatically generated by anaconda.$</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">$</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">$</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#version=DEVEL$</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">install$</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">cdrom$</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">…省略部分内容…</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>将文件<code>file1.txt</code>和<code>file2.txt</code>的内容合并后输出到文件<code>file3.txt</code>中。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost base]# ls</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">file1.txt</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">    file2.txt</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost base]# cat file1.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">hello</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost base]# cat file2.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">world</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost base]# cat file1.txt file2.txt </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">&gt;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> file3.txt</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost base]# more file3.txt </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#more 命令可查看文件中的内容</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">hello</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">world</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost base]# ls</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">file1.txt</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">    file2.txt</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">    file3.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="more-分屏显示文件内容" tabindex="-1"><a class="header-anchor" href="#more-分屏显示文件内容"><span>more：分屏显示文件内容</span></a></h2><p><code>more</code>命令可以分页显示文本文件的内容，使用者可以逐页阅读文件中内容：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">more</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> [选项] 文件名</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:center;">选项</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:center;">-f</td><td style="text-align:left;">计算行数时，以实际的行数，而不是自动换行过后的行数</td></tr><tr><td style="text-align:center;">-p</td><td style="text-align:left;">不以卷动的方式显示每一页，而是先清除屏幕后再显示内容</td></tr><tr><td style="text-align:center;">-c</td><td style="text-align:left;">跟<code>-p</code>选项相似，不同的是先显示内容再清除其他旧资料</td></tr><tr><td style="text-align:center;">-s</td><td style="text-align:left;">当遇到有连续两行以上的空白行时，就替换为一行的空白行</td></tr><tr><td style="text-align:center;">-u</td><td style="text-align:left;">不显示下引号（根据环境变量 TERM 指定的终端而有所不同）</td></tr><tr><td style="text-align:center;">+n</td><td style="text-align:left;">从第 n 行开始显示文件内容，n 代表数字</td></tr><tr><td style="text-align:center;">-n</td><td style="text-align:left;">一次显示的行数，n 代表数字</td></tr></tbody></table><p><code>more</code>命令的执行会打开一个交互界面，常用的交互命令：</p><table><thead><tr><th style="text-align:center;">交互指令</th><th style="text-align:left;">功能</th></tr></thead><tbody><tr><td style="text-align:center;">h 或 ?</td><td style="text-align:left;">显示 more 命令交互命令帮助</td></tr><tr><td style="text-align:center;">q 或 Q</td><td style="text-align:left;">退出 more</td></tr><tr><td style="text-align:center;">v</td><td style="text-align:left;">在当前行启动一个编辑器</td></tr><tr><td style="text-align:center;">:f</td><td style="text-align:left;">显示当前文件的文件名和行号</td></tr><tr><td style="text-align:center;">!&lt;命令&gt; 或 :!&lt;命令&gt;</td><td style="text-align:left;">在子Shell中执行指定命令</td></tr><tr><td style="text-align:center;">回车键</td><td style="text-align:left;">向下移动一行</td></tr><tr><td style="text-align:center;">空格键</td><td style="text-align:left;">向下移动一页</td></tr><tr><td style="text-align:center;">Ctrl+l</td><td style="text-align:left;">刷新屏幕</td></tr><tr><td style="text-align:center;">=</td><td style="text-align:left;">显示当前行的行号</td></tr><tr><td style="text-align:center;">&#39;</td><td style="text-align:left;">转到上一次搜索开始的地方</td></tr><tr><td style="text-align:center;">Ctrf+f</td><td style="text-align:left;">向下滚动一页</td></tr><tr><td style="text-align:center;">.</td><td style="text-align:left;">重复上次输入的命令</td></tr><tr><td style="text-align:center;">/字符串</td><td style="text-align:left;">搜索指定的字符串</td></tr><tr><td style="text-align:center;">d</td><td style="text-align:left;">向下移动半页</td></tr><tr><td style="text-align:center;">b</td><td style="text-align:left;">向上移动一页</td></tr></tbody></table><p>显示文件<code>anaconda-ks.cfg</code>的内容，每 10 行显示一屏，同时清除屏幕：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# more -c -10 anaconda-ks.cfg</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#省略输出内容。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="head-显示文件开头的内容" tabindex="-1"><a class="header-anchor" href="#head-显示文件开头的内容"><span>head：显示文件开头的内容</span></a></h2><p><code>head</code>命令可以显示指定文件前若干行的文件内容。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">head</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> [选项] 文件名</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:center;">选项</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:center;">-n K</td><td style="text-align:left;">这里的 K 表示行数，该选项用来显示文件前 K 行的内容；如果使用 &quot;-K&quot; 作为参数，则表示除了文件最后 K 行外，显示剩余的全部内容。</td></tr><tr><td style="text-align:center;">-c K</td><td style="text-align:left;">这里的 K 表示字节数，该选项用来显示文件前 K 个字节的内容；如果使用 &quot;-K&quot;，则表示除了文件最后 K 字节的内容，显示剩余全部内容。</td></tr><tr><td style="text-align:center;">-v</td><td style="text-align:left;">显示文件名；注意，如不设置显示的具体行数，则默认显示 10 行的文本数据。</td></tr></tbody></table><p><code>head</code>命令默认显示文件的开头 10 行内容。如果想显示指定的行数，则只需使用<code>-n</code>选项即可：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# head -n 20 anaconda-ks.cfg</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这是显示文件的开头 20 行内容，也可以直接写&quot;-行数&quot;：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# head -20 anaconda-ks.cfg</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="less-查看文件内容" tabindex="-1"><a class="header-anchor" href="#less-查看文件内容"><span>less：查看文件内容</span></a></h2><p><code>less</code>命令的作用和<code>more</code>十分类似，都用来浏览文本文件中的内容，不同之处在于，使用<code>more</code>命令浏览文件内容时，只能不断向后翻看，而使用<code>less</code>命令浏览，既可以向后翻看，也可以向前翻看。</p><p>不仅如此，为了方面用户浏览文本内容，<code>less</code>命令还提供了以下几个功能：</p><ul><li>使用光标键可以在文本文件中前后（左后）滚屏；</li><li>用行号或百分比作为书签浏览文件；</li><li>提供更加友好的检索、高亮显示等操作；</li><li>兼容常用的字处理程序（如 Vim、Emacs）的键盘操作；</li><li>阅读到文件结束时，<code>less</code>命令不会退出；</li><li>屏幕底部的信息提示更容易控制使用，而且提供了更多的信息。</li></ul><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">less</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> [选项] 文件名</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:center;">选项</th><th style="text-align:center;">含义</th></tr></thead><tbody><tr><td style="text-align:center;">-N</td><td style="text-align:center;">显示每行的行号。</td></tr><tr><td style="text-align:center;">-S</td><td style="text-align:center;">行过长时将超出部分舍弃。</td></tr><tr><td style="text-align:center;">-e</td><td style="text-align:center;">当文件显示结束后，自动离开。</td></tr><tr><td style="text-align:center;">-g</td><td style="text-align:center;">只标志最后搜索到的关键同。</td></tr><tr><td style="text-align:center;">-Q</td><td style="text-align:center;">不使用警告音。</td></tr><tr><td style="text-align:center;">-i</td><td style="text-align:center;">忽略搜索时的大小写。</td></tr><tr><td style="text-align:center;">-m</td><td style="text-align:center;">显示类似 more 命令的百分比。</td></tr><tr><td style="text-align:center;">-f</td><td style="text-align:center;">强迫打开特殊文件，比如外围设备代号、目录和二进制文件。</td></tr><tr><td style="text-align:center;">-s</td><td style="text-align:center;">显示连续空行为一行。</td></tr><tr><td style="text-align:center;">-b</td><td style="text-align:center;">&lt;缓冲区大小&gt; 设置缓冲区的大小。</td></tr><tr><td style="text-align:center;">-o</td><td style="text-align:center;">&lt;文件名&gt; 将 less 输出的内容保存到指定文件中。</td></tr><tr><td style="text-align:center;">-x</td><td style="text-align:center;">&lt;数字&gt; 将【Tab】键显示为规定的数字空格。</td></tr></tbody></table><p>在使用<code>less</code>命令查看文件内容的过程中，和<code>more</code>命令一样，也会进入交互界面，因此需要掌握一些常用的交互指令。</p><table><thead><tr><th style="text-align:center;">交互指令</th><th style="text-align:center;">功能</th></tr></thead><tbody><tr><td style="text-align:center;">/字符串</td><td style="text-align:center;">向下搜索“字符串”的功能。</td></tr><tr><td style="text-align:center;">?字符串</td><td style="text-align:center;">向上搜索“字符串”的功能。</td></tr><tr><td style="text-align:center;">n</td><td style="text-align:center;">重复*前一个搜索（与 / 成 ? 有关）。</td></tr><tr><td style="text-align:center;">N</td><td style="text-align:center;">反向重复前一个搜索（与 / 或 ? 有关）。</td></tr><tr><td style="text-align:center;">b</td><td style="text-align:center;">向上移动一页。</td></tr><tr><td style="text-align:center;">d</td><td style="text-align:center;">向下移动半页。</td></tr><tr><td style="text-align:center;">h 或 H</td><td style="text-align:center;">显示帮助界面。</td></tr><tr><td style="text-align:center;">q 或 Q</td><td style="text-align:center;">退出 less 命令。</td></tr><tr><td style="text-align:center;">y</td><td style="text-align:center;">向上移动一行。</td></tr><tr><td style="text-align:center;">空格键</td><td style="text-align:center;">向下移动一页。</td></tr><tr><td style="text-align:center;">回车键</td><td style="text-align:center;">向下移动一行。</td></tr><tr><td style="text-align:center;">【PgDn】键</td><td style="text-align:center;">向下移动一页。</td></tr><tr><td style="text-align:center;">【PgUp】键</td><td style="text-align:center;">向上移动一页。</td></tr><tr><td style="text-align:center;">Ctrl+f</td><td style="text-align:center;">向下移动一页。</td></tr><tr><td style="text-align:center;">Ctrl+b</td><td style="text-align:center;">向上移动一页。</td></tr><tr><td style="text-align:center;">Ctrl+d</td><td style="text-align:center;">向下移动一页。</td></tr><tr><td style="text-align:center;">Ctrl+u</td><td style="text-align:center;">向上移动半页。</td></tr><tr><td style="text-align:center;">j</td><td style="text-align:center;">向下移动一行。</td></tr><tr><td style="text-align:center;">k</td><td style="text-align:center;">向上移动一行。</td></tr><tr><td style="text-align:center;">G</td><td style="text-align:center;">移动至最后一行。</td></tr><tr><td style="text-align:center;">g</td><td style="text-align:center;">移动到第一行。</td></tr><tr><td style="text-align:center;">ZZ</td><td style="text-align:center;">退出 less 命令。</td></tr><tr><td style="text-align:center;">v</td><td style="text-align:center;">使用配置的编辑器编辑当前文件。</td></tr><tr><td style="text-align:center;">[</td><td style="text-align:center;">移动到本文档的上一个节点。</td></tr><tr><td style="text-align:center;">]</td><td style="text-align:center;">移动到本文档的下一个节点。</td></tr><tr><td style="text-align:center;">p</td><td style="text-align:center;">移动到同级的上一个节点。</td></tr><tr><td style="text-align:center;">u</td><td style="text-align:center;">向上移动半页。</td></tr></tbody></table><p>使用<code>less</code>命令查看<code>/boot/grub/grub.cfg</code>文件中的内容。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# less /boot/grub/grub.cfg</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>可以看到，<code>less</code>在屏幕底部显示一个冒号（<code>:</code>），等待用户输入命令，比如说，用户想向下翻一页，可以按空格键；如果想向上翻一页，可以按<code>b</code>键。</p><h2 id="tail-显示文件结尾的内容" tabindex="-1"><a class="header-anchor" href="#tail-显示文件结尾的内容"><span>tail：显示文件结尾的内容</span></a></h2><p><code>tail</code>命令和<code>head</code>命令正好相反，它用来查看文件末尾的数据：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">tail</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> [选项] 文件名</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:center;">选项</th><th style="text-align:center;">含义</th></tr></thead><tbody><tr><td style="text-align:center;">-n K</td><td style="text-align:center;">这里的 K 指的是行数，该选项表示输出最后 K 行，在此基础上，如果使用 -n +K，则表示从文件的第 K 行开始输出。</td></tr><tr><td style="text-align:center;">-c K</td><td style="text-align:center;">这里的 K 指的是字节数，该选项表示输出文件最后 K 个字节的内容，在此基础上，使用 -c +K 则表示从文件第 K 个字节开始输出。</td></tr><tr><td style="text-align:center;">-f</td><td style="text-align:center;">输出文件变化后新增加的数据。</td></tr></tbody></table><p>查看<code>/etc/passwd</code>文件最后 3 行的数据内容。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# tail -n 3 /etc/passwd</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">sshd:x:74:74:Privilege-separated</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> SSH:/var/empty/sshd:/sbin/nologin</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">oprofile:x:16:16:Special</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> user</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> account</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> to</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> be</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> used</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> by</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> OProfile:/var/lib/oprofile:/sbin/nologin</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">tcpdump:x:72:72::/:/sbin/nologin</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>除此之外，还可以采用如下这种形式：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# tail -3 /etc/passwd</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">sshd:x:74:74:Privilege-separated</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> SSH:/var/empty/sshd:/sbin/nologin</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">oprofile:x:16:16:Special</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> user</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> account</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> to</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> be</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> used</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> by</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> OProfile:/var/lib/oprofile:/sbin/nologin</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">tcpdump:x:72:72::/:/sbin/nologin</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到，使用<code>tail -n 3 /etc/passwd</code>命令和<code>tail -3 /etc/passwd</code>的效果是一样的。</p><p>查看<code>/etc/passwd</code>文件末尾 100 个字节的数据内容。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# tail -c 100 /etc/passwd</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">cpdump:x:72:72::/:/sbin/nologin</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>可以使用<code>-f</code>选项来监听文件的新増内容：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]#tail -f anaconda-ks.cfg</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">@server-platform</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">@server-policy</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">pax</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">oddjob</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">sgpio</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">certmonger</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">pam_krb5</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">krb5-workstation</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">perl-DBD-SQLite</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">%end</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#光标不会退出文件，而会一直监听在文件的结尾处</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这条命令会显示文件的最后 10 行内容，而且光标不会退出命令，每隔一秒会检查一下文件是否增加新的内容，如果增加就追加到原来的输出结果后面并显示。</p><p>如果想终止输出，按<code>Ctrl+c</code>键中断<code>tail</code>命令即可。</p><h2 id="重定向-输入输出重定向" tabindex="-1"><a class="header-anchor" href="#重定向-输入输出重定向"><span>重定向（输入输出重定向）</span></a></h2><p>Linux 中标准的输入设备默认指的是键盘，标准的输出设备默认指的是显示器。而输入、输出重定向，完全可以从字面意思去理解，也就是：</p><ul><li>输入重定向：指的是重新指定设备来代替键盘作为新的输入设备；</li><li>输出重定向：指的是重新指定设备来代替显示器作为新的输出设备。</li></ul><p>通常是用文件或命令的执行结果来代替键盘作为新的输入设备，而新的输出设备通常指的就是文件。</p><h3 id="输入重定向" tabindex="-1"><a class="header-anchor" href="#输入重定向"><span>输入重定向</span></a></h3><p>对于输入重定向来说，其需要用到的符号以及作用如表。</p><table><thead><tr><th style="text-align:center;">命令符号格式</th><th style="text-align:left;">作用</th></tr></thead><tbody><tr><td style="text-align:center;">命令 &lt; 文件</td><td style="text-align:left;">将指定文件作为命令的输入设备</td></tr><tr><td style="text-align:center;">命令 &lt;&lt; 分界符</td><td style="text-align:left;">表示从标准输入设备（键盘）中读入，直到遇到分界符才停止（读入的数据不包括分界符），这里的分界符其实就是自定义的字符串</td></tr><tr><td style="text-align:center;">命令 &lt; 文件 1 &gt; 文件 2</td><td style="text-align:left;">将文件 1 作为命令的输入设备，该命令的执行结果输出到文件 2 中。</td></tr></tbody></table><p>默认情况下，<code>cat</code>命令会接受标准输入设备（键盘）的输入，并显示到控制台，但如果用文件代替键盘作为输入设备，那么该命令会以指定的文件作为输入设备，并将文件中的内容读取并显示到控制台。</p><p>以<code>/etc/passwd</code>文件（存储了系统中所有用户的基本信息）为例，执行如下命令：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat /etc/passwd</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#这里省略输出信息，读者可自行查看</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">&lt;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> /etc/passwd</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#输出结果同上面命令相同</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意，虽然执行结果相同，但第一行代表是以键盘作为输入设备，而第二行代码是以<code>/etc/passwd</code>文件作为输入设备。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">&lt;&lt;</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 0</span></span>
<span class="line"><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">\&gt;linuxyz.cn</span></span>
<span class="line"><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">\&gt;Linux</span></span>
<span class="line"><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">\&gt;0</span></span>
<span class="line"><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">linuxyz.cn</span></span>
<span class="line"><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">Linux</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到，当指定了 0 作为分界符之后，只要不输入 0，就可以一直输入数据。</p><p>首先，新建文本文件<code>a.txt</code>，然后执行如下命令：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat a.txt</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">&lt;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> /etc/passwd </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">&gt;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> a.txt</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat a.txt</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#输出了和 /etc/passwd 文件内容相同的数据</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到，通过重定向<code>/etc/passwd</code>作为输入设备，并输出重定向到<code>a.txt</code>，最终实现了将<code>/etc/passwd</code>文件中内容复制到<code>a.txt</code>中。</p><h3 id="输出重定向" tabindex="-1"><a class="header-anchor" href="#输出重定向"><span>输出重定向</span></a></h3><p>相较于输入重定向，我们使用输出重定向的频率更高。并且，和输入重定向不同的是，输出重定向还可以细分为标准输出重定向和错误输出重定向两种技术。</p><p>例如，使用<code>ls</code>命令分别查看两个文件的属性信息，但其中一个文件是不存在的，如下所示：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# touch demo1.txt</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# ls -l demo1.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">-rw-rw-r--.</span><span style="--shiki-light:#79B8FF;--shiki-dark:#005CC5;"> 1</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> root</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> root</span><span style="--shiki-light:#79B8FF;--shiki-dark:#005CC5;"> 0</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> Oct</span><span style="--shiki-light:#79B8FF;--shiki-dark:#005CC5;"> 12</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 15:02</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> demo1.txt</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# ls -l demo2.txt  </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">&lt;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">-- 不存在的文件</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">ls:</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> cannot</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> access</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> demo2.txt:</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> No</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> such</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> file</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> or</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> directory</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上述命令中，<code>demo1.txt</code>是存在的，因此正确输出了该文件的一些属性信息，这也是该命令执行的标准输出信息；而<code>demo2.txt</code>是不存在的，因此执行<code>ls</code>命令之后显示的报错信息，是该命令的错误输出信息。</p><p>再次强调，要想把原本输出到屏幕上的数据转而写入到文件中，这两种输出信息就要区别对待。</p><p>在此基础上，标准输出重定向和错误输出重定向又分别包含清空写入和追加写入两种模式。因此，对于输出重定向来说，其需要用到的符号以及作用如表。</p><table><thead><tr><th style="text-align:center;">命令符号格式</th><th style="text-align:left;">作用</th></tr></thead><tbody><tr><td style="text-align:center;">命令 &gt; 文件</td><td style="text-align:left;">将命令执行的标准输出结果重定向输出到指定的文件中，如果该文件已包含数据，会清空原有数据，再写入新数据。</td></tr><tr><td style="text-align:center;">命令 &gt; 文件</td><td style="text-align:left;">将命令执行的错误输出结果重定向到指定的文件中，如果该文件中已包含数据，会清空原有数据，再写入新数据。</td></tr><tr><td style="text-align:center;">命令 &gt;&gt; 文件</td><td style="text-align:left;">将命令执行的标准输出结果重定向输出到指定的文件中，如果该文件已包含数据，新数据将写入到原有内容的后面。</td></tr><tr><td style="text-align:center;">命令 &gt;&gt; 文件</td><td style="text-align:left;">将命令执行的错误输出结果重定向到指定的文件中，如果该文件中已包含数据，新数据将写入到原有内容的后面。</td></tr><tr><td style="text-align:center;">命令 &gt;&gt; 文件 &gt;&amp;1 或者 命令 &amp;&gt;&gt; 文件</td><td style="text-align:left;">将标准输出或者错误输出写入到指定文件，如果该文件中已包含数据，新数据将写入到原有内容的后面。注意，第一种格式中，最后的 &gt;&amp;1 是一体的，可以认为是固定写法。</td></tr></tbody></table><p>新建一个包含有 &quot;Linux&quot; 字符串的文本文件<code>Linux.txt</code>，以及空文本文件<code>demo.txt</code>，然后执行如下命令：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat Linux.txt </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">&gt;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> demo.txt</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat demo.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">Linux</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat Linux.txt </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">&gt;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> demo.txt</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat demo.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">Linux</span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">   &lt;</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">--这里的</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> Linux</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 是清空原有的</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> Linux</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 之后，写入的新的</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> Linux</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat Linux.txt </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">&gt;&gt;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> demo.txt</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat demo.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">Linux</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">Linux</span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">   &lt;</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">--以追加的方式，新数据写入到原有数据之后</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat b.txt </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">&gt;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> demo.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">cat:</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> b.txt:</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> No</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> such</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> file</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> or</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> directory</span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;"> &lt;</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">--</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 错误输出信息依然输出到了显示器中</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat b.txt </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">2&gt;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> demo.txt</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat demo.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">cat:</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> b.txt:</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> No</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> such</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> file</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> or</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> directory</span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;"> &lt;</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">--清空文件，再将错误输出信息写入到该文件中</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat b.txt </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">2&gt;&gt;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> demo.txt</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat demo.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">cat:</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> b.txt:</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> No</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> such</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> file</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> or</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> directory</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">cat:</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> b.txt:</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> No</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> such</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> file</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> or</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> directory</span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;"> &lt;</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">--追加写入错误输出信息</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="grep-查找文件内容" tabindex="-1"><a class="header-anchor" href="#grep-查找文件内容"><span>grep：查找文件内容</span></a></h2><p>很多时候，我们并不需要列出文件的全部内容，而是从文件中找到包含指定信息的那些行，要实现这个目的，可以使用<code>grep</code>命令。</p><p><code>grep</code>命令的由来可以追溯到 UNIX 诞生的早期，在 UNIX 系统中，搜索的模式被称为正则表达式（<code>regular expressions</code>），为了要彻底搜索一个文件，有的用户在要搜索的字符串前加上前缀<code>global</code>（全面的），一旦找到相匹配的内容，用户就像将其输出（<code>print</code>）到屏幕上，而将这一系列的操作整合到一起就是<code>global regular expressions print</code>，而这也就是<code>grep</code>命令的全称。</p><p><code>grep</code>命令能够在一个或多个文件中，搜索某一特定的字符模式（也就是正则表达式），此模式可以是单一的字符、字符串、单词或句子。</p><p>正则表达式是描述一组字符串的一个模式，通过使用操作符将较小的表达式组合成一个新的表达式。正则表达式可以是一些纯文本文字，也可以是用来产生模式的一些特殊字符。为了进一步定义一个搜索模式，<code>grep</code>命令支持如表所示的这几种正则表达式的元字符（也就是通配符）。</p><table><thead><tr><th style="text-align:center;">通配符</th><th style="text-align:left;">功能</th></tr></thead><tbody><tr><td style="text-align:center;">c*</td><td style="text-align:left;">将匹配 0 个（即空白）或多个字符 c（c 为任一字符）。</td></tr><tr><td style="text-align:center;">.</td><td style="text-align:left;">将匹配任何一个字符，且只能是一个字符。</td></tr><tr><td style="text-align:center;"><code>[xyz]</code></td><td style="text-align:left;">匹配方括号中的任意一个字符。</td></tr><tr><td style="text-align:center;">1</td><td style="text-align:left;">匹配除方括号中字符外的所有字符。</td></tr><tr><td style="text-align:center;">^</td><td style="text-align:left;">锁定行的开头。</td></tr><tr><td style="text-align:center;">$</td><td style="text-align:left;">锁定行的结尾。</td></tr></tbody></table><p>需要注意的是，在基本正则表达式中，如通配符<code>*、+、{、|、(</code>和<code>)</code>等，已经失去了它们原本的含义，而若要恢复它们原本的含义，则要在之前添加反斜杠<code>\</code>，如<code>*、+、{、|、(</code>和<code>)</code>。</p><p><code>grep</code>命令是用来在每一个文件（或特定输出上）搜索特定的模式，当使用<code>grep</code>时，包含指定字符模式的每一行内容，都会被打印（显示）到屏幕上，但是使用<code>grep</code>命令并不改变文件中的内容。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span>grep [选项] 模式 文件名</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这里的模式，要么是字符（串），要么是正则表达式。</p><table><thead><tr><th style="text-align:center;">选项</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:center;">-c, --count</td><td style="text-align:left;">仅列出文件中包含模式的行数</td></tr><tr><td style="text-align:center;">-i, --ignore-case</td><td style="text-align:left;">忽略模式中的字母大小写</td></tr><tr><td style="text-align:center;">-l, --files-with-matches</td><td style="text-align:left;">列出匹配行的文件名</td></tr><tr><td style="text-align:center;">-n, --line-number</td><td style="text-align:left;">在每一行的最前面列出行号</td></tr><tr><td style="text-align:center;">-v, --invert-match</td><td style="text-align:left;">列出没有匹配模式的行</td></tr><tr><td style="text-align:center;">-w, --word-regexp</td><td style="text-align:left;">把表达式当做一个完整的单字符来搜寻，忽略那些部分匹配的行</td></tr></tbody></table><p>注意，如果是搜索多个文件，<code>grep</code>命令的搜索结果只显示文件中发现匹配模式的文件名；而如果搜索单个文件，<code>grep</code>命令的结果将显示每一个包含匹配模式的行。</p><p>假设有一份<code>emp.data</code>员工清单，现在要搜索此文件，找出职位为<code>CLERK</code>的所有员工：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# grep CLERK emp.data</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#忽略输出内容</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>而在此基础上，如果只想知道职位为<code>CLERK</code>的员工的人数，可以使用<code>-c</code>选项：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# grep -c CLERK emp.data</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#忽略输出内容</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>搜索<code>emp.data</code>文件，找出以 78 开头的数据行：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# grep ^78 emp.data</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#忽略输出内容</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="sed命令" tabindex="-1"><a class="header-anchor" href="#sed命令"><span>sed命令</span></a></h2><p><code>sed</code>会根据脚本命令来处理文本文件中的数据，这些命令要么从命令行中输入，要么存储在一个文本文件中，此命令执行数据的顺序如下：</p><ol><li>每次仅读取一行内容；</li><li>根据提供的规则命令匹配并修改数据。注意，sed 默认不会直接修改源文件数据，而是会将数据复制到缓冲区中，修改也仅限于缓冲区中的数据；</li><li>将执行结果输出。</li></ol><p>当一行数据匹配完成后，它会继续读取下一行数据，并重复这个过程，直到将文件中所有数据处理完毕。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span>sed [选项] [脚本命令] 文件名</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:center;">选项</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:center;">-e</td><td style="text-align:left;">脚本命令 该选项会将其后跟的脚本命令添加到已有的命令中。</td></tr><tr><td style="text-align:center;">-f</td><td style="text-align:left;">脚本命令文件 该选项会将其后文件中的脚本命令添加到已有的命令中。</td></tr><tr><td style="text-align:center;">-n</td><td style="text-align:left;">默认情况下，sed 会在所有的脚本指定执行完毕后，会自动输出处理后的内容，而该选项会屏蔽启动输出，需使用 print 命令来完成输出。</td></tr><tr><td style="text-align:center;">-i</td><td style="text-align:left;">此选项会直接修改源文件，要慎用。</td></tr></tbody></table><p>成功使用<code>sed</code>命令的关键在于掌握各式各样的脚本命令及格式，它能帮你定制编辑文件的规则。</p><h3 id="sed脚本命令" tabindex="-1"><a class="header-anchor" href="#sed脚本命令"><span>sed脚本命令</span></a></h3><h4 id="sed-s-替换脚本命令" tabindex="-1"><a class="header-anchor" href="#sed-s-替换脚本命令"><span>sed s 替换脚本命令</span></a></h4><p>此命令的基本格式为：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span>[address]s/pattern/replacement/flags</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>其中，<code>address</code>表示指定要操作的具体行，<code>pattern</code>指的是需要替换的内容，<code>replacement</code>指的是要替换的新内容。</p><table><thead><tr><th style="text-align:center;">flags标记</th><th style="text-align:left;">功能</th></tr></thead><tbody><tr><td style="text-align:center;">n</td><td style="text-align:left;">1~512 之间的数字，表示指定要替换的字符串出现第几次时才进行替换，例如，一行中有 3 个 A，但用户只想替换第二个 A，这是就用到这个标记</td></tr><tr><td style="text-align:center;">g</td><td style="text-align:left;">对数据中所有匹配到的内容进行替换，如果没有 g，则只会在第一次匹配成功时做替换操作。例如，一行数据中有 3 个 A，则只会替换第一个 A</td></tr><tr><td style="text-align:center;">p</td><td style="text-align:left;">会打印与替换命令中指定的模式匹配的行。此标记通常与 -n 选项一起使用</td></tr><tr><td style="text-align:center;">w file</td><td style="text-align:left;">将缓冲区中的内容写到指定的 file 文件中</td></tr><tr><td style="text-align:center;">&amp;</td><td style="text-align:left;">用正则表达式匹配的内容进行替换</td></tr><tr><td style="text-align:center;">\n</td><td style="text-align:left;">匹配第 n 个子串，该子串之前在 pattern 中用 () 指定</td></tr><tr><td style="text-align:center;">\</td><td style="text-align:left;">转义（转义替换部分包含：&amp;、\ 等）</td></tr></tbody></table><p>比如，可以指定<code>sed</code>用新文本替换第几处模式匹配的地方：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# sed </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&#39;s/test/trial/2&#39;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> data4.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> a</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> test</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> of</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> the</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> trial</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> script.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> the</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> second</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> test</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> of</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> the</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> trial</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> script.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到，使用数字 2 作为标记的结果就是，<code>sed</code>编辑器只替换每行中第 2 次出现的匹配模式。</p><p>如果要用新文件替换所有匹配的字符串，可以使用<code>g</code>标记：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# sed </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&#39;s/test/trial/g&#39;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> data4.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> a</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> trial</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> of</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> the</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> trial</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> script.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> the</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> second</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> trial</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> of</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> the</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> trial</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> script.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们知道，<code>-n</code>选项会禁止<code>sed</code>输出，但<code>p</code>标记会输出修改过的行，将二者匹配使用的效果就是只输出被替换命令修改过的行，例如：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat data5.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> a</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> test</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> a</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> different</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line.</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# sed -n </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&#39;s/test/trial/p&#39;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> data5.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> a</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> trial</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>w</code>标记会将匹配后的结果保存到指定文件中：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# sed </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&#39;s/test/trial/w test.txt&#39;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> data5.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> a</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> trial</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> a</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> different</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line.</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]#cat test.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> a</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> trial</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在使用<code>s</code>脚本命令时，替换类似文件路径的字符串会比较麻烦，需要将路径中的正斜线进行转义：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span>[root@localhost ~]# sed &#39;s/\/bin\/bash/\/bin\/csh/&#39; /etc/passwd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="sed-d-替换脚本命令" tabindex="-1"><a class="header-anchor" href="#sed-d-替换脚本命令"><span>sed d 替换脚本命令</span></a></h4><p>此命令的基本格式为：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span>[address]d</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果需要删除文本中的特定行，可以用<code>d</code>脚本命令，它会删除指定行中的所有内容。但使用该命令时要特别小心，如果你忘记指定具体行的话，文件中的所有内容都会被删除，举个例子：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat data1.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">The</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> quick</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> brown</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> fox</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> jumps</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> over</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> the</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> lazy</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> dog</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">The</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> quick</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> brown</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> fox</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> jumps</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> over</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> the</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> lazy</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> dog</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">The</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> quick</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> brown</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> fox</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> jumps</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> over</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> the</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> lazy</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> dog</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">The</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> quick</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> brown</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> fox</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> jumps</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> over</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> the</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> lazy</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> dog</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# sed </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&#39;d&#39;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> data1.txt</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#什么也不输出，证明成了空文件</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当和指定地址一起使用时，删除命令显然能发挥出大的功用。可以从数据流中删除特定的文本行。</p><p>通过行号指定，比如删除 data6.txt 文件内容中的第 3 行：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat data6.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 1.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 2.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 3.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 4.</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# sed </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&#39;3d&#39;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> data6.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 1.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 2.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 4.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者通过特定行区间指定，比如删除<code>data6.txt</code>文件内容中的第 2、3行：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# sed </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&#39;2,3d&#39;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> data6.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 1.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 4.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>也可以使用两个文本模式来删除某个区间内的行，但这么做时要小心，你指定的第一个模式会“打开”行删除功能，第二个模式会“关闭”行删除功能，因此，sed 会删除两个指定行之间的所有行（包括指定的行），例如：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]#sed </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&#39;/1/,/3/d&#39;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> data6.txt</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#删除第 1~3 行的文本数据</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 4.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者通过特殊的文件结尾字符，比如删除<code>data6.txt</code>文件内容中第 3 行开始的所有的内容：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# sed </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&#39;3,$d&#39;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> data6.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 1.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 2.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在此强调，在默认情况下<code>sed</code>并不会修改原始文件，这里被删除的行只是从<code>sed</code>的输出中消失了，原始文件没做任何改变。</p><h4 id="sed-a-和-i-脚本命令" tabindex="-1"><a class="header-anchor" href="#sed-a-和-i-脚本命令"><span>sed a 和 i 脚本命令</span></a></h4><p><code>a</code>命令表示在指定行的后面附加一行，<code>i</code>命令表示在指定行的前面插入一行，这里之所以要同时介绍这 2 个脚本命令，因为它们的基本格式完全相同，如下所示：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span>[address]a（或 i）\新文本内容</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>下面分别就这 2 个命令，给读者举几个例子。比如说，将一个新行插入到数据流第三行前，执行命令如下：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# sed </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&#39;3i\</span></span>
<span class="line"><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&gt; This is an inserted line.&#39;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> data6.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 1.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 2.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> an</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> inserted</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 3.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 4.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>再比如说，将一个新行附加到数据流中第三行后，执行命令如下：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# sed </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&#39;3a\</span></span>
<span class="line"><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&gt; This is an appended line.&#39;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> data6.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 1.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 2.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 3.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> an</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> appended</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 4.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你想将一个多行数据添加到数据流中，只需对要插入或附加的文本中的每一行末尾（除最后一行）添加反斜线即可，例如：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# sed </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&#39;1i\</span></span>
<span class="line"><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&gt; This is one line of new text.\</span></span>
<span class="line"><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&gt; This is another line of new text.&#39;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> data6.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> one</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> of</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> new</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> text.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> another</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> of</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> new</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> text.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 1.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 2.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 3.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 4.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到，指定的两行都会被添加到数据流中。</p><h4 id="sed-c-替换脚本命令" tabindex="-1"><a class="header-anchor" href="#sed-c-替换脚本命令"><span>sed c 替换脚本命令</span></a></h4><p><code>c</code>命令表示将指定行中的所有内容，替换成该选项后面的字符串。该命令的基本格式为：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span>[address]c\用于替换的新文本</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# sed </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&#39;3c\</span></span>
<span class="line"><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&gt; This is a changed line of text.&#39;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> data6.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 1.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 2.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> a</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> changed</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> of</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> text.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 4.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在这个例子中，sed 编辑器会修改第三行中的文本，其实，下面的写法也可以实现此目的：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# sed </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&#39;/number 3/c\</span></span>
<span class="line"><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&gt; This is a changed line of text.&#39;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> data6.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 1.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 2.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> a</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> changed</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> of</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> text.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 4.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="sed-y-转换脚本命令" tabindex="-1"><a class="header-anchor" href="#sed-y-转换脚本命令"><span>sed y 转换脚本命令</span></a></h4><p><code>y</code>转换命令是唯一可以处理单个字符的<code>sed</code>脚本命令，其基本格式如下：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span>[address]y/inchars/outchars/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>转换命令会对<code>inchars</code>和<code>outchars</code>值进行一对一的映射，即<code>inchars</code>中的第一个字符会被转换为<code>outchars</code>中的第一个字符，第二个字符会被转换成<code>outchars</code>中的第二个字符...这个映射过程会一直持续到处理完指定字符。如果<code>inchars</code>和<code>outchars</code>的长度不同，则<code>sed</code>会产生一条错误消息。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# sed </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&#39;y/123/789/&#39;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> data8.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 7.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 8.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 9.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 4.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#79B8FF;--shiki-dark:#005CC5;"> 7</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> again.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> yet</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> another</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> the</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> last</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> in</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> the</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> file.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到，<code>inchars</code>模式中指定字符的每个实例都会被替换成<code>outchars</code>模式中相同位置的那个字符。</p><p>转换命令是一个全局命令，也就是说，它会文本行中找到的所有指定字符自动进行转换，而不会考虑它们出现的位置，再打个比方：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# echo </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&quot;This 1 is a test of 1 try.&quot;</span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;"> |</span><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;"> sed</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> &#39;y/123/456/&#39;</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#79B8FF;--shiki-dark:#005CC5;"> 4</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> a</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> test</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> of</span><span style="--shiki-light:#79B8FF;--shiki-dark:#005CC5;"> 4</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> try.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><code>sed</code>转换了在文本行中匹配到的字符 1 的两个实例，我们无法限定只转换在特定地方出现的字符。</p><h4 id="sed-p-打印脚本命令" tabindex="-1"><a class="header-anchor" href="#sed-p-打印脚本命令"><span>sed p 打印脚本命令</span></a></h4><p><code>p</code>命令表示搜索符号条件的行，并输出该行的内容，此命令的基本格式为：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span>[address]p</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><code>p</code>命令常见的用法是打印包含匹配文本模式的行，例如：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat data6.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 1.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 2.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 3.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 4.</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# sed -n </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&#39;/number 3/p&#39;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> data6.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 3.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到，用<code>-n</code>选项和<code>p</code>命令配合使用，我们可以禁止输出其他行，只打印包含匹配文本模式的行。</p><p>如果需要在修改之前查看行，也可以使用打印命令，比如与替换或修改命令一起使用。可以创建一个脚本在修改行之前显示该行，如下所示：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# sed -n </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&#39;/3/{</span></span>
<span class="line"><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&gt; p</span></span>
<span class="line"><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&gt; s/line/test/p</span></span>
<span class="line"><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&gt; }&#39;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> data6.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 3.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> test</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 3.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>sed 命令会查找包含数字 3 的行，然后执行两条命令。首先，脚本用 p 命令来打印出原始行；然后它用 s 命令替换文本，并用 p 标记打印出替换结果。输出同时显示了原来的行文本和新的行文本。</p><h4 id="sed-w-脚本命令" tabindex="-1"><a class="header-anchor" href="#sed-w-脚本命令"><span>sed w 脚本命令</span></a></h4><p><code>w</code>命令用来将文本中指定行的内容写入文件中，此命令的基本格式如下：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span>[address]w filename</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这里的<code>filename</code>表示文件名，可以使用相对路径或绝对路径，但不管是哪种，运行<code>sed</code>命令的用户都必须有文件的写权限。</p><p>下面的例子是将数据流中的前两行打印到一个文本文件中：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# sed </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&#39;1,2w test.txt&#39;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> data6.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 1.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 2.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 3.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 4.</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat test.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 1.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 2.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当然，如果不想让行直接输出，可以用<code>-n</code>选项，再举个例子：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat data11.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">Blum,</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> R</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">       Browncoat</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">McGuiness,</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> A</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">  Alliance</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">Bresnahan,</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> C</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">  Browncoat</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">Harken,</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> C</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">     Alliance</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# sed -n </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&#39;/Browncoat/w Browncoats.txt&#39;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> data11.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">cat</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> Browncoats.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">Blum,</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> R</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">       Browncoat</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">Bresnahan,</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> C</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">  Browncoat</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到，通过使用<code>w</code>脚本命令，<code>sed</code>可以实现将包含文本模式的数据行写入目标文件。</p><h4 id="sed-r-脚本命令" tabindex="-1"><a class="header-anchor" href="#sed-r-脚本命令"><span>sed r 脚本命令</span></a></h4><p>r 命令用于将一个独立文件的数据插入到当前数据流的指定位置，该命令的基本格式为：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span>[address]r filename</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><code>sed</code>命令会将<code>filename</code>文件中的内容插入到<code>address</code>指定行的后面，比如说：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat data12.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> an</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> added</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> the</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> second</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> added</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line.</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# sed </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&#39;3r data12.txt&#39;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> data6.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 1.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 2.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 3.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> an</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> added</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> the</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> second</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> added</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 4.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你想将指定文件中的数据插入到数据流的末尾，可以使用<code>$</code>地址符，例如：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# sed </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&#39;$r data12.txt&#39;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> data6.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 1.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 2.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 3.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 4.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> an</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> added</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> the</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> second</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> added</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="sed-q-退出脚本命令" tabindex="-1"><a class="header-anchor" href="#sed-q-退出脚本命令"><span>sed q 退出脚本命令</span></a></h4><p>q 命令的作用是使<code>sed</code>命令在第一次匹配任务结束后，退出<code>sed</code>程序，不再进行对后续数据的处理。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# sed </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&#39;2q&#39;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> test.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 1.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">This</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> number</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> 2.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到，sed 命令在打印输出第 2 行之后，就停止了，是 q 命令造成的，再比如：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span>[root@localhost ~]# sed &#39;/number 1/{ s/number 1/number 0/;q; }&#39; test.txt</span></span>
<span class="line"><span>This is line number 0.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>使用 q 命令之后，sed 命令会在匹配到<code>number 1</code>时，将其替换成<code>number 0</code>，然后直接退出。</p><h3 id="sed-脚本命令的寻址方式" tabindex="-1"><a class="header-anchor" href="#sed-脚本命令的寻址方式"><span>sed 脚本命令的寻址方式</span></a></h3><p>对各个脚本命令来说，<code>address</code>用来表明该脚本命令作用到文本中的具体行。</p><p>默认情况下，<code>sed</code>命令会作用于文本数据的所有行。如果只想将命令作用于特定行或某些行，则必须写明<code>address</code>部分，表示的方法有以下 2 种：</p><ul><li>以数字形式指定行区间；</li><li>用文本模式指定具体行区间。</li></ul><p>以上两种形式都可以使用如下这 2 种格式，分别是：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span>[address]脚本命令</span></span>
<span class="line"><span></span></span>
<span class="line"><span>或者</span></span>
<span class="line"><span></span></span>
<span class="line"><span>address {</span></span>
<span class="line"><span>    多个脚本命令</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以上两种形式在前面例子中都有具体实例，因此这里不再做过多赘述。</p><h4 id="以数字形式指定行区间" tabindex="-1"><a class="header-anchor" href="#以数字形式指定行区间"><span>以数字形式指定行区间</span></a></h4><p>当使用数字方式的行寻址时，可以用行在文本流中的行位置来引用。sed 会将文本流中的第一行编号为 1，然后继续按顺序为接下来的行分配行号。</p><p>在脚本命令中，指定的地址可以是单个行号，或是用起始行号、逗号以及结尾行号指定的一定区间范围内的行。这里举一个 sed 命令作用到指定行号的例子：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span>[root@localhost ~]#sed &#39;2s/dog/cat/&#39; data1.txt</span></span>
<span class="line"><span>The quick brown fox jumps over the lazy dog</span></span>
<span class="line"><span>The quick brown fox jumps over the lazy cat</span></span>
<span class="line"><span>The quick brown fox jumps over the lazy dog</span></span>
<span class="line"><span>The quick brown fox jumps over the lazy dog</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到，<code>sed</code>只修改地址指定的第二行的文本。下面的例子中使用了行地址区间：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span>[root@localhost ~]# sed &#39;2,3s/dog/cat/&#39; data1.txt</span></span>
<span class="line"><span>The quick brown fox jumps over the lazy dog</span></span>
<span class="line"><span>The quick brown fox jumps over the lazy cat</span></span>
<span class="line"><span>The quick brown fox jumps over the lazy cat</span></span>
<span class="line"><span>The quick brown fox jumps over the lazy dog</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在此基础上，如果想将命令作用到文本中从某行开始的所有行，可以用特殊地址——美元符（$）：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span>[root@localhost ~]# sed &#39;2,$s/dog/cat/&#39; data1.txt</span></span>
<span class="line"><span>The quick brown fox jumps over the lazy dog</span></span>
<span class="line"><span>The quick brown fox jumps over the lazy cat</span></span>
<span class="line"><span>The quick brown fox jumps over the lazy cat</span></span>
<span class="line"><span>The quick brown fox jumps over the lazy cat</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="用文本模式指定行区间" tabindex="-1"><a class="header-anchor" href="#用文本模式指定行区间"><span>用文本模式指定行区间</span></a></h4><p><code>sed</code>允许指定文本模式来过滤出命令要作用的行，格式如下：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span>/pattern/command</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>注意，必须用正斜线将要指定的<code>pattern</code>封起来，<code>sed</code>会将该命令作用到包含指定文本模式的行上。</p><p>举个例子，如果你想只修改用户<code>demo</code>的默认 shell，可以使用<code>sed</code>命令，执行命令如下：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# grep demo /etc/passwd</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">demo:x:502:502::/home/Samantha:/bin/bash</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# sed </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&#39;/demo/s/bash/csh/&#39;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> /etc/passwd</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">root:x:0:0:root:/root:/bin/bash</span></span>
<span class="line"><span style="--shiki-light:#79B8FF;--shiki-dark:#005CC5;">...</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">demo:x:502:502::/home/demo:/bin/csh</span></span>
<span class="line"><span style="--shiki-light:#79B8FF;--shiki-dark:#005CC5;">...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>虽然使用固定文本模式能帮你过滤出特定的值，就跟上面这个用户名的例子一样，但其作用难免有限，因此，<code>sed</code>允许在文本模式使用正则表达式指明作用的具体行。正则表达式允许创建高级文本模式匹配表达式来匹配各种数据。这些表达式结合了一系列通配符、特殊字符以及固定文本字符来生成能够匹配几乎任何形式文本的简练模式。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat test.txt</span></span>
<span class="line"><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">&lt;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">html</span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">&lt;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">title</span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">&gt;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">First Wed</span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">&lt;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">/title</span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">&lt;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">body</span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">h1Helloh1</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">h2Helloh2</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">h3Helloh3</span></span>
<span class="line"><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">&lt;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">/body</span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">&lt;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">/html</span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#使用正则表示式给所有第一个的h1、h2、h3添加&lt;&gt;，给第二个h1、h2、h3添加&lt;/&gt;</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat sed.sh</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">/h[0-9]/</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">{</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">    s//\</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">&lt;&amp;</span><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">\</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">&gt;</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">/1</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">    s//\</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">&lt;</span><span style="--shiki-light:#79B8FF;--shiki-dark:#005CC5;">\/</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">&amp;</span><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">\</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">&gt;</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">/2</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">}</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# sed -f sed.sh test.txt</span></span>
<span class="line"><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">&lt;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">h</span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">1&gt;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">Hello</span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">&lt;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">/h</span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">1&gt;</span></span>
<span class="line"><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">&lt;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">h</span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">2&gt;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">Hello</span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">&lt;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">/h</span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">2&gt;</span></span>
<span class="line"><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">&lt;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">h</span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">3&gt;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">Hello</span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">&lt;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">/h</span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">3&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="awk命令" tabindex="-1"><a class="header-anchor" href="#awk命令"><span>awk命令</span></a></h2><p>和<code>sed</code>命令类似，<code>awk</code>命令也是逐行扫描文件（从第 1 行到最后一行），寻找含有目标文本的行，如果匹配成功，则会在该行上执行用户想要的操作；反之，则不对行做任何处理。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span>awk [选项] &#39;脚本命令&#39; 文件名</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:center;">选项</th><th style="text-align:left;">含义</th></tr></thead><tbody><tr><td style="text-align:center;">-F fs</td><td style="text-align:left;">指定以 fs 作为输入行的分隔符，awk 命令默认分隔符为空格或制表符。</td></tr><tr><td style="text-align:center;">-f file</td><td style="text-align:left;">从脚本文件中读取 awk 脚本指令，以取代直接在命令行中输入指令。</td></tr><tr><td style="text-align:center;">-v var=val</td><td style="text-align:left;">在执行处理过程之前，设置一个变量 var，并给其设备初始值为 val。</td></tr></tbody></table><p><code>awk</code>的强大之处在于脚本命令，它由 2 部分组成，分别为匹配规则和执行命令：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span>&#39;匹配规则{执行命令}&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这里的匹配规则，和<code>sed</code>命令中的<code>address</code>部分作用相同，用来指定脚本命令可以作用到文本内容中的具体行，可以使用字符串（比如<code>/demo/</code>，表示查看含有<code>demo</code>字符串的行）或者正则表达式指定。另外需要注意的是，整个脚本命令是用单引号（<code>&#39;&#39;</code>）括起，而其中的执行命令部分需要用大括号（<code>{}</code>）括起来。</p><p>在<code>awk</code>程序执行时，如果没有指定执行命令，则默认会把匹配的行输出；如果不指定匹配规则，则默认匹配文本中所有的行。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# awk </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&#39;/^$/ {print &quot;Blank line&quot;}&#39;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> test.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>在此命令中，<code>/^$/</code>是一个正则表达式，功能是匹配文本中的空白行，同时可以看到，执行命令使用的是<code>print</code>命令，此命令经常会使用，它的作用很简单，就是将指定的文本进行输出。因此，整个命令的功能是，如果<code>test.txt</code>有 N 个空白行，那么执行此命令会输出 N 个<code>Blank line</code>。</p><h3 id="awk-使用数据字段变量" tabindex="-1"><a class="header-anchor" href="#awk-使用数据字段变量"><span>awk 使用数据字段变量</span></a></h3><p><code>awk</code>的主要特性之一是其处理文本文件中数据的能力，它会自动给一行中的每个数据元素分配一个变量。</p><p>默认情况下，<code>awk</code>会将如下变量分配给它在文本行中发现的数据字段：</p><ul><li><code>$0</code>代表整个文本行；</li><li><code>$1</code>代表文本行中的第 1 个数据字段；</li><li><code>$2</code>代表文本行中的第 2 个数据字段；</li><li><code>$n</code>代表文本行中的第 n 个数据字段。</li></ul><p>前面说过，在<code>awk</code>中，默认的字段分隔符是任意的空白字符（例如空格或制表符）。在文本行中，每个数据字段都是通过字段分隔符划分的。<code>awk</code>在读取一行文本时，会用预定义的字段分隔符划分每个数据字段。</p><p>所以在下面的例子中，<code>awk</code>程序读取文本文件，只显示第 1 个数据字段的值：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat data2.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">One</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> line</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> of</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> test</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> text.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">Two</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> lines</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> of</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> test</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> text.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">Three</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> lines</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> of</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> test</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> text.</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# awk </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&#39;{print $1}&#39;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> data2.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">One</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">Two</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">Three</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>该程序用<code>$1</code>字段变量来表示“仅显示每行文本的第 1 个数据字段”。当然，如果你要读取采用了其他字段分隔符的文件，可以用<code>-F</code>选项手动指定。</p><h3 id="awk-脚本命令使用多个命令" tabindex="-1"><a class="header-anchor" href="#awk-脚本命令使用多个命令"><span>awk 脚本命令使用多个命令</span></a></h3><p><code>awk</code>允许将多条命令组合成一个正常的程序。要在命令行上的程序脚本中使用多条命令，只要在命令之间放个分号即可：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# echo </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&quot;My name is Rich&quot;</span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;"> |</span><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;"> awk</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> &#39;{$4=&quot;Christine&quot;; print $0}&#39;</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">My</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> name</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> Christine</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>第一条命令会给字段变量<code>$4</code>赋值。第二条命令会打印整个数据字段。可以看到，<code>awk</code>程序在输出中已经将原文本中的第四个数据字段替换成了新值。</p><p>除此之外，也可以一次一行地输入程序脚本命令，比如说：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# awk </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&#39;{</span></span>
<span class="line"><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&gt; $4=&quot;Christine&quot;</span></span>
<span class="line"><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&gt; print $0}&#39;</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">My</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> name</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> Rich</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">My</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> name</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> Christine</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在你用了表示起始的单引号后，bash shell 会使用<code>&gt;</code>来提示输入更多数据，我们可以每次在每行加一条命令，直到输入了结尾的单引号。</p><p>注意，此例中因为没有在命令行中指定文件名，<code>awk</code>程序需要用户输入获得数据，因此当运行这个程序的时候，它会一直等着用户输入文本，此时如果要退出程序，只需按下<code>Ctrl+D</code>组合键即可。</p><h3 id="awk从文件中读取程序" tabindex="-1"><a class="header-anchor" href="#awk从文件中读取程序"><span>awk从文件中读取程序</span></a></h3><p>跟<code>sed</code>一样，<code>awk</code>允许将脚本命令存储到文件中，然后再在命令行中引用：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat awk.sh</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">{print $1 &quot;&#39;s home directory is &quot; $6}</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# awk -F: -f awk.sh /etc/passwd</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">root</span><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">&#39;s home directory is /root</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">bin&#39;</span><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">s</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> home</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> directory</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> /bin</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">daemon</span><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">&#39;s home directory is /sbin</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">adm&#39;</span><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">s</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> home</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> directory</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> /var/adm</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">lp</span><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">&#39;s home directory is /var/spool/lpd</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">...</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">Christine&#39;</span><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">s</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> home</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> directory</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> /home/Christine</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">Samantha</span><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">&#39;s home directory is /home/Samantha</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">Timothy&#39;</span><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">s</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> home</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> directory</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> is</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> /home/Timothy</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>awk.sh</code>脚本文件会使用<code>print</code>命令打印<code>/etc/passwd</code>文件的主目录数据字段（字段变量<code>$6</code>），以及<code>userid</code>数据字段（字段变量<code>$1</code>）。注意，在程序文件中，也可以指定多条命令，只要一条命令放一行即可，之间不需要用分号。</p><h3 id="awk-begin关键字" tabindex="-1"><a class="header-anchor" href="#awk-begin关键字"><span>awk BEGIN关键字</span></a></h3><p><code>awk</code>中还可以指定脚本命令的运行时机。默认情况下，<code>awk</code>会从输入中读取一行文本，然后针对该行的数据执行程序脚本，但有时可能需要在处理数据前运行一些脚本命令，这就需要使用<code>BEGIN</code>关键字。</p><p><code>BEGIN</code>会强制<code>awk</code>在读取数据前执行该关键字后指定的脚本命令：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# cat data3.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">Line</span><span style="--shiki-light:#79B8FF;--shiki-dark:#005CC5;"> 1</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">Line</span><span style="--shiki-light:#79B8FF;--shiki-dark:#005CC5;"> 2</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">Line</span><span style="--shiki-light:#79B8FF;--shiki-dark:#005CC5;"> 3</span></span>
<span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# awk </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&#39;BEGIN {print &quot;The data3 File Contents:&quot;}</span></span>
<span class="line"><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&gt; {print $0}&#39;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> data3.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">The</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> data3</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> File</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> Contents:</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">Line</span><span style="--shiki-light:#79B8FF;--shiki-dark:#005CC5;"> 1</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">Line</span><span style="--shiki-light:#79B8FF;--shiki-dark:#005CC5;"> 2</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">Line</span><span style="--shiki-light:#79B8FF;--shiki-dark:#005CC5;"> 3</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到，这里的脚本命令中分为 2 部分，<code>BEGIN</code>部分的脚本指令会在<code>awk</code>命令处理数据前运行，而真正用来处理数据的是第二段脚本命令。</p><h3 id="awk-end关键字" tabindex="-1"><a class="header-anchor" href="#awk-end关键字"><span>awk END关键字</span></a></h3><p>和<code>BEGIN</code>关键字相对应，<code>END</code>关键字允许我们指定一些脚本命令，<code>awk</code>会在读完数据后执行它们：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#e1e4e8;--shiki-dark:#24292e;--shiki-light-bg:#24292e;--shiki-dark-bg:#fff;"><pre class="shiki shiki-themes github-dark github-light vp-code"><code><span class="line"><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">[root@localhost </span><span style="--shiki-light:#F97583;--shiki-dark:#D73A49;">~</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;">]# awk </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&#39;BEGIN {print &quot;The data3 File Contents:&quot;}</span></span>
<span class="line"><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&gt; {print $0}</span></span>
<span class="line"><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;">&gt; END {print &quot;End of File&quot;}&#39;</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#24292E;"> data3.txt</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">The</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> data3</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> File</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> Contents:</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">Line</span><span style="--shiki-light:#79B8FF;--shiki-dark:#005CC5;"> 1</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">Line</span><span style="--shiki-light:#79B8FF;--shiki-dark:#005CC5;"> 2</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">Line</span><span style="--shiki-light:#79B8FF;--shiki-dark:#005CC5;"> 3</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#6F42C1;">End</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> of</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#032F62;"> File</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到，当<code>awk</code>程序打印完文件内容后，才会执行<code>END</code>中的脚本命令。</p></div><!----><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">上次编辑于: </span><!----></div><div class="contributors"><span class="vp-meta-label">贡献者: </span><!--[--><!--[--><span class="vp-meta-info" title="email: 592786982@qq.com">WSQ</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/wsq-blog/linux/linux%E5%9F%BA%E7%A1%80/Linux%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4.html" aria-label="Linux文件和目录操作命令"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><!---->Linux文件和目录操作命令</div></a><a class="route-link auto-link next" href="/wsq-blog/linux/linux%E5%9F%BA%E7%A1%80/Linux%E6%89%93%E5%8C%85%E5%8E%8B%E7%BC%A9%E5%91%BD%E4%BB%A4.html" aria-label="Linux打包压缩命令"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">Linux打包压缩命令<!----></div></a></nav><div id="vp-comment" class="giscus-wrapper input-top" style="display:none;"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" preserveAspectRatio="xMidYMid" viewBox="0 0 100 100"><circle cx="28" cy="75" r="11" fill="currentColor"><animate attributeName="fill-opacity" begin="0s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></circle><path fill="none" stroke="#88baf0" stroke-width="10" d="M28 47a28 28 0 0 1 28 28"><animate attributeName="stroke-opacity" begin="0.1s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></path><path fill="none" stroke="#88baf0" stroke-width="10" d="M28 25a50 50 0 0 1 50 50"><animate attributeName="stroke-opacity" begin="0.2s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></path></svg></div><!----><!--]--></main><!--]--><!----></div><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/wsq-blog/assets/app-ChJ-FBpc.js" defer></script>
  </body>
</html>
