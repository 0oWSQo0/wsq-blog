<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.59" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://0oWSQo0.github.io/wsq-blog/linux/tools/ansible%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97.html"><meta property="og:title" content="ansibleå¸¸ç”¨æ¨¡å—"><meta property="og:description" content="Ansible é»˜è®¤æä¾›äº†å¾ˆå¤šæ¨¡å—æ¥ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œå¸¸ç”¨æ¨¡å—å¸®åŠ©æ–‡æ¡£ 2.9.xã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ansible-doc -lå‘½ä»¤æŸ¥çœ‹åˆ°å½“å‰ansibleéƒ½æ”¯æŒå“ªäº›æ¨¡å—ã€‚ é€šè¿‡ansible-doc -s æ¨¡å—åå¯ä»¥æŸ¥çœ‹è¯¥æ¨¡å—æœ‰å“ªäº›å‚æ•°å¯ä»¥ä½¿ç”¨ã€‚ ping æ¨¡å— æ£€æµ‹è¿œç¨‹ä¸»æœºçš„è¿é€šæ€§ã€‚ command æ¨¡å— åœ¨è¿œç¨‹ä¸»æœºæ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼Œæ­¤ä¸ºé»˜è®¤æ¨¡å—ï¼Œå¯å¿½ç•¥-mé€‰..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-04-23T09:49:11.000Z"><meta property="article:published_time" content="2024-06-20T00:00:00.000Z"><meta property="article:modified_time" content="2025-04-23T09:49:11.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"ansibleå¸¸ç”¨æ¨¡å—","image":[""],"datePublished":"2024-06-20T00:00:00.000Z","dateModified":"2025-04-23T09:49:11.000Z","author":[{"@type":"Person","name":"WSQ","url":"https://0oWSQo0.github.com"}]}</script><title>ansibleå¸¸ç”¨æ¨¡å—</title><meta name="description" content="Ansible é»˜è®¤æä¾›äº†å¾ˆå¤šæ¨¡å—æ¥ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œå¸¸ç”¨æ¨¡å—å¸®åŠ©æ–‡æ¡£ 2.9.xã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ansible-doc -lå‘½ä»¤æŸ¥çœ‹åˆ°å½“å‰ansibleéƒ½æ”¯æŒå“ªäº›æ¨¡å—ã€‚ é€šè¿‡ansible-doc -s æ¨¡å—åå¯ä»¥æŸ¥çœ‹è¯¥æ¨¡å—æœ‰å“ªäº›å‚æ•°å¯ä»¥ä½¿ç”¨ã€‚ ping æ¨¡å— æ£€æµ‹è¿œç¨‹ä¸»æœºçš„è¿é€šæ€§ã€‚ command æ¨¡å— åœ¨è¿œç¨‹ä¸»æœºæ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼Œæ­¤ä¸ºé»˜è®¤æ¨¡å—ï¼Œå¯å¿½ç•¥-mé€‰...">
    <link rel="preload" href="/wsq-blog/assets/style-B8iyyxn3.css" as="style"><link rel="stylesheet" href="/wsq-blog/assets/style-B8iyyxn3.css">
    <link rel="modulepreload" href="/wsq-blog/assets/app-BAoNGAQX.js"><link rel="modulepreload" href="/wsq-blog/assets/ansibleå¸¸ç”¨æ¨¡å—.html-KBDB5y_K.js"><link rel="modulepreload" href="/wsq-blog/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/wsq-blog/assets/index.html-y9hjWg4H.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/portfolio.html-BXkm2R9O.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/è¿›åˆ¶.html-D8SGjDfR.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ACLè¯¦è§£.html-BloX_IeT.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ARPè¯¦è§£.html-cBNfZDN_.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/BGPè¯¦è§£.html-H-6DMP-Q.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/DHCPè¯¦è§£.html-5OsfIqif.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/DNSè¯¦è§£.html-9f9jSQ6z.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/HTTPSè¯¦è§£.html-B1MNeeCC.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ICMPè¯¦è§£.html-rOsq0YlX.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/IPv6è¯¦è§£.html-mcuWo4Lm.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/IPè¯¦è§£.html-Cn_WOg-x.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ISISè¯¦è§£.html-CKYYamtd.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/NATè¯¦è§£.html-9GTOa7EI.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/OSPF-LSA.html-DeRnGEZO.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/OSPFå®æˆ˜.html-DP7X6rhm.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/OSPFç‰¹æ€§.html-CHIr3PPJ.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/OSPFè¯¦è§£.html-CbPtE_bm.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/RIPè¯¦è§£.html-QgpY6GUV.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/RSTPã€MSTPè¯¦è§£.html-BXEuGz-T.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/STPè¯¦è§£.html-C1DTR0aY.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/TCPå’ŒUDPè¯¦è§£.html-BZu5cSVW.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/VLANè¯¦è§£.html-D6hv5wdt.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/VPNè¯¦è§£.html-BhwoQ2eB.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/VRRPè¯¦è§£.html-DVENiYOQ.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Wiresharkä½¿ç”¨æ•™ç¨‹.html-nr1YJCIH.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ä¸‰å±‚äº¤æ¢æœº.html-DfJEb5tX.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/åä¸ºå‘½ä»¤.html-CLrOQfhN.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/åº”ç”¨å±‚åè®®è¯¦è§£.html-DVr0k4nr.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/æ•°æ®é“¾è·¯å±‚åŸºç¡€çŸ¥è¯†.html-BXryfrXx.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/æ— çº¿ç½‘ç»œè¯¦è§£.html-QsHhSR6H.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/æ ¡éªŒç .html-CMZ1aKIy.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ç½‘ç»œåŸºç¡€çŸ¥è¯†.html-lq4pXFoN.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/è·¯ç”±åè®®è¯¦è§£.html-DIdwYcdD.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/è·¯ç”±å™¨.html-C9VJQbwh.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/è·¯ç”±ç­–ç•¥å’Œç­–ç•¥è·¯ç”±.html-CxTk51aa.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/è·¯ç”±é«˜çº§ç‰¹æ€§.html-BLZaIDsP.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/é“¾è·¯èšåˆæŠ€æœ¯.html-BBLX_r7x.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/é˜²ç«å¢™.html-xIL0MxFq.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/é™æ€è·¯ç”±è¯¦è§£.html-Cn79_8_w.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ç½‘ç«™æ”¶è—.html-wtWtedCA.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/pythonå…ƒç»„.html-C35VawoP.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/pythonå‡½æ•°.html-D6Qhr5G1.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/pythonåˆ—è¡¨.html-CLPZErQH.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/pythonå˜é‡.html-YJzPA_R6.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/pythonåŸºç¡€.html-BZCQtRn2.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/pythonå­—å…¸.html-qcjF8v7r.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/pythonå­—ç¬¦ä¸²å¸¸ç”¨æ–¹æ³•.html-DYzfZrjm.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/pythonå¼‚å¸¸å¤„ç†æœºåˆ¶.html-CjgoKvUP.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/pythonæ–‡ä»¶æ“ä½œ.html-B0iP2xCS.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/pythonæ¨¡å—å’ŒåŒ….html-CResYCBN.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/pythonæµç¨‹æ§åˆ¶.html-C3ZzWANj.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/pythonçˆ¬è™«.html-CQqaavzW.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/pythonç±»å’Œå¯¹è±¡.html-DYK3lmTC.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/pythonç±»ç‰¹æ®Šæˆå‘˜.html-DxW-zaVC.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/pythonè¿ç®—ç¬¦.html-Am9I9ipn.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/pythoné›†åˆ.html-Dp4fBRSz.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-GtLqceJP.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/disable.html-DhwD98pb.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/encrypt.html-BmguXeXU.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/layout.html-Ccbzvy5y.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/markdown.html-b_YalApo.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/page.html-M98jd5pQ.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/OSPF.html-cztG_FLD.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/åä¸ºæ•°é€šç¬”è®°.html-CFn1KnHB.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ç½‘ç»œ.html-BbtEGDZP.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/æ–‡å­—ç‰¹æ•ˆ.html-CDNfMzpk.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6 ArrayBuffer.html-Cl4VZg1r.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6 Class.html-CaeH-519.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6 Classçš„ç»§æ‰¿.html-D1Gdrm4I.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6 Moduleçš„åŠ è½½å®ç°.html-n59X0Nwm.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6 Moduleè¯­æ³•.html-CUrdTY80.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6 Setå’ŒMap.html-DKX3dnZP.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6 asyncå‡½æ•°.html-D1WNxO1H.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6 letå’Œconst.html-8HvK1j46.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6 proxy.html-3homrOiA.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6Iteratorå’Œforofå¾ªç¯.html-4EZTMvYn.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6Promiseå¯¹è±¡.html-BPigeBNB.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6Symbol.html-CtdsFENt.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6å‡½æ•°.html-BcPSTM_5.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6å­—ç¬¦ä¸².html-D0qEo11d.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6å¯¹è±¡.html-CJWUhs9N.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6æ•°å€¼.html-BlBM_CBu.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6æ•°ç»„.html-DrjqHESM.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6ç»“æ„èµ‹å€¼.html-DIY-p22Z.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ES6è¿ç®—ç¬¦.html-C8BDY9Rl.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/d.tsç±»å‹å£°æ˜æ–‡ä»¶.html-CDZ4uJ25.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/tsä¸‰ç§ç‰¹æ®Šç±»å‹.html-CUjOdOBa.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/tså‡½æ•°ç±»å‹.html-j8m-EAgP.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/tså¯¹è±¡ç±»å‹.html-DPXW-ga3.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/tsæ•°æ®ç±»å‹.html-BpaHf3ds.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/tsæ•°ç»„å’Œå…ƒç»„.html-BAaRqN14.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/tsæ³›å‹.html-Buw5j75J.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/tsçš„Enumç±»å‹.html-Byl3l3qW.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/tsçš„interfaceæ¥å£.html-FPr7UtEK.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/tsç±»å‹æ–­è¨€.html-B-iBe9DT.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JS-CanvasAPI.html-C4EL_HZd.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JS-ClipboardAPI.html-CwrWQ7PN.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JS-FetchAPI.html-TI0HPebM.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JS-File_FileList_FileReader.html-BAlNMKUb.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JS-FormData.html-D9ULMjGG.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JS-History.html-BR4tGLRY.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JS-SVG.html-L7Ds9vcL.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JS-URL.html-C6Za9YIY.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JS-URLPatternAPI.html-BdJeGXZm.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JS-WebSocket.html-DIFx7koR.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JS-window.html-Bz0eWajB.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JSå®ç”¨ä»£ç ç‰‡æ®µ.html-CSVtMNuW.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/SpringJdbcTemplate.html-B0ZT7oaZ.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Springäº‹åŠ¡.html-KeGQ7jKA.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Springçš„æ•´ä½“è„‰ç»œ.html-BhMb13xM.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Springè¯¦è§£â€”IOCå®ç°åŸç†ä¹‹Beanå®ä¾‹åŒ–.html-755XRiKp.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Springè¯¦è§£â€”IOCå®ç°åŸç†ä¹‹IOCä½“ç³»ç»“æ„è®¾è®¡.html-BU12GVal.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Springè¯¦è§£â€”IOCå®ç°åŸç†ä¹‹IOCåˆå§‹åŒ–æµç¨‹.html-Bcdh-3-8.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Springè¯¦è§£â€”Springå’ŒSpringæ¡†æ¶ç»„æˆ.html-DhEpbrji.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Springè¯¦è§£â€”æ§åˆ¶åè½¬IOC.html-1HXdthO7.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Springè¯¦è§£â€”ç®€å•ä¾‹å­å¼•å…¥Springè¦ç‚¹.html-pbJC4jBI.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Springè¯¦è§£â€”é¢å‘åˆ‡é¢ç¼–ç¨‹(AOP).html-2uhc-qFV.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Java é›†åˆ.html-CI_1se6U.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Javaä¿®é¥°ç¬¦å’Œå…³é”®å­—.html-Bds7WBkl.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Javaå†…ç½®åŒ…è£…ç±».html-WRzUyaot.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Javaå†…éƒ¨ç±».html-D-hpb9YN.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Javaåå°„æœºåˆ¶.html-B0u-aZMm.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JavaåŸºç¡€â€”SPIæœºåˆ¶.html--PjTaDC-.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JavaåŸºç¡€â€”åå°„æœºåˆ¶.html-Di7zg_-6.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JavaåŸºç¡€â€”å¼‚å¸¸æœºåˆ¶.html-C9Jltuxw.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JavaåŸºç¡€â€”æ³›å‹æœºåˆ¶.html-DMd2pwVR.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/JavaåŸºç¡€â€”æ³¨è§£æœºåˆ¶.html-B9USVSlN.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Javaå­—ç¬¦ä¸²å¤„ç†.html-D_rrovfs.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Javaåºåˆ—åŒ–ä¸ååºåˆ—åŒ–.html-BOs0fCXy.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Javaå¼‚å¸¸å¤„ç†.html-CiErb1jn.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Javaæ•°å­—å¤„ç†.html-DmexAmZG.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Javaæ•°ç»„.html-BP5Yfe2s.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Javaæ•°ç»„æ“ä½œ.html-BArfyCs_.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Javaæ—¶é—´æ—¥æœŸçš„å¤„ç†.html-BZJD8Yo2.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Javaæ³›å‹å’Œæšä¸¾.html-BI24_Lh7.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Javaç±»å’Œå¯¹è±¡.html-CPUY67Fk.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Javaè¾“å…¥è¾“å‡ºæµ.html-BWPJfW4h.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/javaç»§æ‰¿å°è£…å’Œå¤šæ€.html-CSpnGKJ4.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MyBatisè¯¦è§£â€”Mapperæ˜ å°„æ–‡ä»¶é…ç½®.html-BNmW_Z06.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MyBatisè¯¦è§£â€”sqlSessionæ‰§è¡Œæµç¨‹.html-DBTVa2OW.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MyBatisè¯¦è§£â€”ä¸€çº§ç¼“å­˜å®ç°æœºåˆ¶.html-Cb435cgF.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MyBatisè¯¦è§£â€”äº‹åŠ¡ç®¡ç†æœºåˆ¶.html-DIHpVRBV.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MyBatisè¯¦è§£â€”äºŒçº§ç¼“å­˜å®ç°æœºåˆ¶.html-8q3bkMC0.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MyBatisè¯¦è§£â€”åˆå§‹åŒ–åŸºæœ¬æµç¨‹.html-d1Vr3b-S.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MyBatisè¯¦è§£â€”åŠ¨æ€SQLä½¿ç”¨ä¸åŸç†.html-DBuN--r0.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MyBatisè¯¦è§£â€”æ€»ä½“æ¡†æ¶è®¾è®¡.html-BspOqrrx.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MyBatisè¯¦è§£â€”æ’ä»¶ä¹‹åˆ†é¡µæœºåˆ¶.html-CVfnE8LX.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MyBatisè¯¦è§£â€”æ’ä»¶æœºåˆ¶.html-CqsrZDcp.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MyBatisè¯¦è§£â€”æ•°æ®æºä¸è¿æ¥æ± .html-Czq24GfH.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MyBatisè¯¦è§£â€”é…ç½®æ¸…å•.html-DF3yeIZ0.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MyBatisè¯¦è§£â€”é…ç½®è§£æè¿‡ç¨‹.html-CEJH1pu7.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Servlet Cookieå’ŒSession.html-CWWdORcy.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Servletè¿‡æ»¤å™¨.html-C-xLWyJr.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/servlet1.html-Coup9vOB.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/servlet2.html-ihS4wAZT.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/servlet3.html-BWeFNNxS.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/springBootâ€”devtools.html-xEXVpFBb.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/springBootâ€”å¸¸ç”¨æ³¨è§£.html-_HVb37q8.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/springBootâ€”é›†æˆDruidè¿æ¥æ± .html-CfYGmu2g.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/springBootâ€”é›†æˆEasyExcel.html-tq0SN1Ft.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/springBootâ€”é›†æˆPOI.html-KhW9FXwO.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/springBootâ€”é›†æˆactuatorç›‘æ§å·¥å…·.html-BXbyLj_m.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/springBootâ€”é›†æˆadminç›‘æ§å·¥å…·.html-D9p-UOPX.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/springBooté›†æˆMyBatisâ€”XMLæ–¹å¼.html-DTuQ-eoR.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/springBooté›†æˆMybatisâ€”PageHelperåˆ†é¡µ.html-CfUITTDW.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/springBooté›†æˆMybatisâ€”æ³¨è§£æ–¹å¼.html-BZ1OLpXO.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/SpringMVCå…¥é—¨.html-DYUPumLp.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/SpringMVCåŸŸå¯¹è±¡å…±äº«æ•°æ®.html-ChLAabt7.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/SpringMVCå®ç°Restful.html-CGsAaTLD.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/SpringMVCè·å–è¯·æ±‚å‚æ•°.html-vMl99Hg6.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/SpringMVCè§†å›¾å’Œè§†å›¾è§£æå™¨.html-BiLG-6j8.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Dockerfileå®šåˆ¶é•œåƒ.html-G2sxyKio.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/DockeråŸºç¡€.html-DVo1b4T6.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Dockerçš„æ•°æ®å·.html-CUaR897X.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Dockerçš„ç½‘ç»œ.html-D_zThKFh.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/docker-compose.html-UGr3yfF8.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/çƒ­é—¨é•œåƒå®‰è£….html-_u7TFfrM.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/é›†æˆDockerå®ç°ä¸€é”®éƒ¨ç½².html-BhlW0_gg.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Bashè„šæœ¬â€”å…¥é—¨.html-BhtxRtVN.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Bashè„šæœ¬â€”å‡½æ•°.html-DktAR5MO.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Bashè„šæœ¬â€”å˜é‡.html-CDD3IwzV.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Bashè„šæœ¬â€”å­—ç¬¦ä¸²æ“ä½œ.html-CQcvhH9K.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Bashè„šæœ¬â€”å¸¸ç”¨å‘½ä»¤.html-_akWuHlJ.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Bashè„šæœ¬â€”æ•°ç»„.html-vTJEhlPQ.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Bashè„šæœ¬â€”æ¨¡å¼æ‰©å±•.html-CI7-g1hm.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Bashè„šæœ¬â€”æµç¨‹æ§åˆ¶.html-BFyG9TLx.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Bashè„šæœ¬â€”ç®—æ•°è¿ç®—.html-DBrCwfx3.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/LinuxSSHå‘½ä»¤.html-Bpxk7XTt.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/LinuxVim.html-DGPh-mEF.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linuxå…¥é—¨.html-ZAKFcDi2.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linuxå¸¸ç”¨è½¯ä»¶å®‰è£….html-CJz7CUK1.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linuxæ‰“åŒ…å‹ç¼©å‘½ä»¤.html-oVn9T6yl.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linuxæ“ä½œå†å².html-BEZVZdks.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linuxæ–‡ä»¶ç›®å½•ç›¸å…³å‘½ä»¤.html-CT8cuya0.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linuxæ–‡ä»¶ç³»ç»Ÿç»“æ„.html-BCYXQfGo.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linuxæ–‡æœ¬æ“ä½œå‘½ä»¤.html-C1qx5bj6.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linuxæƒé™ç®¡ç†.html-BrzQFM_6.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linuxç”¨æˆ·å’Œç”¨æˆ·ç»„ç®¡ç†.html-cHqLXYUS.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linuxç£ç›˜ç›¸å…³å‘½ä»¤.html-Bk1vWp_s.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linuxç³»ç»ŸæœåŠ¡ç®¡ç†.html-DQVl65aa.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linuxç½‘ç»œç›¸å…³å‘½ä»¤.html-BCrparGN.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linuxè½¯ä»¶å®‰è£….html-BdsrJqcj.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linuxè¿›ç¨‹ç›¸å…³å‘½ä»¤.html-DkriE6C4.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linuxé˜²ç«å¢™è¯¦è§£.html-BfE8j8Co.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Linxå…¶å®ƒå¸¸ç”¨å‘½ä»¤.html-DbIEYSRH.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/VMwareå®‰è£…linux.html-DF9azwZa.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/linuxå¸¸ç”¨å·¥å…·.html-CGtPjFAM.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/å®‰è£…è„šæœ¬å®ä¾‹.html-0kRVZri1.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ansible-playbook.html-CDcGrj1_.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/ansible.html-CehcSPGK.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/nginxå…¥é—¨.html-D0xAoW9D.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/RequestsåŸºæœ¬ç”¨æ³•.html-DhBsfgOV.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Scrapyçˆ¬è™«æ¡†æ¶.html-B3M5MZow.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/urllibåŒ….html-B4r7Fmqq.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQLäº‹åŠ¡.html-dWAPSxdl.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQLå…¥é—¨.html-Bm_oWoBE.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQLåŸºç¡€æŸ¥è¯¢.html-B-emxQ5X.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQLå¤šè¡¨æŸ¥è¯¢.html-BrwxgCv6.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQLå­—ç¬¦é›†å’Œæ ¡å¯¹è§„åˆ™.html-ozeyPJdP.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQLå­˜å‚¨å¼•æ“.html-3zjiFhFD.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQLå­˜å‚¨è¿‡ç¨‹.html-KbabVN6z.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQLå®‰è£….html-Cos3L3tR.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQLå¸¸ç”¨å‡½æ•°æ±‡æ€».html-BxaA0aHv.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQLå¸¸è§é—®é¢˜.html-CXFDHjlk.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQLæ‰§è¡Œæµç¨‹.html-BAXJ078x.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQLæ“ä½œè¡¨ä¸­çš„æ•°æ®.html-BSFFJgYT.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQLæ•°æ®åº“å¤‡ä»½æ¢å¤.html-D1o3_rhN.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQLæ•°æ®åº“çš„åŸºæœ¬æ“ä½œ.html-CdzWAGDm.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQLæ•°æ®ç±»å‹.html-kVOe4_gy.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQLæ•°æ®è¡¨çš„åŸºæœ¬æ“ä½œ.html-BKQeQ9rK.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQLæ—¥å¿—.html-B8qVLOIE.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQLç”¨æˆ·ç®¡ç†.html-DY5mkBHL.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQLç´¢å¼•.html-Y5-Wn-Ns.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQLçº¦æŸ.html-tqcKxnNB.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQLè§†å›¾.html-Dvlg6sc5.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQLè§¦å‘å™¨.html-DrUUb4sH.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQLè¯•é¢˜.html-CrD4I06p.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQLè¿ç®—ç¬¦.html-Cuyt0x-G.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQLé”æœºåˆ¶.html-CEXSfDOm.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/MySQLé«˜çº§æŸ¥è¯¢.html-MYzC4-LQ.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Redis Stream.html-DRkKy_fr.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Rediså‘å¸ƒè®¢é˜…æ¨¡å¼.html-8ovmHjic.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/RedisåŸºç¡€å…¥é—¨.html-CnPzPUcO.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/RedisåŸºç¡€æ•°æ®ç±»å‹.html-CclhSKaQ.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Redisç‰¹æ®Šæ•°æ®ç±»å‹.html-BVv9ijlq.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Redisçš„é”®.html-CvQ3kMQg.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/Redisé…ç½®æ–‡ä»¶.html-D2SsHd1F.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/404.html-BlieSuoI.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-CZ6tDm5n.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-DDe4C4By.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-BzfxMV2E.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-CGR1uTaO.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-C8i93F1_.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-DMZ4MO3h.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-D4-erai_.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-7v6dhxuF.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-DW2tbR-f.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-CJiqu4_o.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-BPuFGnBK.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-Czqdcg4u.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-OvYZXapl.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-C61Yv5KG.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-BTU9BpIn.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-e_1t2G6T.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-CI6fbVHE.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-BTxrdDkL.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-Ddp4aLQU.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-O0sx69kH.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-BVGzpYeT.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-BmmsHO8n.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-B7mYeUT8.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-BFacqWRe.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index.html-B5DDXp-M.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/giscus-BZxmVUME.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/flowchart-CTwbLKUk.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index-BYq9jyaM.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index-DRWmbcXV.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/index-B9oRC6ej.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/mermaid.esm.min-CATR3y-q.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/photoswipe.esm-GXRgw7eJ.js" as="script"><link rel="prefetch" href="/wsq-blog/assets/setupDevtools-7MC2TMWH-DtIpLJvU.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/wsq-blog/" aria-label="å¸¦æˆ‘å›å®¶"><img class="vp-nav-logo" src="/wsq-blog/logo.png" alt><!----><!----></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/wsq-blog/" aria-label="ä¸»é¡µ"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="logos:google-home" width="1em" height="1em"></iconify-icon><!--]-->ä¸»é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="å‰ç«¯"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:javascript" width="1em" height="1em"></iconify-icon>å‰ç«¯<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/js/%E5%9F%BA%E7%A1%80/" aria-label="JSåŸºç¡€"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:javascript" width="1em" height="1em"></iconify-icon><!--]-->JSåŸºç¡€<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/js/es6/" aria-label="ES6"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="logos:es6" width="1em" height="1em"></iconify-icon><!--]-->ES6<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/js/CSS/" aria-label="CSS"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:css3" width="1em" height="1em"></iconify-icon><!--]-->CSS<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Java"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:java" width="1em" height="1em"></iconify-icon>Java<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/java/java%E5%9F%BA%E7%A1%80/" aria-label="JavaåŸºç¡€"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:java" width="1em" height="1em"></iconify-icon><!--]-->JavaåŸºç¡€<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/java/mybatis/" aria-label="Mybatis"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:spring" width="1em" height="1em"></iconify-icon><!--]-->Mybatis<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/java/Spring/" aria-label="Spring"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:spring" width="1em" height="1em"></iconify-icon><!--]-->Spring<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/java/springBoot/" aria-label="springBoot"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:spring" width="1em" height="1em"></iconify-icon><!--]-->springBoot<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="SQL"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:azuresqldatabase" width="1em" height="1em"></iconify-icon>SQL<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/sql/redis/" aria-label="Redis"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:redis" width="1em" height="1em"></iconify-icon><!--]-->Redis<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/sql/mysql/" aria-label="MySQL"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:mysql-wordmark" width="1em" height="1em"></iconify-icon><!--]-->MySQL<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="è¿ç»´"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:centos" width="1em" height="1em"></iconify-icon>è¿ç»´<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/linux/linux%E5%9F%BA%E7%A1%80/" aria-label="linuxåŸºç¡€"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:linux" width="1em" height="1em"></iconify-icon><!--]-->linuxåŸºç¡€<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/linux/docker/" aria-label="Docker"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="mdi:docker" width="1em" height="1em"></iconify-icon><!--]-->Docker<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/wsq-blog/linux/tools/" aria-label="è¿ç»´å·¥å…·"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:linux" width="1em" height="1em"></iconify-icon><!--]-->è¿ç»´å·¥å…·<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="è®¡ç®—æœºåŸºç¡€"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:windows11" width="1em" height="1em"></iconify-icon>è®¡ç®—æœºåŸºç¡€<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/network/" aria-label="ç½‘ç»œ"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:networkx" width="1em" height="1em"></iconify-icon><!--]-->ç½‘ç»œ<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsq-blog/computer/" aria-label="å…¶ä»–"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="devicon:haskell" width="1em" height="1em"></iconify-icon><!--]-->å…¶ä»–<!----></a></li></ul></button></div></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://0oWSQo0.github.com" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/wsq-blog/" aria-label="ä¸»é¡µ"><!--[--><iconify-icon class="font-icon icon" style="" mode="style" inline icon="logos:google-home" width="1em" height="1em"></iconify-icon><!--]-->ä¸»é¡µ<!----></a></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->ansibleå¸¸ç”¨æ¨¡å—</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://0oWSQo0.github.com" target="_blank" rel="noopener noreferrer">WSQ</a></span><span property="author" content="WSQ"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2024å¹´6æœˆ20æ—¥</span><meta property="datePublished" content="2024-06-20T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 20 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT20M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color2" role>Linux</span><!--]--><meta property="articleSection" content="Linux"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color2" role>Bash</span><!--]--><meta property="keywords" content="Bash"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc" vp-toc><!----><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ping-æ¨¡å—">ping æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#command-æ¨¡å—">command æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#shell-æ¨¡å—">shell æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#script-æ¨¡å—">script æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#copy-æ¨¡å—">copy æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#get-url-æ¨¡å—">get_url æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#fetchæ¨¡å—">fetchæ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#file-æ¨¡å—">file æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#stat-æ¨¡å—">stat æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#unarchive-æ¨¡å—">unarchive æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#archive-æ¨¡å—">archive æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#hostname-æ¨¡å—">hostname æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#cron-æ¨¡å—">cron æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#yum-apt-æ¨¡å—">yum/apt æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#yum-repository-æ¨¡å—">yum_repository æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#service-æ¨¡å—">service æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#user-æ¨¡å—">user æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#group-æ¨¡å—">group æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#lineinfile-æ¨¡å—">lineinfile æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#replace-æ¨¡å—">replace æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#selinux-æ¨¡å—">selinux æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#reboot-æ¨¡å—">reboot æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#mount-æ¨¡å—">mount æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#setup-æ¨¡å—">setup æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#debug-æ¨¡å—">debug æ¨¡å—</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content" vp-content><p>Ansible é»˜è®¤æä¾›äº†å¾ˆå¤šæ¨¡å—æ¥ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œ<a href="https://docs.ansible.com/ansible/2.9/modules/modules_by_category.html" target="_blank" rel="noopener noreferrer">å¸¸ç”¨æ¨¡å—å¸®åŠ©æ–‡æ¡£ 2.9.x</a>ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>ansible-doc -l</code>å‘½ä»¤æŸ¥çœ‹åˆ°å½“å‰<code>ansible</code>éƒ½æ”¯æŒå“ªäº›æ¨¡å—ã€‚</p><p>é€šè¿‡<code>ansible-doc -s æ¨¡å—å</code>å¯ä»¥æŸ¥çœ‹è¯¥æ¨¡å—æœ‰å“ªäº›å‚æ•°å¯ä»¥ä½¿ç”¨ã€‚</p><h2 id="ping-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#ping-æ¨¡å—"><span>ping æ¨¡å—</span></a></h2><p>æ£€æµ‹è¿œç¨‹ä¸»æœºçš„è¿é€šæ€§ã€‚</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FFB757;">root@localhost:~#</span><span style="color:#ADDCFF;"> ansible</span><span style="color:#ADDCFF;"> qkx1</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> ping</span></span>
<span class="line"><span style="color:#FFB757;">qkx1</span><span style="color:#FF9492;"> |</span><span style="color:#FFB757;"> SUCCESS</span><span style="color:#F0F3F6;"> =</span><span style="color:#FF9492;">&gt;</span><span style="color:#ADDCFF;"> {</span></span>
<span class="line"><span style="color:#FFB757;">    &quot;ansible_facts&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#ADDCFF;"> {</span></span>
<span class="line"><span style="color:#FFB757;">        &quot;discovered_interpreter_python&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#ADDCFF;"> &quot;/usr/bin/python3&quot;</span></span>
<span class="line"><span style="color:#F0F3F6;">    },</span></span>
<span class="line"><span style="color:#FFB757;">    &quot;changed&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#91CBFF;"> false</span><span style="color:#ADDCFF;">,</span></span>
<span class="line"><span style="color:#FFB757;">    &quot;ping&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#ADDCFF;"> &quot;pong&quot;</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span></code></pre></div><h2 id="command-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#command-æ¨¡å—"><span>command æ¨¡å—</span></a></h2><p>åœ¨è¿œç¨‹ä¸»æœºæ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼Œæ­¤ä¸ºé»˜è®¤æ¨¡å—ï¼Œå¯å¿½ç•¥<code>-m</code>é€‰é¡¹ã€‚</p><div class="hint-container warning"><p class="hint-container-title">æ³¨æ„</p><p>ä¸æ”¯æŒ<code>$VARNAME &lt; &gt; | ; &amp;</code>ç­‰ï¼Œä¸å…·æœ‰å¹‚ç­‰æ€§</p></div><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;"># command æ¨¡å—ä¸æ”¯æŒé‡å®šå‘</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> command</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;echo hello &gt; /root/hello.log&#39;</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> command</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;cat /root/hello.log&#39;</span></span>
<span class="line"><span style="color:#BDC4CC;"># command æ¨¡å—ä¸æ”¯æŒå˜é‡å¼•ç”¨  </span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> command</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;echo </span><span style="color:#F0F3F6;">$HOSTNAME</span><span style="color:#ADDCFF;">&quot;</span></span>
<span class="line"><span style="color:#BDC4CC;"># command æ¨¡å—ä¸æ”¯æŒç®¡é“ç¬¦</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> command</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;echo 123456 | passwd --stdin wangj&#39;</span></span>
<span class="line"><span style="color:#BDC4CC;"># ä»…æ”¯æŒç®€å•çš„ Shell å‘½ä»¤, ä¸”ä¸å…·å¤‡å¹‚ç­‰æ€§</span></span>
<span class="line"><span style="color:#BDC4CC;"># é¦–è¡Œ WARNING æ˜¯å‘ŠçŸ¥æˆ‘ä»¬æ‰€æ‰§è¡Œçš„æ“ä½œå¯ä»¥ä½¿ç”¨å…¶ä»–æ¨¡å—ä»£æ›¿</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> command</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;mkdir /data&#39;</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> command</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;touch /data/1.log&#39;</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> command</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;ls /data&#39;</span></span></code></pre></div><table><thead><tr><th style="text-align:center;">å‚æ•°</th><th style="text-align:left;">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center;">chdir</td><td style="text-align:left;">è¿è¡Œ command å‘½ä»¤å‰å…ˆ cd åˆ°è¿™ä¸ªç›®å½•</td></tr><tr><td style="text-align:center;">creates</td><td style="text-align:left;">å¦‚æœè¿™ä¸ªå‚æ•°å¯¹åº”çš„æ–‡ä»¶å­˜åœ¨ï¼Œå°±ä¸è¿è¡Œ command</td></tr><tr><td style="text-align:center;">removes</td><td style="text-align:left;">å¦‚æœè¿™ä¸ªå‚æ•°å¯¹åº”çš„æ–‡ä»¶ä¸å­˜åœ¨ï¼Œå°±ä¸è¿è¡Œ command</td></tr></tbody></table><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;"># chdir å‚æ•°</span></span>
<span class="line"><span style="color:#BDC4CC;"># å…ˆåˆ‡æ¢åˆ° /data ç›®å½•, ç„¶åæ‰§è¡Œ ls -l å‘½ä»¤</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> command</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;chdir=/data ls -l&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># creates,removes å‚æ•°</span></span>
<span class="line"><span style="color:#BDC4CC;"># å¦‚æœ /data/mysql ç›®å½•å­˜åœ¨, åˆ™è·³è¿‡åˆ›å»º.</span></span>
<span class="line"><span style="color:#BDC4CC;"># å¦‚æœ /data/mysql ç›®å½•ä¸å­˜åœ¨, åˆ™åˆ›å»º /data/mysql ç›®å½•.</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> command</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;creates=/data/mysql mkdir /data/mysql&#39;</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> command</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;removes=/data/mysql mkdir /data/mysql&#39;</span></span></code></pre></div><p>æ€»ç»“ï¼š</p><ul><li><code>command</code>æ¨¡å—çš„å‘½ä»¤ä¸æ”¯æŒå¯åŠ¨ Shellï¼Œç›´æ¥é€šè¿‡ SSH æ‰§è¡Œå‘½ä»¤</li><li><code>command</code>ä¸æ”¯æŒ Bash çš„ç‰¹æ€§ï¼Œå¦‚ç®¡é“å’Œé‡å®šå‘ç­‰åŠŸèƒ½</li><li>è‹¥éœ€è¦é€šè¿‡ Shell è¿è¡Œä¸€ä¸ªå‘½ä»¤ï¼Œæ¯”å¦‚<code>&lt; &gt; |</code>ç­‰ï¼Œéœ€è¦ä½¿ç”¨ Shell æ¨¡å—</li><li><code>command</code>æ¨¡å—æ›´å®‰å…¨ï¼Œå› ä¸ºå®ƒä¸å—ç”¨æˆ·ç¯å¢ƒçš„å½±å“</li></ul><h2 id="shell-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#shell-æ¨¡å—"><span>shell æ¨¡å—</span></a></h2><p>è®©è¿œç¨‹ä¸»æœºåœ¨ Shell è¿›ç¨‹ä¸‹æ‰§è¡Œå‘½ä»¤ï¼Œä»è€Œæ”¯æŒ Shell çš„ç‰¹æ€§ï¼Œå¦‚ç®¡é“ç­‰ã€‚æ­¤æ¨¡å—ä¸å…·æœ‰å¹‚ç­‰æ€§ã€‚</p><p>ä¸<code>command</code>æ¨¡å—å‡ ä¹ç›¸åŒï¼Œä½†åœ¨æ‰§è¡Œå‘½ä»¤çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯<code>/bin/sh</code>ã€‚</p><div class="hint-container warning"><p class="hint-container-title">æ³¨æ„</p><p>æ³¨æ„ï¼š Command å’Œ Shell æ¨¡å—éƒ½åªèƒ½å»æ‰§è¡Œä¸€äº›éäº¤äº’å¼çš„å‘½ä»¤ï¼Œä¸èƒ½å»æ‰§è¡Œä¸€äº›äº¤äº’å¼çš„å‘½ä»¤ï¼Œæ¯”å¦‚ vim æˆ– topã€‚</p></div><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;"># Shell æ¨¡å—æ”¯æŒå˜é‡å¼•ç”¨</span></span>
<span class="line"><span style="color:#F0F3F6;">[root@ansible </span><span style="color:#FF9492;">~</span><span style="color:#F0F3F6;">] ansible websrvs -m shell -a </span><span style="color:#ADDCFF;">&#39;echo $HOSTNAME&#39;</span></span>
<span class="line"><span style="color:#BDC4CC;"># Shell æ¨¡å—æ”¯æŒç®¡é“ç¬¦</span></span>
<span class="line"><span style="color:#F0F3F6;">[root@ansible </span><span style="color:#FF9492;">~</span><span style="color:#F0F3F6;">] ansible websrvs -m shell -a </span><span style="color:#ADDCFF;">&#39;useradd wangj&#39;</span></span>
<span class="line"><span style="color:#F0F3F6;">[root@ansible </span><span style="color:#FF9492;">~</span><span style="color:#F0F3F6;">] ansible websrvs -m shell -a </span><span style="color:#ADDCFF;">&#39;echo 123456 | passwd --stdin wangj&#39;</span></span>
<span class="line"><span style="color:#F0F3F6;">[root@ansible </span><span style="color:#FF9492;">~</span><span style="color:#F0F3F6;">] ansible websrvs -m shell -a </span><span style="color:#ADDCFF;">&#39;ls -l /etc/shadow&#39;</span></span>
<span class="line"><span style="color:#BDC4CC;"># Shell æ¨¡å—æ”¯æŒé‡å®šå‘</span></span>
<span class="line"><span style="color:#F0F3F6;">[root@ansible </span><span style="color:#FF9492;">~</span><span style="color:#F0F3F6;">] ansible websrvs -m shell -a </span><span style="color:#ADDCFF;">&#39;echo hello &gt; /data/hello.log&#39;</span></span>
<span class="line"><span style="color:#F0F3F6;">[root@ansible </span><span style="color:#FF9492;">~</span><span style="color:#F0F3F6;">] ansible websrvs -m shell -a </span><span style="color:#ADDCFF;">&#39;cat /data/hello.log&#39;</span></span></code></pre></div><div class="hint-container warning"><p class="hint-container-title">æ³¨æ„</p><p>å³ä½¿æ˜¯è°ƒç”¨ bash æ‰§è¡Œå‘½ä»¤ï¼Œç±»ä¼¼<code>cat /tmp/test.md | awk -F&#39;|&#39; &#39;{print $1,$2}&#39; &amp;&gt; /tmp/example.txt</code>è¿™äº›å¤æ‚å‘½ä»¤ï¼Œä½¿ç”¨ Shell æ¨¡å—ä¹Ÿå¯èƒ½ä¼šå¤±è´¥ã€‚</p><p>è§£å†³åŠæ³•ï¼š å»ºè®®å†™åˆ°è„šæœ¬ä¸­ï¼Œcopy åˆ°è¿œç¨‹ï¼Œæ‰§è¡Œï¼Œå†æŠŠéœ€è¦çš„ç»“æœæ‹‰å›æ‰§è¡Œå‘½ä»¤çš„æœºå™¨</p></div><h2 id="script-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#script-æ¨¡å—"><span>script æ¨¡å—</span></a></h2><p>åœ¨è¿œç¨‹ä¸»æœºä¸Šè¿è¡Œ Ansible æœåŠ¡å™¨ä¸Šçš„è„šæœ¬ï¼Œæ­¤æ¨¡å—ä¸å…·æœ‰å¹‚ç­‰æ€§ã€‚</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> script</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;/root/test.sh&#39;</span></span></code></pre></div><h2 id="copy-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#copy-æ¨¡å—"><span>copy æ¨¡å—</span></a></h2><p>ä» Ansible æœåŠ¡å™¨ä¸»æ§ç«¯å¤åˆ¶æ–‡ä»¶åˆ°è¿œç¨‹ä¸»æœºã€‚<code>src=file</code>å¦‚æœæ²¡æŒ‡æ˜ç»å¯¹è·¯å¾„ï¼Œåˆ™ä¸ºå½“å‰ç›®å½•æˆ–å½“å‰ç›®å½•ä¸‹çš„<code>files</code>ç›®å½•ä¸‹çš„<code>file</code>æ–‡ä»¶ã€‚</p><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th><th>å–å€¼/æ•°æ®ç±»å‹</th></tr></thead><tbody><tr><td>src</td><td>è¢«å¤åˆ¶åˆ°è¿œç¨‹ä¸»æœºçš„æœ¬åœ°æ–‡ä»¶ï¼Œå¦‚æœè·¯å¾„æ˜¯ä¸€ä¸ªç›®å½•ï¼Œåˆ™ä¼šé€’å½’å¤åˆ¶</td><td>path</td></tr><tr><td>dest</td><td>è¿œç¨‹ä¸»æœºç›®å½•ï¼Œå¿…é€‰é¡¹</td><td>path</td></tr><tr><td>mode</td><td>å¤åˆ¶åˆ°è¿œç¨‹ä¸»æœºåæ–‡ä»¶çš„æƒé™</td><td>string</td></tr><tr><td>owner</td><td>å¤åˆ¶åˆ°è¿œç¨‹ä¸»æœºåæ–‡ä»¶çš„å±ä¸»</td><td>string</td></tr><tr><td>group</td><td>å¤åˆ¶åˆ°è¿œç¨‹ä¸»æœºåæ–‡ä»¶çš„å±ç»„</td><td>string</td></tr><tr><td>content</td><td>contentä½œä¸ºå†…å®¹ï¼Œå¤åˆ¶åˆ°è¿œç¨‹ä¸»æœºï¼Œä¸èƒ½ä¸<code>src</code>ä¸€èµ·ä½¿ç”¨</td><td>string</td></tr><tr><td>backup</td><td>å½“æ–‡ä»¶å†…å®¹å‘ç”Ÿæ”¹å˜åï¼Œåœ¨è¦†ç›–ä¹‹å‰æ˜¯å¦æŠŠæºæ–‡ä»¶å¤‡ä»½</td><td>no(é»˜è®¤)/yes</td></tr><tr><td>force</td><td>å½“ç›®æ ‡ä¸»æœºåŒ…å«è¯¥æ–‡ä»¶ï¼Œä½†å†…å®¹ä¸åŒæ—¶ï¼Œè®¾ä¸º&quot;yes&quot;ï¼Œè¡¨ç¤ºå¼ºåˆ¶è¦†ç›–ï¼›è®¾ä¸º&quot;no&quot;ï¼Œè¡¨ç¤ºç›®æ ‡ä¸»æœºçš„ç›®æ ‡ä½ç½®ä¸å­˜åœ¨è¯¥æ–‡ä»¶æ‰å¤åˆ¶</td><td>no/yes(é»˜è®¤)</td></tr><tr><td>directory_mode</td><td>é€’å½’è®¾å®šç›®å½•çš„æƒé™ï¼Œé»˜è®¤ä¸ºç³»ç»Ÿé»˜è®¤æƒé™</td><td></td></tr></tbody></table><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;"># backup å‚æ•°</span></span>
<span class="line"><span style="color:#BDC4CC;"># å¦‚ç›®æ ‡å­˜åœ¨, é»˜è®¤è¦†ç›–, æ­¤å¤„æŒ‡å®šå…ˆå¤‡ä»½</span></span>
<span class="line"><span style="color:#BDC4CC;"># ansible websrvs -m shell -a &#39;useradd wangj&#39;</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> copy</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;src=/root/test.sh dest=/root/test01.sh owner=wangj group=bin backup=yes&#39;</span></span>
<span class="line"><span style="color:#BDC4CC;"># content å‚æ•°</span></span>
<span class="line"><span style="color:#BDC4CC;"># æŒ‡å®šå†…å®¹, ç›´æ¥ç”Ÿæˆç›®æ ‡æ–‡ä»¶    </span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> copy</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;content=&#39;test line1\ntest line2\n&#39; dest=/tmp/test.txt&quot;</span></span>
<span class="line"><span style="color:#BDC4CC;"># å¤åˆ¶ /etc ç›®å½•è‡ªèº«. ( æ³¨æ„: /etc åé¢æ²¡æœ‰ / )</span></span>
<span class="line"><span style="color:#BDC4CC;"># ansible websrvs -m shell -a &quot;mkdir /backup&quot;</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> copy</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;src=/etc dest=/backup&quot;</span></span>
<span class="line"><span style="color:#BDC4CC;"># å¤åˆ¶ /etc/ ä¸‹çš„æ–‡ä»¶, ä¸åŒ…æ‹¬ /etc ç›®å½•è‡ªèº«. ( æ³¨æ„: /etc/ åé¢æœ‰ / )</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> copy</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;src=/etc/ dest=/backup&quot;</span></span></code></pre></div><h2 id="get-url-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#get-url-æ¨¡å—"><span>get_url æ¨¡å—</span></a></h2><p>ç”¨äºå°†æ–‡ä»¶ä»<code>httpã€https</code>æˆ–<code>ftp</code>ä¸‹è½½åˆ°è¢«ç®¡ç†æœºèŠ‚ç‚¹ä¸Šã€‚è¢«ç®¡ç†æœºèŠ‚ç‚¹å¿…é¡»è¦èƒ½å¤Ÿç›´æ¥è®¿é—®å¯¹åº”çš„è¿œç¨‹èµ„æºã€‚</p><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>url</td><td>ä¸‹è½½æ–‡ä»¶çš„ URLï¼Œæ”¯æŒ HTTP, HTTPS æˆ– FTP åè®®</td></tr><tr><td>dest</td><td>ä¸‹è½½åˆ°ç›®æ ‡è·¯å¾„(ç»å¯¹è·¯å¾„)ï¼Œå¦‚æœç›®æ ‡æ˜¯ä¸€ä¸ªç›®å½•ï¼Œå°±ç”¨æœåŠ¡å™¨ä¸Šé¢æ–‡ä»¶çš„åç§°ï¼Œå¦‚æœç›®æ ‡è®¾ç½®äº†åç§°å°±ç”¨ç›®æ ‡è®¾ç½®çš„åç§°</td></tr><tr><td>owner</td><td>æŒ‡å®šå±ä¸»</td></tr><tr><td>group</td><td>æŒ‡å®šå±ç»„</td></tr><tr><td>mode</td><td>æŒ‡å®šæƒé™</td></tr><tr><td>force</td><td>è®¾ä¸ºyesï¼Œå³å¼ºåˆ¶ä¸‹è½½ï¼Œå¦‚æœåŒåæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™è¦†ç›–ï¼›è®¾ä¸ºnoï¼Œåˆ™åªæœ‰åœ¨æ–‡ä»¶ä¸å­˜åœ¨æ—¶æ‰ä¸‹è½½</td></tr><tr><td>checksum</td><td>å¯¹ä¸‹è½½åçš„æ–‡ä»¶è®¡ç®—æ ¡éªŒå’Œï¼Œä¸ checksum æŒ‡å®šçš„æ ¡éªŒå’Œè¿›è¡Œæ¯”å¯¹ï¼Œç¡®ä¿ä¸‹è½½æ–‡ä»¶çš„å®Œå¥½æ€§</td></tr><tr><td>url_username</td><td>åŸºäºhttp basicè®¤è¯çš„ç”¨æˆ·åï¼ˆå¦‚æœè®¿é—®çš„URLéœ€è¦çš„è¯ï¼‰</td></tr><tr><td>url_password</td><td>åŸºäºhttp basicè®¤è¯çš„å¯†ç ï¼Œå’Œurl_usernameä¸€èµ·ä½¿ç”¨ï¼ˆå¦‚æœURLå…è®¸ä½¿ç”¨ç©ºå¯†ç ï¼Œåˆ™ä»…éœ€æä¾›url_usernameå³å¯ï¼‰</td></tr><tr><td>validate_certs</td><td>æ˜¯å¦æ ¡éªŒ SSL è¯ä¹¦ï¼Œé»˜è®¤ä¸ºyes</td></tr><tr><td>timeout</td><td>URL è¯·æ±‚çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸º s</td></tr></tbody></table><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;"># æå‰ä¸‹è½½å¥½è½¯ä»¶åŒ…éªŒè¯å“ˆå¸Œå€¼</span></span>
<span class="line"><span style="color:#F0F3F6;">[root@ansible </span><span style="color:#FF9492;">~</span><span style="color:#F0F3F6;">] wget http://nginx.org/download/nginx-1.18.0.tar.gz</span></span>
<span class="line"><span style="color:#BDC4CC;"># ä½¿ç”¨å¦‚ä¸‹ä¸¤æ¡å‘½ä»¤éªŒè¯å“ˆå¸Œå€¼</span></span>
<span class="line"><span style="color:#F0F3F6;">[root@ansible </span><span style="color:#FF9492;">~</span><span style="color:#F0F3F6;">] openssl md5 nginx-1.18.0.tar.gz</span></span>
<span class="line"><span style="color:#F0F3F6;">[root@ansible </span><span style="color:#FF9492;">~</span><span style="color:#F0F3F6;">] md5sum nginx-1.18.0.tar.gz </span></span>
<span class="line"><span style="color:#FFB757;">b2d33d24d89b8b1f87ff5d251aa27eb8</span><span style="color:#ADDCFF;">  nginx-1.18.0.tar.gz</span></span>
<span class="line"><span style="color:#BDC4CC;"># ansible get_url æ¨¡å—ä½¿ç”¨</span></span>
<span class="line"><span style="color:#F0F3F6;">[root@ansible </span><span style="color:#FF9492;">~</span><span style="color:#F0F3F6;">] ansible websrvs -m get_url -a </span><span style="color:#ADDCFF;">&#39;url=http://nginx.org/download/nginx-1.18.0.tar.gz dest=/usr/local/src/nginx.tar.gz checksum=&quot;md5:b2d33d24d89b8b1f87ff5d251aa27eb8&quot;&#39;</span></span></code></pre></div><h2 id="fetchæ¨¡å—" tabindex="-1"><a class="header-anchor" href="#fetchæ¨¡å—"><span>fetchæ¨¡å—</span></a></h2><p>ä»è¿œç¨‹ä¸»æœºæå–æ–‡ä»¶è‡³ Ansible çš„ä¸»æ§ç«¯ã€‚ ä¸<code>copy</code>æ¨¡å—ç›¸åï¼Œç›®å‰ä¸æ”¯æŒç›®å½•ï¼ˆå¯ä»¥å°†ç›®å½•æ‰“åŒ…ï¼Œç„¶åå°†å‹ç¼©åŒ…æ‹·è´è‡³ Ansible ä¸»æ§ç«¯ï¼‰ã€‚</p><p>å¸¸ç”¨äºå¤åˆ¶å®¢æˆ·ç«¯çš„æ—¥å¿—æ–‡ä»¶è‡³ Ansible ä¸»æ§ç«¯ã€‚</p><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>src</td><td>åœ¨è¿œç¨‹æ‹‰å–çš„æ–‡ä»¶ï¼Œå¹¶ä¸”å¿…é¡»æ˜¯ä¸€ä¸ªfileï¼Œä¸èƒ½æ˜¯ç›®å½•</td></tr><tr><td>dest</td><td>ç”¨æ¥å­˜æ”¾æ–‡ä»¶çš„ç›®å½•</td></tr></tbody></table><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> fetch</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;src=/var/log/messages dest=/root/logs&#39;</span></span></code></pre></div><h2 id="file-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#file-æ¨¡å—"><span>file æ¨¡å—</span></a></h2><p>æ–‡ä»¶ç®¡ç†æ¨¡å—ï¼Œç”¨äºå¯¹æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ç›¸å…³çš„æ“ä½œã€‚ä¸»è¦ç”¨æ¥è®¾ç½®æ–‡ä»¶ã€é“¾æ¥ã€ç›®å½•çš„å±æ€§ï¼Œæˆ–è€…ç§»é™¤æ–‡ä»¶ã€é“¾æ¥ã€ç›®å½•ã€‚æ¯”å¦‚ï¼šåˆ›å»ºæ–‡ä»¶æˆ–ç›®å½•ï¼Œåˆ é™¤æ–‡ä»¶æˆ–ç›®å½•ï¼Œè®¾ç½®æ–‡ä»¶ç›®å½•å±æ€§ï¼Œåˆ›å»ºç›®å½•è½¯é“¾æ¥ç­‰ç­‰ã€‚</p><p>å¹‚ç­‰æ€§ï¼šä»»æ„æ¬¡æ‰§è¡Œæ‰€äº§ç”Ÿçš„å½±å“å‡ä¸ä¸€æ¬¡æ‰§è¡Œçš„å½±å“ç›¸åŒã€‚</p><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th><th>å–å€¼/æ•°æ®ç±»å‹</th></tr></thead><tbody><tr><td>path</td><td>å¿…é€‰é¡¹ï¼ŒæŒ‡å®šè¿œç¨‹ä¸»æœºç›®å½•æˆ–æ–‡ä»¶ä¿¡æ¯</td><td>path</td></tr><tr><td>mode</td><td>å®šä¹‰æ–‡ä»¶/ç›®å½•çš„æƒé™</td><td>string</td></tr><tr><td>state</td><td>çŠ¶æ€</td><td>directory(å¦‚æœç›®å½•ä¸å­˜åœ¨ï¼Œå°±åˆ›å»ºç›®å½•)<br>file(å³ä½¿æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¹Ÿä¸ä¼šè¢«åˆ›å»º)<br>link(åˆ›å»ºè½¯è¿æ¥)<br>hard(åˆ›å»ºç¡¬é“¾æ¥)<br>touch(å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶æˆ–ç›®å½•å·²å­˜åœ¨ï¼Œåˆ™æ›´æ–°å…¶æœ€åä¿®æ”¹æ—¶é—´)<br>absent(åˆ é™¤ç›®å½•ã€æ–‡ä»¶æˆ–è€…å–æ¶ˆé“¾æ¥æ–‡ä»¶)</td></tr><tr><td>owner</td><td>å®šä¹‰æ–‡ä»¶/ç›®å½•çš„å±ä¸»ï¼Œåé¢å¿…é¡»è·Ÿä¸Špathï¼šå®šä¹‰æ–‡ä»¶/ç›®å½•çš„è·¯å¾„</td><td>string</td></tr><tr><td>group</td><td>å®šä¹‰æ–‡ä»¶/ç›®å½•çš„å±ç»„ï¼Œåé¢å¯ä»¥åŠ ä¸Šmodeï¼šå®šä¹‰æ–‡ä»¶/ç›®å½•çš„æƒé™</td><td>string</td></tr><tr><td>force</td><td>éœ€è¦åœ¨ä¸¤ç§æƒ…å†µä¸‹å¼ºåˆ¶åˆ›å»ºè½¯é“¾æ¥ï¼Œä¸€ç§æ˜¯æºæ–‡ä»¶ä¸å­˜åœ¨ï¼Œä½†ä¹‹åä¼šå»ºç«‹çš„æƒ…å†µä¸‹ï¼›å¦ä¸€ç§æ˜¯ç›®æ ‡è½¯é“¾æ¥å·²å­˜åœ¨ï¼Œéœ€è¦å…ˆå–æ¶ˆä¹‹å‰çš„è½¯é“¾ï¼Œç„¶ååˆ›å»ºæ–°çš„è½¯é“¾</td><td>no(é»˜è®¤)/yes</td></tr><tr><td>recurse</td><td>é€’å½’è®¾ç½®æ–‡ä»¶çš„å±æ€§ï¼Œåªå¯¹ç›®å½•æœ‰æ•ˆï¼Œåé¢è·Ÿä¸Šsrcï¼šè¢«é“¾æ¥çš„æºæ–‡ä»¶è·¯å¾„ï¼Œåªåº”ç”¨äºstate=linkçš„æƒ…å†µ</td><td></td></tr><tr><td>dest</td><td>è¢«é“¾æ¥åˆ°çš„è·¯å¾„ï¼Œåªåº”ç”¨äºstate=linkçš„æƒ…å†µ</td><td></td></tr></tbody></table><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;"># åˆ›å»ºç©ºæ–‡ä»¶</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> all</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> file</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;path=/data/test.txt state=touch&#39;</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> all</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> file</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;path=/root/test.txt state=touch owner=wangj mode=755&quot;</span></span>
<span class="line"><span style="color:#BDC4CC;"># åˆ›å»ºç›®å½• state=directory</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> all</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> file</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;path=/data/mysql state=directory owner=mysql group=mysql&quot;</span></span>
<span class="line"><span style="color:#BDC4CC;"># åˆ›å»ºè½¯é“¾æ¥ state=link</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> all</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> file</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;src=/data/testfile dest=/data/testfile-link state=link&#39;</span></span>
<span class="line"><span style="color:#BDC4CC;"># é€’å½’ä¿®æ”¹ç›®å½•å±æ€§, ä½†ä¸é€’å½’è‡³å­ç›®å½•</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> all</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> file</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;path=/data/mysql state=directory owner=mysql group=mysql&quot;</span></span>
<span class="line"><span style="color:#BDC4CC;"># recurse å‚æ•°</span></span>
<span class="line"><span style="color:#BDC4CC;"># é€’å½’ä¿®æ”¹ç›®å½•åŠå­ç›®å½•çš„å±æ€§</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> all</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> file</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;path=/data/mysql state=directory owner=mysql group=mysql recurse=yes&quot;</span></span>
<span class="line"><span style="color:#BDC4CC;"># åˆ é™¤æ–‡ä»¶æˆ–ç›®å½• state=absent</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> all</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> file</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;path=/data/mysql state=absent&quot;</span></span></code></pre></div><h2 id="stat-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#stat-æ¨¡å—"><span>stat æ¨¡å—</span></a></h2><p><code>stat</code>æ¨¡å—å°†è·å–æŒ‡å®šæ–‡ä»¶æˆ–ç›®å½•çš„ä¿¡æ¯ï¼Œå¹¶ä½¿ç”¨<code>register</code>å‚æ•°å°†å…¶ä¿å­˜ã€‚</p><p>é€‰é¡¹ï¼š</p><ul><li><code>path</code>ï¼šæ–‡ä»¶/å¯¹è±¡çš„å®Œæ•´è·¯å¾„(å¿…é¡»)</li></ul><p>å¸¸ç”¨çš„è¿”å›å€¼åˆ¤æ–­ï¼š</p><ul><li><code>exists</code>ï¼šåˆ¤æ–­æ˜¯å¦å­˜åœ¨</li><li><code>isuid</code>ï¼šè°ƒç”¨ç”¨æˆ·çš„ ID ä¸æ‰€æœ‰è€… ID æ˜¯å¦åŒ¹é…</li></ul><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#F0F3F6;">[root@ansible </span><span style="color:#FF9492;">~</span><span style="color:#F0F3F6;">] ansible 127.0.0.1 -m stat -a </span><span style="color:#ADDCFF;">&#39;path=/etc/passwd&#39;</span></span>
<span class="line"><span style="color:#FFB757;">127.0.0.1</span><span style="color:#FF9492;"> |</span><span style="color:#FFB757;"> SUCCESS</span><span style="color:#F0F3F6;"> =</span><span style="color:#FF9492;">&gt;</span><span style="color:#ADDCFF;"> {</span></span>
<span class="line"><span style="color:#FFB757;">    &quot;changed&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#91CBFF;"> false</span><span style="color:#ADDCFF;">,</span></span>
<span class="line"><span style="color:#FFB757;">    &quot;stat&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#ADDCFF;"> {</span></span>
<span class="line"><span style="color:#FFB757;">        &quot;atime&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#ADDCFF;"> 1730942083.759907,</span></span>
<span class="line"><span style="color:#FFB757;">        &quot;attr_flags&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#ADDCFF;"> &quot;e&quot;,</span></span>
<span class="line"><span style="color:#FFB757;">        &quot;attributes&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#F0F3F6;"> [</span></span>
<span class="line"><span style="color:#FFB757;">            &quot;extents&quot;</span></span>
<span class="line"><span style="color:#F0F3F6;">        ],</span></span>
<span class="line"><span style="color:#FFB757;">        &quot;block_size&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#ADDCFF;"> 4096,</span></span>
<span class="line"><span style="color:#FFB757;">        &quot;blocks&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#ADDCFF;"> 8,</span></span>
<span class="line"><span style="color:#FFB757;">        &quot;charset&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#ADDCFF;"> &quot;us-ascii&quot;,</span></span>
<span class="line"><span style="color:#FFB757;">        &quot;checksum&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#ADDCFF;"> &quot;3b58457efd824fb7f3dc2fb1473bb99fe0958600&quot;,</span></span>
<span class="line"><span style="color:#FFB757;">        &quot;ctime&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#ADDCFF;"> 1729236170.6131256,</span></span>
<span class="line"><span style="color:#FFB757;">        &quot;dev&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#ADDCFF;"> 45830,</span></span>
<span class="line"><span style="color:#FFB757;">        &quot;device_type&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#ADDCFF;"> 0,</span></span>
<span class="line"><span style="color:#FFB757;">        &quot;executable&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#91CBFF;"> false</span><span style="color:#ADDCFF;">,</span></span>
<span class="line"><span style="color:#FFB757;">        &quot;exists&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#91CBFF;"> true</span><span style="color:#ADDCFF;">,</span></span>
<span class="line"><span style="color:#FFB757;">        &quot;gid&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#ADDCFF;"> 0,</span></span>
<span class="line"><span style="color:#FFB757;">        &quot;gr_name&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#ADDCFF;"> &quot;root&quot;,</span></span>
<span class="line"><span style="color:#FFB757;">        &quot;inode&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#ADDCFF;"> 178,</span></span>
<span class="line"><span style="color:#FFB757;">        &quot;isblk&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#91CBFF;"> false</span><span style="color:#ADDCFF;">,</span></span>
<span class="line"><span style="color:#FFB757;">        &quot;ischr&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#91CBFF;"> false</span><span style="color:#ADDCFF;">,</span></span>
<span class="line"><span style="color:#FFB757;">        &quot;isdir&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#91CBFF;"> false</span><span style="color:#ADDCFF;">,</span></span>
<span class="line"><span style="color:#FFB757;">        &quot;isfifo&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#91CBFF;"> false</span><span style="color:#ADDCFF;">,</span></span>
<span class="line"><span style="color:#FFB757;">        &quot;isgid&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#91CBFF;"> false</span><span style="color:#ADDCFF;">,</span></span>
<span class="line"><span style="color:#FFB757;">        &quot;islnk&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#91CBFF;"> false</span><span style="color:#ADDCFF;">,</span></span>
<span class="line"><span style="color:#FFB757;">        &quot;isreg&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#91CBFF;"> true</span><span style="color:#ADDCFF;">,</span></span>
<span class="line"><span style="color:#FFB757;">        &quot;issock&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#91CBFF;"> false</span><span style="color:#ADDCFF;">,</span></span>
<span class="line"><span style="color:#FFB757;">        &quot;isuid&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#91CBFF;"> false</span><span style="color:#ADDCFF;">,</span></span>
<span class="line"><span style="color:#91CBFF;">        ...</span></span>
<span class="line"><span style="color:#F0F3F6;">    }</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span></code></pre></div><p>ä½¿ç”¨<code>stat</code>æ¨¡å—éªŒè¯æ–‡ä»¶çŠ¶æ€ï¼Œé€šè¿‡æ–‡ä»¶çŠ¶æ€æ¨è¿›ä¸‹ä¸€æ­¥å®æ–½åŠ¨ä½œã€‚</p><div class="language-yml" data-highlighter="shiki" data-ext="yml" data-title="yml" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">  - </span><span style="color:#72F088;">name</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">install | Check if file is already configured.</span></span>
<span class="line"><span style="color:#72F088;">    stat</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">path={{ nginx_file_path }}</span></span>
<span class="line"><span style="color:#72F088;">    connection</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">local</span></span>
<span class="line"><span style="color:#72F088;">    register</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">nginx_file_result</span></span>
<span class="line"><span style="color:#F0F3F6;">    </span></span>
<span class="line"><span style="color:#F0F3F6;">  - </span><span style="color:#72F088;">name</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">install | Download nginx file</span></span>
<span class="line"><span style="color:#72F088;">    get_url</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">url={{ nginx_file_url }} dest={{ software_files_path }} validate_certs=no</span></span>
<span class="line"><span style="color:#72F088;">    connection</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">local</span></span>
<span class="line"><span style="color:#72F088;">    when</span><span style="color:#F0F3F6;">: , </span><span style="color:#ADDCFF;">not. nginx_file_result.stat.exists</span></span></code></pre></div><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;"># æ£€æŸ¥ websrvs ä¸»æœºç»„ä¸­çš„æ‰€æœ‰ä¸»æœºä¸Šçš„ /data/mysql è·¯å¾„æ˜¯å¦å­˜åœ¨</span></span>
<span class="line"><span style="color:#BDC4CC;"># å¦‚æœè·¯å¾„ä¸å­˜åœ¨, å®ƒå°†åœ¨æ¯ä¸ªä¸»æœºä¸Šè¾“å‡ºä¸€æ¡è°ƒè¯•ä¿¡æ¯, è¯´æ˜è¯¥è·¯å¾„ä¸å­˜åœ¨</span></span>
<span class="line"><span style="color:#F0F3F6;">[root@ansible ansible] cat stat.yml</span></span>
<span class="line"><span style="color:#FFB757;">---</span></span>
<span class="line"><span style="color:#FFB757;">-</span><span style="color:#ADDCFF;"> hosts:</span><span style="color:#ADDCFF;"> websrvs</span></span>
<span class="line"><span style="color:#FFB757;">  tasks:</span></span>
<span class="line"><span style="color:#FFB757;">    -</span><span style="color:#ADDCFF;"> name:</span><span style="color:#ADDCFF;"> Check</span><span style="color:#ADDCFF;"> file</span></span>
<span class="line"><span style="color:#91CBFF;">      stat</span><span style="color:#ADDCFF;">:</span><span style="color:#ADDCFF;"> path=/data/mysql</span></span>
<span class="line"><span style="color:#FFB757;">      register:</span><span style="color:#ADDCFF;"> st</span></span>
<span class="line"><span style="color:#FFB757;">    -</span><span style="color:#ADDCFF;"> name:</span><span style="color:#ADDCFF;"> debug</span></span>
<span class="line"><span style="color:#FFB757;">      debug:</span></span>
<span class="line"><span style="color:#FFB757;">        msg:</span><span style="color:#ADDCFF;"> &quot;/data/mysql is not exist&quot;</span></span>
<span class="line"><span style="color:#FFB757;">      when:</span><span style="color:#ADDCFF;"> not</span><span style="color:#ADDCFF;"> st.stat.exists</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">[root@ansible ansible] ansible-playbook stat.yml</span></span></code></pre></div><h2 id="unarchive-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#unarchive-æ¨¡å—"><span>unarchive æ¨¡å—</span></a></h2><p>è§£å‹ç¼©ã€‚</p><p>å®ç°æœ‰ä¸¤ç§ç”¨æ³•ï¼š</p><ul><li>å°† Ansible ä¸»æœºä¸Šçš„å‹ç¼©åŒ…ä¼ åˆ°è¿œç¨‹ä¸»æœºåè§£å‹ç¼©è‡³ç‰¹å®šç›®å½•ï¼Œè®¾ç½®<code>copy=yes</code>ï¼Œæ­¤ä¸ºé»˜è®¤å€¼ï¼Œå¯çœç•¥</li><li>å°†è¿œç¨‹ä¸»æœºä¸Šçš„æŸä¸ªå‹ç¼©åŒ…è§£å‹ç¼©åˆ°æŒ‡å®šè·¯å¾„ä¸‹ï¼Œè®¾ç½®<code>copy=no</code></li></ul><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th><th>å–å€¼/æ•°æ®ç±»å‹</th></tr></thead><tbody><tr><td>copy</td><td>copy=yesï¼Œæ‹·è´çš„æ–‡ä»¶ä» ansible ä¸»æœºå¤åˆ¶åˆ°è¿œç¨‹ä¸»æœºï¼Œcopy=no è¡¨ç¤ºåœ¨è¿œç¨‹ä¸»æœºä¸Šå¯»æ‰¾æºæ–‡ä»¶è§£å‹</td><td>no/yes(é»˜è®¤)</td></tr><tr><td>src</td><td>taråŒ…æºè·¯å¾„ï¼Œå¯ä»¥æ˜¯ ansible ä¸»æœºä¸Šçš„è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯è¿œç¨‹ä¸»æœºä¸Šçš„è·¯å¾„ï¼Œå¦‚æœæ˜¯è¿œç¨‹ä¸»æœºä¸Šçš„è·¯å¾„ï¼Œåˆ™éœ€è®¾ç½® copy=no</td><td>path</td></tr><tr><td>dest</td><td>è§£å‹åæ–‡ä»¶çš„ç›®æ ‡ç»å¯¹è·¯å¾„</td><td>path</td></tr><tr><td>remote_src</td><td>å’Œ copy åŠŸèƒ½ä¸€æ ·ä¸”äº’æ–¥ï¼Œremote_src=yes è¡¨ç¤ºæ–‡ä»¶åœ¨è¿œç¨‹ä¸»æœºä¸Šï¼Œremote_src=no è¡¨ç¤ºæ–‡ä»¶åœ¨ ansible ä¸»æœºä¸Š</td><td>no(é»˜è®¤)/yes</td></tr><tr><td>mode</td><td>è®¾ç½®è§£å‹ç¼©åçš„æ–‡ä»¶æƒé™</td><td></td></tr></tbody></table><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;"># copy=yes ( é»˜è®¤å€¼ )</span></span>
<span class="line"><span style="color:#BDC4CC;"># æ‹·è´çš„æ–‡ä»¶æ˜¯ä» ansible æ§åˆ¶ä¸»æœºå¤åˆ¶åˆ°è¿œç¨‹ä¸»æœºä¸Š</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> all</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> unarchive</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;src=/root/nginx-1.18.0.tar.gz dest=/usr/local/src owner=wangj group=bin&#39;</span></span>
<span class="line"><span style="color:#BDC4CC;"># copy=no ( åœ¨è¿œç¨‹è¢«æ§ä¸»æœºä¸Šå¯»æ‰¾ src æºæ–‡ä»¶ )</span></span>
<span class="line"><span style="color:#BDC4CC;"># ansible websrvs -m get_url -a &#39;url=http://nginx.org/download/nginx-1.18.0.tar.gz dest=/root/nginx-1.18.0.tar.gz&#39;</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> all</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> unarchive</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;src=/root/nginx-1.18.0.tar.gz dest=/usr/local/src copy=no mode=0777&#39;</span></span>
<span class="line"><span style="color:#BDC4CC;"># ä¸‹è½½å‹ç¼©åŒ…å¹¶è§£å‹ç¼©è‡³æŒ‡å®šç›®å½• ( éœ€è¦æ·»åŠ å‚æ•° copy=no )</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> unarchive</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;src=http://nginx.org/download/nginx-1.18.0.tar.gz dest=/usr/local/src/ copy=no&#39;</span></span>
<span class="line"><span style="color:#BDC4CC;"># remote_src=yes ( è¡¨ç¤ºå†…å®¹åœ¨è¿œç¨‹ä¸»æœºä¸Š )</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> unarchive</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;src=https://releases.ansible.com/ansible/ansible-2.1.6.0-0.1.rc1.tar.gz dest=/usr/local/src owner=root remote_src=yes&#39;</span></span></code></pre></div><h2 id="archive-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#archive-æ¨¡å—"><span>archive æ¨¡å—</span></a></h2><p>æ‰“åŒ…å‹ç¼©ï¼Œä¿å­˜åœ¨è¢«ç®¡ç†èŠ‚ç‚¹ã€‚</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> archive</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;path=/var/log/ dest=/data/log.tar.bz2 format=bz2 owner=wangj mode=0600&#39;</span></span></code></pre></div><h2 id="hostname-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#hostname-æ¨¡å—"><span>hostname æ¨¡å—</span></a></h2><p>ç®¡ç†ä¸»æœºåã€‚</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;"># ä½¿ç”¨</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#91CBFF;"> 192.168.80.18</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> hostname</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;name=node18.wuhanjiayou.cn&#39;</span><span style="color:#F0F3F6;"> </span></span>
<span class="line"><span style="color:#BDC4CC;"># éªŒè¯</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#91CBFF;"> 192.168.80.18</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> shell</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;hostname&#39;</span></span>
<span class="line"><span style="color:#BDC4CC;"># æ³¨æ„:</span></span>
<span class="line"><span style="color:#BDC4CC;"># åƒä¸‡åˆ«ä»¥åˆ†ç»„æ¥ä¿®æ”¹ä¸»æœºå ( ä¸ç„¶æ•´ä¸ªç»„çš„ä¸»æœºåéƒ½æ˜¯åŒä¸€ä¸ª ) </span></span>
<span class="line"><span style="color:#BDC4CC;"># é™¤éä½ ç¡®å®æœ‰è¿™ä¸ªéœ€æ±‚ </span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> hostname</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;name=node.wuhanjiayou.cn&#39;</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> shell</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;hostname&#39;</span></span></code></pre></div><h2 id="cron-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#cron-æ¨¡å—"><span>cron æ¨¡å—</span></a></h2><p><code>cron</code>æ¨¡å—å¯ä»¥ å¸®åŠ©æˆ‘ä»¬æ‰¹é‡ç®¡ç†è¿œç¨‹ä¸»æœºä¸­çš„è®¡åˆ’ä»»åŠ¡ã€‚</p><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th><th>å–å€¼/æ•°æ®ç±»å‹</th></tr></thead><tbody><tr><td>day</td><td>æ—¥</td><td>1-31, *, */2, etc</td></tr><tr><td>hour</td><td>å°æ—¶</td><td>0-23, *, */2, etc</td></tr><tr><td>minute</td><td>åˆ†é’Ÿ</td><td>0-59, *, */2, etc</td></tr><tr><td>month</td><td>æœˆ</td><td>1-12, *, */2, etc</td></tr><tr><td>weekday</td><td>å‘¨</td><td>0-6 for Sunday-Saturday, *, etc</td></tr><tr><td>job</td><td>æŒ‡æ˜è¿è¡Œçš„å‘½ä»¤æ˜¯ä»€ä¹ˆ</td><td>string</td></tr><tr><td>name</td><td>å®šæ—¶ä»»åŠ¡æè¿°</td><td>string</td></tr><tr><td>reboot</td><td>ä»»åŠ¡åœ¨é‡å¯æ—¶è¿è¡Œï¼Œä¸å»ºè®®ä½¿ç”¨ï¼Œå»ºè®®ä½¿ç”¨special_time</td><td>no(é»˜è®¤)/yes</td></tr><tr><td>special_time</td><td>ç‰¹æ®Šçš„æ—¶é—´èŒƒå›´</td><td>rebootï¼ˆé‡å¯æ—¶ï¼‰ï¼Œannuallyï¼ˆæ¯å¹´ï¼‰ï¼Œmonthlyï¼ˆæ¯æœˆï¼‰ï¼Œweeklyï¼ˆæ¯å‘¨ï¼‰ï¼Œdailyï¼ˆæ¯å¤©ï¼‰ï¼Œhourlyï¼ˆæ¯å°æ—¶ï¼‰</td></tr><tr><td>state</td><td>æŒ‡å®šçŠ¶æ€</td><td>present(æ·»åŠ å®šæ—¶ä»»åŠ¡ï¼Œé»˜è®¤)/absent(åˆ é™¤å®šæ—¶ä»»åŠ¡)</td></tr><tr><td>user</td><td>ä»¥å“ªä¸ªç”¨æˆ·çš„èº«ä»½æ‰§è¡Œ</td><td>string</td></tr><tr><td>disabled</td><td>æ˜¯å¦ç¦ç”¨å®šæ—¶ä»»åŠ¡</td><td>no(é»˜è®¤)/yes</td></tr></tbody></table><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;"># åˆ›å»ºä»»åŠ¡</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#91CBFF;"> 10.0.0.8</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> cron</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;hour=2 minute=30 weekday=1-5 name=&quot;backup mysql&quot; job=/root/mysql_backup.sh&#39;</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> cron</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;minute=*/5 job=&#39;/usr/sbin/ntpdate ntp.aliyun.com &amp;&gt;/dev/null&#39; name=Synctime&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># ç¦ç”¨è®¡åˆ’ä»»åŠ¡</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> cron</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;minute=*/5 job=&#39;/usr/sbin/ntpdate 172.20.0.1 &amp;&gt;/dev/null&#39; name=Synctime disabled=yes&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># å¯ç”¨è®¡åˆ’ä»»åŠ¡</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> cron</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;minute=*/5 job=&#39;/usr/sbin/ntpdate 172.20.0.1 &amp;&gt;/dev/null&#39; name=Synctime disabled=no&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># åˆ é™¤ä»»åŠ¡</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> cron</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;name=&#39;backup mysql&#39; state=absent&quot;</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> cron</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;state=absent name=Synctime&#39;</span></span></code></pre></div><h2 id="yum-apt-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#yum-apt-æ¨¡å—"><span>yum/apt æ¨¡å—</span></a></h2><ul><li><code>yum</code>æ¨¡å—ï¼šç®¡ç†è½¯ä»¶åŒ…ï¼Œæ”¯æŒ RHELï¼ŒCentOSï¼Œfedoraï¼Œä¸æ”¯æŒ Ubuntu å…¶å®ƒç‰ˆæœ¬</li><li><code>apt</code>æ¨¡å—ï¼šç®¡ç† Debian ç›¸å…³ç‰ˆæœ¬çš„è½¯ä»¶åŒ…</li></ul><p>åç»­ï¼šæˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ¤æ–­ Linux ç³»ç»Ÿç‰ˆæœ¬æ¥å†³å®šä½¿ç”¨å“ªä¸ªæ¨¡å—ã€‚</p><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th><th>å–å€¼/æ•°æ®ç±»å‹</th></tr></thead><tbody><tr><td>name</td><td>å®‰è£…çš„åŒ…çš„åç§°</td><td>string/list</td></tr><tr><td>state</td><td>4ç§çŠ¶æ€</td><td>present(å®‰è£…)<br>latest(å®‰è£…æœ€æ–°çš„)<br>absent(å¸è½½)</td></tr><tr><td>update_cache</td><td>æ˜¯å¦å¼ºåˆ¶æ›´æ–°yumçš„ç¼“å­˜</td><td>no(é»˜è®¤)/yes</td></tr><tr><td>disable_pgp_check</td><td>æ˜¯å¦ç¦æ­¢GPG checkingï¼Œåªç”¨äºpresent or latest</td><td>no(é»˜è®¤)/yes</td></tr><tr><td>disablerepo</td><td>ä¸´æ—¶ç¦æ­¢ä½¿ç”¨yumåº“ã€‚ åªç”¨äºå®‰è£…æˆ–æ›´æ–°æ—¶</td><td></td></tr><tr><td>enablerepo</td><td>ä¸´æ—¶ä½¿ç”¨çš„yumåº“ã€‚åªç”¨äºå®‰è£…æˆ–æ›´æ–°æ—¶</td><td></td></tr><tr><td>conf_file</td><td>æŒ‡å®šè¿œç¨‹yumå®‰è£…æ—¶æ‰€ä¾èµ–çš„é…ç½®æ–‡ä»¶ï¼ˆå®‰è£…æœ¬åœ°å·²æœ‰çš„åŒ…ï¼‰</td><td></td></tr></tbody></table><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;"># å®‰è£…: present</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> yum</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;name=httpd state=present&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># å¸è½½: absent</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> yum</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;name=httpd state=absent&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># å¯ç”¨ epel æºè¿›è¡Œå®‰è£…</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> yum</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;name=nginx state=present enablerepo=epel&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># å‡çº§é™¤ kernel å’Œ foo å¼€å¤´ä»¥å¤–çš„æ‰€æœ‰åŒ… ( å®‰è£…å¤šä¸ªè½¯ä»¶åŒ… )</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> yum</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;name=* state=lastest exclude=kernel*,foo*&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># ä¸€æ¬¡å®‰è£…å¤šä¸ªè½¯ä»¶åŒ…</span></span>
<span class="line"><span style="color:#F0F3F6;">[root@ansible </span><span style="color:#FF9492;">~</span><span style="color:#F0F3F6;">] ansible websrvs -m yum -a </span><span style="color:#ADDCFF;">&#39;name=sl,cowsay&#39;</span></span></code></pre></div><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;"># å®‰è£…è½¯ä»¶åŒ…</span></span>
<span class="line"><span style="color:#BDC4CC;"># æ³¨æ„: RadHat ä½¿ç”¨ yum æ¨¡å—, Ubuntu ä½¿ç”¨ apt æ¨¡å—</span></span>
<span class="line"><span style="color:#F0F3F6;">[root@centos8 </span><span style="color:#FF9492;">~</span><span style="color:#F0F3F6;">] ansible 192.168.80.18 -m apt -a </span><span style="color:#ADDCFF;">&#39;name=bb,sl,cowsay,cmatrix,oneko,hollywood,boxes,libaa-bin,x11-apps state=present&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># å¸è½½è½¯ä»¶åŒ…</span></span>
<span class="line"><span style="color:#BDC4CC;"># æ³¨æ„: RadHat ä½¿ç”¨ yum æ¨¡å—, Ubuntu ä½¿ç”¨ apt æ¨¡å—</span></span>
<span class="line"><span style="color:#F0F3F6;">[root@centos8 </span><span style="color:#FF9492;">~</span><span style="color:#F0F3F6;">] ansible websrvs -m apt -a </span><span style="color:#ADDCFF;">&#39;name=sl,cowsay state=absent&#39;</span></span>
<span class="line"><span style="color:#F0F3F6;">[root@ansible </span><span style="color:#FF9492;">~</span><span style="color:#F0F3F6;">] ansible localhost -m yum -a </span><span style="color:#ADDCFF;">&quot;list=tree&quot;</span></span></code></pre></div><h2 id="yum-repository-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#yum-repository-æ¨¡å—"><span>yum_repository æ¨¡å—</span></a></h2><p>å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ‰¹é‡ç®¡ç†è¿œç¨‹ä¸»æœºä¸Šçš„ Yum ä»“åº“ã€‚</p><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>name</td><td>æŒ‡å®šä»“åº“åç§°ï¼Œå¯¹åº”yumé…ç½®æ–‡ä»¶ä¸­<code>[]</code>ä¸­çš„å†…å®¹ï¼Œå¿…é¡»å‚æ•°</td></tr><tr><td>baseurl</td><td>æŒ‡å®šyumä»“åº“çš„æºåœ°å€ï¼Œå¯¹åº”yumé…ç½®æ–‡ä»¶ä¸­baseurlï¼Œå¿…é¡»å‚æ•°</td></tr><tr><td>description</td><td>è®¾ç½®ä»“åº“çš„æ³¨é‡Šä¿¡æ¯ï¼Œå¯¹åº”yumé…ç½®æ–‡ä»¶ä¸­çš„nameï¼Œå¿…é¡»å‚æ•°</td></tr><tr><td>file</td><td>è®¾ç½®ä»“åº“çš„é…ç½®æ–‡ä»¶åç§°ï¼Œå¯¹åº”yumé…ç½®æ–‡ä»¶çš„åç§°ï¼ˆ.repoçš„å‰ç¼€ï¼‰</td></tr><tr><td>enabled</td><td>è®¾ç½®æ˜¯å¦å¯ç”¨yumæºï¼Œé»˜è®¤å€¼ä¸ºyesï¼Œå¯¹åº”yumé…ç½®æ–‡ä»¶ä¸­çš„enabled</td></tr><tr><td>gpgcheck</td><td>è®¾ç½®æ˜¯å¦å¯ç”¨éªŒè¯ï¼Œé»˜è®¤å€¼ä¸ºnoï¼Œå¯¹åº”yumé…ç½®æ–‡ä»¶ä¸­çš„gpgcheck</td></tr><tr><td>gpgcakey</td><td>å½“gpgcheck=yesæ—¶ï¼Œéœ€è¦ä½¿ç”¨æ­¤å‚æ•°æŒ‡å®šéªŒè¯åŒ…æ‰€éœ€çš„å…¬é’¥</td></tr><tr><td>state</td><td>é»˜è®¤å€¼ä¸ºpresentï¼Œå½“å€¼ä¸ºabsentæ—¶ï¼Œè¡¨ç¤ºåˆ é™¤å¯¹åº”çš„yumæº</td></tr></tbody></table><div class="language-yaml" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#72F088;">task</span><span style="color:#F0F3F6;">:</span></span>
<span class="line"><span style="color:#F0F3F6;">	- </span><span style="color:#72F088;">name</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">Add multiple repositories into the same file (1/2)</span><span style="color:#F0F3F6;"> </span></span>
<span class="line"><span style="color:#72F088;">	  yum_repository</span><span style="color:#F0F3F6;">:</span></span>
<span class="line"><span style="color:#72F088;">		  name</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">epel</span></span>
<span class="line"><span style="color:#72F088;">		  description</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">EPEL YUM repo</span></span>
<span class="line"><span style="color:#72F088;">		  file</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">external_repos</span></span>
<span class="line"><span style="color:#72F088;">		  baseurl</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">https://download.fedoraproject.org/pub/epel/$releasever/$basearch/</span></span>
<span class="line"><span style="color:#72F088;">		  gpgcheck</span><span style="color:#F0F3F6;">: </span><span style="color:#91CBFF;">no</span></span>
<span class="line"><span style="color:#F0F3F6;">	- </span><span style="color:#72F088;">name</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">Add multiple repositories into the same file (2/2)</span></span>
<span class="line"><span style="color:#72F088;">	  yum_repository</span><span style="color:#F0F3F6;">:</span></span>
<span class="line"><span style="color:#72F088;">	    name</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">rpmforge</span></span>
<span class="line"><span style="color:#72F088;">			description</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">RPMforge YUM repo</span></span>
<span class="line"><span style="color:#72F088;">			file</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">external_repos</span></span>
<span class="line"><span style="color:#72F088;">			baseurl</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">http://apt.sw.be/redhat/el7/en/$basearch/rpmforge</span></span>
<span class="line"><span style="color:#72F088;">			mirrorlist</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">http://mirrorlist.repoforge.org/el7/mirrors-rpmforge</span></span>
<span class="line"><span style="color:#72F088;">			enabled</span><span style="color:#F0F3F6;">: </span><span style="color:#91CBFF;">no</span></span>
<span class="line"><span style="color:#F0F3F6;">	- </span><span style="color:#72F088;">name</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">Remove repository from a specific repo file</span></span>
<span class="line"><span style="color:#72F088;">	  yum_repository</span><span style="color:#F0F3F6;">:</span></span>
<span class="line"><span style="color:#72F088;">		  name</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">epel</span></span>
<span class="line"><span style="color:#72F088;">			file</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">external_repos</span></span>
<span class="line"><span style="color:#72F088;">			state</span><span style="color:#F0F3F6;">: </span><span style="color:#ADDCFF;">absent</span></span></code></pre></div><p>åˆ›å»ºå’Œåˆ é™¤ä»“åº“</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#F0F3F6;">[root@ansible </span><span style="color:#FF9492;">~</span><span style="color:#F0F3F6;">] cat yum_repo.yml</span></span>
<span class="line"><span style="color:#FFB757;">-</span><span style="color:#ADDCFF;"> hosts:</span><span style="color:#ADDCFF;"> websrvs</span></span>
<span class="line"><span style="color:#FFB757;">  tasks:</span></span>
<span class="line"><span style="color:#FFB757;">    -</span><span style="color:#ADDCFF;"> name:</span><span style="color:#ADDCFF;"> Add</span><span style="color:#ADDCFF;"> multiple</span><span style="color:#ADDCFF;"> repositories</span><span style="color:#ADDCFF;"> into</span><span style="color:#ADDCFF;"> the</span><span style="color:#ADDCFF;"> same</span><span style="color:#ADDCFF;"> file</span><span style="color:#F0F3F6;"> </span></span>
<span class="line"><span style="color:#FFB757;">      yum_repository:</span></span>
<span class="line"><span style="color:#FFB757;">      name:</span><span style="color:#ADDCFF;"> test</span></span>
<span class="line"><span style="color:#FFB757;">      description:</span><span style="color:#ADDCFF;"> EPEL</span><span style="color:#ADDCFF;"> YUM</span><span style="color:#ADDCFF;"> repo</span></span>
<span class="line"><span style="color:#FFB757;">      file:</span><span style="color:#ADDCFF;"> external_repos</span></span>
<span class="line"><span style="color:#FFB757;">      baseurl:</span><span style="color:#ADDCFF;"> https://download.fedoraproject.org/pub/epel/</span><span style="color:#F0F3F6;">$releasever</span><span style="color:#ADDCFF;">/</span><span style="color:#F0F3F6;">$basearch</span><span style="color:#ADDCFF;">/</span></span>
<span class="line"><span style="color:#FFB757;">      gpgcheck:</span><span style="color:#ADDCFF;"> no</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">[root@ansible </span><span style="color:#FF9492;">~</span><span style="color:#F0F3F6;">] ansible-playbook yum_repo.yml</span></span>
<span class="line"><span style="color:#F0F3F6;">[root@web1 </span><span style="color:#FF9492;">~</span><span style="color:#F0F3F6;">] cat /etc/yum.repos.d/external_repos.repo</span></span>
<span class="line"><span style="color:#F0F3F6;">[test]</span></span>
<span class="line"><span style="color:#FFB757;">baseurl</span><span style="color:#ADDCFF;"> =</span><span style="color:#ADDCFF;"> https://download.fedoraproject.org/pub/epel/</span><span style="color:#F0F3F6;">$releasever</span><span style="color:#ADDCFF;">/</span><span style="color:#F0F3F6;">$basearch</span><span style="color:#ADDCFF;">/</span></span>
<span class="line"><span style="color:#FFB757;">gpgcheck</span><span style="color:#ADDCFF;"> =</span><span style="color:#91CBFF;"> 0</span></span>
<span class="line"><span style="color:#FFB757;">name</span><span style="color:#ADDCFF;"> =</span><span style="color:#ADDCFF;"> EPEL</span><span style="color:#ADDCFF;"> YUM</span><span style="color:#ADDCFF;"> repo</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">[root@ansible </span><span style="color:#FF9492;">~</span><span style="color:#F0F3F6;">] cat remove_yum_repo.yml</span></span>
<span class="line"><span style="color:#FFB757;">-</span><span style="color:#ADDCFF;"> hosts:</span><span style="color:#ADDCFF;"> websrvs</span></span>
<span class="line"><span style="color:#FFB757;">  tasks:</span></span>
<span class="line"><span style="color:#FFB757;">    -</span><span style="color:#ADDCFF;"> name:</span><span style="color:#ADDCFF;"> remove</span><span style="color:#ADDCFF;"> repo</span><span style="color:#F0F3F6;"> </span></span>
<span class="line"><span style="color:#FFB757;">      yum_repository:</span></span>
<span class="line"><span style="color:#FFB757;">        name:</span><span style="color:#ADDCFF;"> test</span></span>
<span class="line"><span style="color:#FFB757;">        file:</span><span style="color:#ADDCFF;"> external_repos</span></span>
<span class="line"><span style="color:#FFB757;">        state:</span><span style="color:#ADDCFF;"> absent</span></span>
<span class="line"><span style="color:#F0F3F6;">        </span></span>
<span class="line"><span style="color:#F0F3F6;">[root@ansible </span><span style="color:#FF9492;">~</span><span style="color:#F0F3F6;">] ansible-playbook remove_yum_repo.yml</span></span></code></pre></div><h2 id="service-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#service-æ¨¡å—"><span>service æ¨¡å—</span></a></h2><p>ç®¡ç†è¿œç¨‹ä¸»æœºä¸Šçš„æœåŠ¡ã€‚</p><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th><th>å–å€¼/æ•°æ®ç±»å‹</th></tr></thead><tbody><tr><td>name</td><td>å¿…é€‰é¡¹ï¼ŒæœåŠ¡åç§°</td><td>string</td></tr><tr><td>state</td><td>æœ‰å››ç§çŠ¶æ€</td><td>started(å¯åŠ¨)<br>stopped(åœæ­¢)<br>restarted(é‡å¯)<br>reloaded(é‡è½½é…ç½®)</td></tr><tr><td>enabled</td><td>æ˜¯å¦å¼€æœºå¯åŠ¨</td><td>no/yes</td></tr><tr><td>runlevel</td><td>å¼€æœºå¯åŠ¨çš„çº§åˆ«ï¼Œä¸€èˆ¬ä¸ç”¨æŒ‡å®š</td><td>&quot;default&quot;(é»˜è®¤)/string</td></tr><tr><td>sleep</td><td>åœ¨é‡å¯æœåŠ¡çš„è¿‡ç¨‹ä¸­ï¼Œæ˜¯å¦ç­‰å¾…ã€‚å¦‚åœ¨æœåŠ¡å…³é—­ä»¥åç­‰å¾…2ç§’å†å¯åŠ¨</td><td>integer</td></tr></tbody></table><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;"># å¯åŠ¨è¿œç¨‹ä¸»æœºçš„ httpd æœåŠ¡,å¹¶å®ç°å¼€æœºè‡ªå¯</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#91CBFF;"> 192.168.80.18</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> service</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;name=httpd state=started enabled=yes&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># åœæ­¢æœåŠ¡   </span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> service</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;name=httpd state=stopped&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># ç”Ÿæ•ˆæœåŠ¡</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> service</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;name=httpd state=reloaded&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># é‡å¯æœåŠ¡</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> shell</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;sed -i &#39;s/^Listen 80/Listen 8080/&#39; /etc/httpd/conf/httpd.conf&quot;</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> service</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;name=httpd state=restarted&#39;</span></span></code></pre></div><h2 id="user-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#user-æ¨¡å—"><span>user æ¨¡å—</span></a></h2><p>æ‰¹é‡ç®¡ç†è¿œç¨‹ä¸»æœºä¸Šçš„ç”¨æˆ·ï¼Œæ¯”å¦‚åˆ›å»ºç”¨æˆ·ã€ä¿®æ”¹ç”¨æˆ·ã€åˆ é™¤ç”¨æˆ·ã€ä¸ºç”¨æˆ·åˆ›å»ºå¯†é’¥å¯¹ç­‰æ“ä½œã€‚</p><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th><th>å–å€¼/æ•°æ®ç±»å‹</th></tr></thead><tbody><tr><td>name</td><td>ç”¨æˆ·åï¼Œå¿…é€‰å‚æ•°</td><td>string</td></tr><tr><td>state</td><td>è®¾ç½®å¸å·çŠ¶æ€</td><td>present(åˆ›å»ºï¼Œé»˜è®¤)/absent</td></tr><tr><td>system</td><td>æ˜¯å¦ä¸ºç³»ç»Ÿç”¨æˆ·</td><td>no(é»˜è®¤)/yes</td></tr><tr><td>uid</td><td>æŒ‡å®šç”¨æˆ·çš„uid</td><td>integer</td></tr><tr><td>group</td><td>æŒ‡å®šåŸºæœ¬ç»„</td><td>string</td></tr><tr><td>groups</td><td>æŒ‡å®šé™„åŠ ç»„ï¼Œå¦‚æœæŒ‡å®šä¸º(groups=)è¡¨ç¤ºåˆ é™¤æ‰€æœ‰ç»„</td><td>list</td></tr><tr><td>shell</td><td>æŒ‡å®šé»˜è®¤shell</td><td>string</td></tr><tr><td>create_home</td><td>æ˜¯å¦åˆ›å»ºå®¶ç›®å½•</td><td>no/yes(é»˜è®¤)</td></tr><tr><td>password</td><td>æŒ‡å®šç”¨æˆ·å¯†ç </td><td>string</td></tr><tr><td>remove</td><td>å½“<code>state=absent</code>æ—¶ï¼Œæ˜¯å¦åˆ é™¤ç”¨æˆ·çš„å®¶ç›®å½•</td><td>no(é»˜è®¤)/yes</td></tr><tr><td>home</td><td>è®¾ç½®ç”¨æˆ·çš„å®¶ç›®å½•</td><td>path</td></tr></tbody></table><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;"># åˆ›å»ºç”¨æˆ·</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> all</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> user</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;name=user1 comment=&quot;test user&quot; uid=2048 home=/app/user1 group=root&#39;</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> all</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> user</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;name=nginx comment=nginx uid=88 group=nginx groups=&quot;root,daemon&quot; shell=/sbin/nologin system=yes create_home=no home=/data/nginx non_unique=yes&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># remove=yes è¡¨ç¤ºåˆ é™¤ç”¨æˆ·åŠå®¶ç›®å½•ç­‰æ•°æ®, é»˜è®¤ remove=no</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> all</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> user</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;name=nginx state=absent remove=yes&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># ç”Ÿæˆ 123456 åŠ å¯†çš„å¯†ç </span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> localhost</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> debug</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;msg={{ &#39;123456&#39;| password_hash(&#39;sha512&#39;,&#39;salt&#39;)}}&quot;</span></span>
<span class="line"><span style="color:#FFB757;">localhost</span><span style="color:#FF9492;"> |</span><span style="color:#FFB757;"> SUCCESS</span><span style="color:#F0F3F6;"> =</span><span style="color:#FF9492;">&gt;</span><span style="color:#ADDCFF;"> {</span></span>
<span class="line"><span style="color:#FFB757;">    &quot;msg&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#ADDCFF;"> &quot;</span><span style="color:#91CBFF;">$6</span><span style="color:#F0F3F6;">$salt$MktMKPZJ6t59GfxcJU20DwcwQzfMvOlHFVZiOVD71w</span><span style="color:#ADDCFF;">.&quot;</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># ç”¨ä¸Šé¢åˆ›å»ºçš„å¯†ç åˆ›å»ºç”¨æˆ·</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> user</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;name=test password=&quot;$6$salt$MktMKPZJ6t59GfxcJU20DwcwQzfMvOlHFVZiOVD71w.&quot;&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># åˆ›å»ºç”¨æˆ· test, å¹¶ç”Ÿæˆ 4096bit çš„ç§é’¥</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> user</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;name=test generate_ssh_key=yes ssh_key_bits=4096 ssh_key_file=.ssh/id_rsa&#39;</span></span></code></pre></div><h2 id="group-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#group-æ¨¡å—"><span>group æ¨¡å—</span></a></h2><p>ç®¡ç†ç»„ã€‚</p><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th><th>å–å€¼/æ•°æ®ç±»å‹</th></tr></thead><tbody><tr><td>gid</td><td>è®¾ç½®ç»„çš„GIDå·</td><td>integer</td></tr><tr><td>name</td><td>æŒ‡å®šç»„çš„åç§°ï¼Œå¿…å¡«é¡¹</td><td>string</td></tr><tr><td>state</td><td>æŒ‡å®šç»„çš„çŠ¶æ€</td><td>present(åˆ›å»ºï¼Œé»˜è®¤)/absent(åˆ é™¤)</td></tr><tr><td>system</td><td>æ˜¯å¦åˆ›å»ºä¸ºç³»ç»Ÿç»„</td><td>no(é»˜è®¤)/yes</td></tr></tbody></table><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;"># åˆ›å»ºç»„</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> group</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;name=nginx gid=88 system=yes&#39;</span></span>
<span class="line"><span style="color:#BDC4CC;"># åˆ é™¤ç»„</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> group</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;name=nginx state=absent&#39;</span></span></code></pre></div><h2 id="lineinfile-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#lineinfile-æ¨¡å—"><span>lineinfile æ¨¡å—</span></a></h2><p>ç›¸å½“äº<code>sed</code>ï¼Œå¯ä»¥ä¿®æ”¹æ–‡ä»¶å†…å®¹ã€‚</p><p>Ansible åœ¨ä½¿ç”¨<code>sed</code>è¿›è¡Œæ›¿æ¢æ—¶ï¼Œç»å¸¸ä¼šé‡åˆ°éœ€è¦è½¬ä¹‰çš„é—®é¢˜ï¼Œè€Œä¸” Ansible åœ¨é‡åˆ°ç‰¹æ®Šç¬¦å·è¿›è¡Œæ›¿æ¢æ—¶ï¼Œå­˜åœ¨é—®é¢˜ï¼Œæ— æ³•æ­£å¸¸è¿›è¡Œæ›¿æ¢ã€‚</p><p>å…¶å®åœ¨ Ansible è‡ªèº«æä¾›äº†ä¸¤ä¸ªæ¨¡å—ï¼š<code>lineinfile</code>æ¨¡å—å’Œ<code>replace</code>æ¨¡å—ï¼Œå¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œæ›¿æ¢ï¼Œä¸€èˆ¬åœ¨ Ansible å½“ä¸­å»ä¿®æ”¹æŸä¸ªæ–‡ä»¶çš„å•è¡Œè¿›è¡Œæ›¿æ¢çš„æ—¶å€™éœ€è¦ä½¿ç”¨<code>lineinfile</code>æ¨¡å—ã€‚</p><p>å¹‚ç­‰æ€§ï¼šé‡å¤æ‰§è¡Œä¸ä¼šåˆ›å»ºå¤šè¡Œå†…å®¹ï¼Œå¤šæ¬¡æ‰§è¡Œï¼Œä¾ç„¶åªå¢åŠ æœ‰æœ€åä¸€è¡Œã€‚</p><p>å‚æ•°ï¼š</p><ul><li><code>regexp</code>å‚æ•°ï¼šä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å¯¹åº”çš„è¡Œï¼Œå½“æ›¿æ¢æ–‡æœ¬æ—¶ï¼Œå¦‚æœæœ‰å¤šè¡Œæ–‡æœ¬éƒ½èƒ½è¢«åŒ¹é…ï¼Œåˆ™åªæœ‰æœ€åé¢è¢«åŒ¹é…åˆ°çš„é‚£è¡Œæ–‡æœ¬æ‰ä¼šè¢«æ›¿æ¢ï¼Œå½“åˆ é™¤æ–‡æœ¬æ—¶ï¼Œå¦‚æœæœ‰å¤šè¡Œæ–‡æœ¬éƒ½èƒ½è¢«åŒ¹é…ï¼Œè¿™ä¹ˆè¿™äº›è¡Œéƒ½ä¼šè¢«åˆ é™¤ã€‚å¦‚æœæƒ³è¿›è¡Œå¤šè¡ŒåŒ¹é…è¿›è¡Œæ›¿æ¢éœ€è¦ä½¿ç”¨<code>replace</code>æ¨¡å—ã€‚</li></ul><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;"># å°† Listen å¼€å¤´çš„è¡Œ,ä¿®æ”¹ä¸º Listen 8080 ( regexp å‚æ•° )</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#91CBFF;"> 192.168.80.18</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> lineinfile</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;path=/etc/httpd/conf/httpd.conf regexp=&#39;^Listen&#39; line=&#39;Listen 8080&#39;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># æ‰¹é‡ç¦ç”¨è¿œç¨‹ä¸»æœºçš„ SELinux åŠŸèƒ½</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> all</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> lineinfile</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;path=/etc/selinux/config regexp=&#39;^SELINUX=&#39; line=&#39;SELINUX=disabled&#39;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># å°† # å¼€å¤´çš„è¡Œéƒ½åˆ é™¤</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#91CBFF;"> 192.168.80.18</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> lineinfile</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;dest=/etc/fstab state=absent regexp=&quot;^#&quot;&#39;</span></span></code></pre></div><h2 id="replace-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#replace-æ¨¡å—"><span>replace æ¨¡å—</span></a></h2><p><code>lineinfile</code>æ¨¡å—ä¸<code>replace</code>æ¨¡å—åŒºåˆ«ï¼š</p><ul><li><code>lineinfile</code>æ¨¡å—<code>regexp</code>å‚æ•°ï¼šä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å¯¹åº”çš„è¡Œï¼Œå½“æ›¿æ¢æ–‡æœ¬æ—¶ï¼Œå¦‚æœæœ‰å¤šè¡Œæ–‡æœ¬éƒ½èƒ½è¢«åŒ¹é…ï¼Œåˆ™åªæœ‰æœ€åé¢è¢«åŒ¹é…åˆ°çš„é‚£è¡Œæ–‡æœ¬æ‰ä¼šè¢«æ›¿æ¢ï¼Œå½“åˆ é™¤æ–‡æœ¬æ—¶ï¼Œå¦‚æœæœ‰å¤šè¡Œæ–‡æœ¬éƒ½èƒ½è¢«åŒ¹é…ï¼Œè¿™ä¹ˆè¿™äº›è¡Œéƒ½ä¼šè¢«åˆ é™¤ã€‚</li><li><code>replace</code>æ¨¡å—ï¼šå¯ä»¥æ ¹æ®æˆ‘ä»¬æŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼æ›¿æ¢æ–‡ä»¶ä¸­çš„å­—ç¬¦ä¸²ï¼Œæ–‡ä»¶ä¸­æ‰€æœ‰è¢«åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²éƒ½ä¼šè¢«æ›¿æ¢ã€‚</li></ul><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th><th>å–å€¼/æ•°æ®ç±»å‹</th></tr></thead><tbody><tr><td>path</td><td>å¿…é¡»å‚æ•°ï¼ŒæŒ‡å®šè¦ä¿®æ”¹çš„æ–‡ä»¶</td><td></td></tr><tr><td>regexp</td><td>å¿…é¡»å‚æ•°ï¼ŒæŒ‡å®šä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼</td><td></td></tr><tr><td>replace</td><td>æ›¿æ¢regexpå‚æ•°åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²</td><td></td></tr><tr><td>backup</td><td>ä¿®æ”¹æºæ–‡ä»¶å‰åˆ›å»ºä¸€ä¸ªåŒ…å«æ—¶é—´æˆ³ä¿¡æ¯çš„å¤‡ä»½æ–‡ä»¶</td><td>no/yes</td></tr><tr><td>before</td><td>å¦‚æœæŒ‡å®šï¼Œåˆ™ä»…æ›¿æ¢/åˆ é™¤æ­¤åŒ¹é…ä¹‹å‰çš„å†…å®¹ï¼Œå¯ä»¥å’Œafterå‚æ•°ç»“åˆä½¿ç”¨</td><td></td></tr><tr><td>after</td><td>å¦‚æœæŒ‡å®šï¼Œåˆ™ä»…æ›¿æ¢/åˆ é™¤æ­¤åŒ¹é…ä¹‹åçš„å†…å®¹ï¼Œå¯ä»¥å’Œbeforeå‚æ•°ç»“åˆä½¿ç”¨</td><td></td></tr><tr><td>owner</td><td>ä¿®æ”¹æ–‡ä»¶ç”¨æˆ·å</td><td></td></tr><tr><td>group</td><td>ä¿®æ”¹æ–‡ä»¶ç»„å</td><td></td></tr><tr><td>mode</td><td>ä¿®æ”¹æ–‡ä»¶æƒé™</td><td></td></tr></tbody></table><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;"># æŸ¥æ‰¾æ‰€æœ‰ä»¥ UUID å¼€å¤´çš„è¡Œ, å¹¶å°†è¿™äº›è¡Œæ³¨é‡Šæ‰</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> all</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> replace</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;path=/etc/fstab regexp=&#39;^(UUID.*)&#39; replace=&#39;#\1&#39;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># æŸ¥æ‰¾æ‰€æœ‰ä»¥ # å¼€å¤´, ç´§æ¥ç€æ˜¯ UUID çš„ è¡Œ (è¿™äº›è¡Œæ˜¯è¢«æ³¨é‡Šæ‰çš„)</span></span>
<span class="line"><span style="color:#BDC4CC;"># å¹¶ç§»é™¤è¡Œé¦–çš„ # ç¬¦å·, ä»è€Œå–æ¶ˆè¿™äº›è¡Œçš„æ³¨é‡Š.</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> all</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> replace</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;path=/etc/fstab regexp=&#39;^#(UUID.*)&#39; replace=&#39;\1&#39;&quot;</span></span></code></pre></div><h2 id="selinux-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#selinux-æ¨¡å—"><span>selinux æ¨¡å—</span></a></h2><p>æ‰¹é‡ç®¡ç†è¿œç«¯ä¸»æœºçš„ SELINUX ç­–ç•¥ã€‚</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;"># å¯ç”¨</span></span>
<span class="line"><span style="color:#F0F3F6;">[root@ansible </span><span style="color:#FF9492;">~</span><span style="color:#F0F3F6;">] ansible 192.168.80.18 -m selinux -a </span><span style="color:#ADDCFF;">&#39;state=enforcing policy=targeted&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># ç¦ç”¨</span></span>
<span class="line"><span style="color:#F0F3F6;">[root@ansible </span><span style="color:#FF9492;">~</span><span style="color:#F0F3F6;">] ansible 192.168.80.18 -m selinux -a </span><span style="color:#ADDCFF;">&#39;state=disabled&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># éªŒè¯</span></span>
<span class="line"><span style="color:#F0F3F6;">[root@centos8 </span><span style="color:#FF9492;">~</span><span style="color:#F0F3F6;">] grep -v </span><span style="color:#ADDCFF;">&#39;#&#39;</span><span style="color:#F0F3F6;"> /etc/selinux/config</span></span>
<span class="line"><span style="color:#F0F3F6;">SELINUX</span><span style="color:#FF9492;">=</span><span style="color:#ADDCFF;">disabled</span></span>
<span class="line"><span style="color:#F0F3F6;">SELINUXTYPE</span><span style="color:#FF9492;">=</span><span style="color:#ADDCFF;">targeted</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F0F3F6;">[root@centos8 </span><span style="color:#FF9492;">~</span><span style="color:#F0F3F6;">] getenforce </span></span>
<span class="line"><span style="color:#FFB757;">Permissive</span></span></code></pre></div><h2 id="reboot-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#reboot-æ¨¡å—"><span>reboot æ¨¡å—</span></a></h2><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#F0F3F6;">[root@ansible </span><span style="color:#FF9492;">~</span><span style="color:#F0F3F6;">] ansible websrvs -m reboot</span></span></code></pre></div><h2 id="mount-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#mount-æ¨¡å—"><span>mount æ¨¡å—</span></a></h2><p>æ‰¹é‡ç®¡ç†è¢«æ§ç«¯è®¾å¤‡æŒ‚è½½ã€‚</p><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>src</td><td>æœ¬åœ°æˆ–è¿œç¨‹è®¾å¤‡çš„è·¯å¾„</td></tr><tr><td>path</td><td>è®¾å¤‡æŒ‚è½½è‡³æœ¬åœ°çš„è·¯å¾„</td></tr><tr><td>fstype</td><td>æŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼Œxfsã€nfs...</td></tr><tr><td>opts</td><td>æŒ‚è½½çš„å‚æ•°ï¼Œdefaultsã€ro...</td></tr><tr><td>state</td><td>æŒ‚è½½çš„çŠ¶æ€ï¼Œabsentã€mountedã€unmounted</td></tr></tbody></table><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;"># ä¸´æ—¶æŒ‚è½½</span></span>
<span class="line"><span style="color:#FFB757;">mount</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> mount</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;src=&quot;UUID=b3e48f45-f933-4c8e-a700-22a159ec9077&quot; path=/home fstype=xfs opts=noatime state=present&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># ä¸´æ—¶å–æ¶ˆæŒ‚è½½</span></span>
<span class="line"><span style="color:#FFB757;">mount</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> mount</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;path=/home fstype=xfs opts=noatime state=unmounted&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># æ°¸ä¹…æŒ‚è½½</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> mount</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;src=10.0.0.8:/data/wordpress path=/var/www/html/wp-content/uploads opts=&quot;_netdev&quot; state=mounted&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFB757;">//</span><span style="color:#ADDCFF;"> æ°¸ä¹…å¸è½½</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> mount</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;src=10.0.0.8:/data/wordpress path=/var/www/html/wpï¿¾content/uploads state=absent&#39;</span></span></code></pre></div><h2 id="setup-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#setup-æ¨¡å—"><span>setup æ¨¡å—</span></a></h2><p><code>setup</code>æ¨¡å—ç”¨äºæ”¶é›†ä¸»æœºçš„ç³»ç»Ÿä¿¡æ¯ï¼Œè¿™äº›<code>facts</code>ä¿¡æ¯å¯ä»¥ç›´æ¥ä»¥å˜é‡çš„å½¢å¼ä½¿ç”¨ã€‚</p><p>ä½†æ˜¯å¦‚æœä¸»æœºè¾ƒå¤šï¼Œä¼šå½±å“æ‰§è¡Œé€Ÿåº¦ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>gather_facts: no</code>æ¥ç¦æ­¢ Ansible æ”¶é›†<code>facts</code>ä¿¡æ¯ã€‚</p><p><code>filter</code>å‚æ•°ï¼šç”¨äºè¿›è¡Œæ¡ä»¶è¿‡æ»¤ã€‚å¦‚æœè®¾ç½®ï¼Œä»…è¿”å›åŒ¹é…è¿‡æ»¤æ¡ä»¶çš„ä¿¡æ¯ã€‚</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;"># è¿™æ¡å‘½ä»¤ä¼šæ”¶é›† inventory ä¸­ websrvs ç»„ä¸‹æ‰€æœ‰ä¸»æœºçš„æ‰€æœ‰ facts</span></span>
<span class="line"><span style="color:#BDC4CC;"># å¹¶å°†è¿™äº›ä¿¡æ¯æ‰“å°å‡ºæ¥</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> setup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># ä¸»æœºçš„èŠ‚ç‚¹å</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> setup</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;filter=ansible_nodename&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># ä¸»æœºçš„ä¸»æœºå</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> setup</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;filter=ansible_hostname&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># ä¸»æœºæ‰€å±çš„åŸŸå </span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> setup</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;filter=ansible_domain&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># ä¸»æœºçš„æ€»å†…å­˜é‡</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> setup</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;filter=ansible_memtotal_mb&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># ä¸»æœºçš„ç‰©ç†å†…å­˜é‡</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> setup</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;filter=ansible_memory_mb&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># ä¸»æœºå½“å‰ç©ºé—²çš„å†…å­˜é‡</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> setup</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;filter=ansible_memfree_mb&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># ä¸»æœºæ“ä½œç³»ç»Ÿçš„å®¶æ— // ä¾‹å¦‚ RedHatã€Debian ç­‰</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> setup</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;filter=ansible_os_family&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># ä¸»æœºæ“ä½œç³»ç»Ÿçš„ä¸»ç‰ˆæœ¬å·</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> setup</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;filter=ansible_distribution_major_version&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># ä¸»æœºæ“ä½œç³»ç»Ÿçš„å®Œæ•´ç‰ˆæœ¬å·</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> setup</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;filter=ansible_distribution_version&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># ä¸»æœºçš„è™šæ‹Ÿ CPU æ•°é‡</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> setup</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;filter=ansible_processor_vcpus&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># ä¸»æœºçš„æ‰€æœ‰ IPv4 åœ°å€åˆ—è¡¨</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> setup</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;filter=ansible_all_ipv4_addresses&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># ä¸»æœºçš„æ¶æ„ç±»å‹</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> setup</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;filter=ansible_architecture&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># ä¸»æœºå·²è¿è¡Œçš„æ—¶é—´</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> setup</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;filter=ansible_uptime_seconds&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># ä»¥ ansible_processor å¼€å¤´çš„æ‰€æœ‰ facts</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> setup</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &quot;filter=ansible_processor*&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># ä¸»æœºçš„ç¯å¢ƒå˜é‡ </span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> websrvs</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> setup</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;filter=ansible_env&#39;</span></span></code></pre></div><p>å– IP åœ°å€</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;"># å–æ‰€æœ‰ IP</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#91CBFF;"> 192.168.80.18</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> setup</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;filter=ansible_all_ipv4_addresses&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BDC4CC;"># å–é»˜è®¤ IP</span></span>
<span class="line"><span style="color:#FFB757;">ansible</span><span style="color:#ADDCFF;"> all</span><span style="color:#91CBFF;"> -m</span><span style="color:#ADDCFF;"> setup</span><span style="color:#91CBFF;"> -a</span><span style="color:#ADDCFF;"> &#39;filter=&quot;ansible_default_ipv4&quot;&#39;</span></span></code></pre></div><h2 id="debug-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#debug-æ¨¡å—"><span>debug æ¨¡å—</span></a></h2><p>æ­¤æ¨¡å—å¯ä»¥ç”¨äºè¾“å‡ºä¿¡æ¯ï¼Œå¹¶ä¸”é€šè¿‡<code>msg</code>å®šåˆ¶è¾“å‡ºçš„ä¿¡æ¯å†…å®¹ã€‚</p><div class="hint-container warning"><p class="hint-container-title">æ³¨æ„</p><p>msg åé¢è·Ÿå˜é‡æ—¶ï¼Œéœ€è¦åŠ  &quot; &quot; å¼•èµ·æ¥</p></div><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;"># é»˜è®¤è¾“å‡º Hello world ( é»˜è®¤æ²¡æœ‰æŒ‡å®š msg, é»˜è®¤è¾“å‡º &quot;Hello world!&quot; )</span></span>
<span class="line"><span style="color:#F0F3F6;">[root@ansible </span><span style="color:#FF9492;">~</span><span style="color:#F0F3F6;">] ansible 192.168.80.18 -m debug</span></span></code></pre></div><p>åˆ©ç”¨<code>debug</code>æ¨¡å—è¾“å‡ºå˜é‡ã€‚</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#F0F3F6;">[root@centos8 </span><span style="color:#FF9492;">~</span><span style="color:#F0F3F6;">] vim debug.yaml</span></span>
<span class="line"><span style="color:#FFB757;">---</span></span>
<span class="line"><span style="color:#FFB757;">-</span><span style="color:#ADDCFF;"> hosts:</span><span style="color:#ADDCFF;"> websrvs</span></span>
<span class="line"><span style="color:#FFB757;">  tasks:</span></span>
<span class="line"><span style="color:#FFB757;">  -</span><span style="color:#ADDCFF;"> name:</span><span style="color:#ADDCFF;"> output</span><span style="color:#ADDCFF;"> variables</span></span>
<span class="line"><span style="color:#FFB757;">    debug:</span></span>
<span class="line"><span style="color:#FFB757;">      msg:</span><span style="color:#ADDCFF;"> Host</span><span style="color:#ADDCFF;"> &quot;{{ ansible_nodename }}&quot;</span><span style="color:#ADDCFF;"> Ip</span><span style="color:#ADDCFF;"> &quot;{{ ansible_default_ipv4.address }}&quot;</span></span>
<span class="line"><span style="color:#F0F3F6;">      </span></span>
<span class="line"><span style="color:#F0F3F6;">[root@centos8 </span><span style="color:#FF9492;">~</span><span style="color:#F0F3F6;">] ansible-playbook debug.yaml</span></span></code></pre></div><p>æ˜¾ç¤ºå­—ç¬¦ä¸²ç‰¹å®šå­—ç¬¦</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" data-title="shell" style="background-color:#0a0c10;color:#f0f3f6;"><pre class="shiki github-dark-high-contrast vp-code"><code><span class="line"><span style="color:#BDC4CC;"># cat debug.yml</span></span>
<span class="line"><span style="color:#FFB757;">-</span><span style="color:#ADDCFF;"> hosts:</span><span style="color:#ADDCFF;"> all</span></span>
<span class="line"><span style="color:#FFB757;">  gather_facts:</span><span style="color:#ADDCFF;"> n</span></span>
<span class="line"><span style="color:#FFB757;">  vars:</span></span>
<span class="line"><span style="color:#FFB757;">    a:</span><span style="color:#ADDCFF;"> &quot;12345&quot;</span></span>
<span class="line"><span style="color:#FFB757;">  tasks:</span></span>
<span class="line"><span style="color:#FFB757;">  -</span><span style="color:#ADDCFF;"> debug:</span></span>
<span class="line"><span style="color:#FFB757;">    msg:</span><span style="color:#ADDCFF;"> &quot;{{a[2]}}&quot;</span></span>
<span class="line"><span style="color:#F0F3F6;">    </span></span>
<span class="line"><span style="color:#FFB757;">//</span><span style="color:#ADDCFF;"> å®šä¹‰äº†ä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡</span><span style="color:#ADDCFF;"> a,</span><span style="color:#ADDCFF;"> å¦‚æœæƒ³è¦è·å–</span><span style="color:#ADDCFF;"> a</span><span style="color:#ADDCFF;"> å­—ç¬¦ä¸²çš„ç¬¬</span><span style="color:#91CBFF;"> 3</span><span style="color:#ADDCFF;"> ä¸ªå­—ç¬¦</span></span>
<span class="line"><span style="color:#FFB757;">//</span><span style="color:#ADDCFF;"> åˆ™å¯ä»¥ä½¿ç”¨</span><span style="color:#ADDCFF;"> &quot;a[2]&quot;</span><span style="color:#ADDCFF;"> è·å–,</span><span style="color:#ADDCFF;"> ç´¢å¼•ä»</span><span style="color:#91CBFF;"> 0</span><span style="color:#ADDCFF;"> å¼€å§‹,</span><span style="color:#ADDCFF;"> æ‰§è¡Œä¸Šä¾‹</span><span style="color:#ADDCFF;"> playbook,</span><span style="color:#ADDCFF;"> debug</span><span style="color:#ADDCFF;"> çš„è¾“å‡ºä¿¡æ¯å¦‚ä¸‹:</span></span>
<span class="line"><span style="color:#FFB757;">TASK</span><span style="color:#F0F3F6;"> [debug] </span><span style="color:#FF9492;">*************************</span></span>
<span class="line"><span style="color:#FFB757;">ok:</span><span style="color:#F0F3F6;"> [test71] =</span><span style="color:#FF9492;">&gt;</span><span style="color:#F0F3F6;"> {</span></span>
<span class="line"><span style="color:#FFB757;">    &quot;msg&quot;</span><span style="color:#91CBFF;">:</span><span style="color:#ADDCFF;"> &quot;3&quot;</span></span>
<span class="line"><span style="color:#F0F3F6;">}</span></span></code></pre></div></div><!----><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><span class="vp-meta-info" data-allow-mismatch="text">2025/4/23 09:49:11</span></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: 592786982@qq.com">WSQ</span><!--]--><!--]--></div></div></footer><!----><div id="comment" class="giscus-wrapper input-top vp-comment" vp-comment style="display:none;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!----><!--]--></main><!--]--><!----></div><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/wsq-blog/assets/app-BAoNGAQX.js" defer></script>
  </body>
</html>
